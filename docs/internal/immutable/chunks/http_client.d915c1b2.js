import{B as Yo,S as We,i as Ve,U as V,s as He,g as ot,l as st,m as ct,d as H,r as $,a as pt,v as et,n as It,f as Nr,$ as uu,a0 as Jp,k as Gt,q as Zt,a1 as at,Q as vt,R as An,e as Nt,a2 as so,a3 as fo,y as Vt,z as Ht,A as ue,I as co,a4 as lu,t as Kr,F as Kp,b as ga,C as Qp,a5 as tb,j as od,p as sd,w as fd,x as cd,Y as Pn,V as eb,W as nb,X as rb,T as ge,c as ud,O as ib,a6 as hu,a7 as ab,P as du}from"./index.5b30edc6.js";import{c as Mt,n as gu,o as ld,_ as pi,p as Un,q as uo,r as gr,k as vn,s as zs,t as ob,u as hd,h as Ln,w as qs,x as sb,y as fb,j as cb,z as dd,l as Dt,A as ub,C as lb,D as gd,i as js,E as hb,F as ma,S as mu,G as db,H as Vf,I as Hf,R as lo,J as Yf,K as md,L as pu,N as bu,P as gb,T as Mn,U as yu,V as ii,W as mb,X as _u,Y as te,Z as Xf,$ as pb,a0 as wu,a1 as bb,a2 as pa,a3 as pd,a4 as ba,d as Jt,f as tn,e as Kt,a5 as yb,m as _b,g as vu,a6 as wb,a7 as vb}from"./index.bd97ea1f.js";import{w as ee}from"./paths.3cad7815.js";var Mb=Mt(function(e,n){return Number(e)+Number(n)});function bd(t,e,n){return function(){for(var r=[],i=0,a=t,s=0;s<e.length||i<arguments.length;){var f;s<e.length&&(!gu(e[s])||i>=arguments.length)?f=e[s]:(f=arguments[i],i+=1),r[s]=f,gu(f)||(a-=1),s+=1}return a<=0?n.apply(this,r):ld(a,bd(t,r,n))}}var mr=Mt(function(e,n){return e===1?pi(n):ld(e,bd(e,[],n))});function Sb(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var xb=Mt(function(e,n){return n>e?n:e});function fa(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i}var Tb=function(){function t(e,n){this.xf=n,this.f=e}return t.prototype["@@transducer/init"]=Un.init,t.prototype["@@transducer/result"]=Un.result,t.prototype["@@transducer/step"]=function(e,n){return this.xf["@@transducer/step"](e,this.f(n))},t}(),Ab=Mt(function(e,n){return new Tb(e,n)}),kb=Mt(uo(["fantasy-land/map","map"],Ab,function(e,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return mr(n.length,function(){return e.call(this,n.apply(this,arguments))});case"[object Object]":return gr(function(r,i){return r[i]=e(n[i]),r},{},vn(n));default:return fa(e,n)}}));const Sn=kb,Eb=Number.isInteger||function(e){return e<<0===e};var Cb=Mt(function(e,n){var r=e<0?n.length+e:e;return zs(n)?n.charAt(r):n[r]});const yd=Cb;var Nb=Mt(function(e,n){if(n!=null)return Eb(e)?yd(e,n):n[e]});const $s=Nb;var Db=Mt(function(e,n){return Sn($s(e),n)});const Gf=Db;var Ib=function(){function t(e,n){this.xf=n,this.f=e,this.any=!1}return t.prototype["@@transducer/init"]=Un.init,t.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,n){return this.f(n)&&(this.any=!0,e=Sb(this.xf["@@transducer/step"](e,!0))),e},t}(),Lb=Mt(function(e,n){return new Ib(e,n)}),Fb=Mt(uo(["any"],Lb,function(e,n){for(var r=0;r<n.length;){if(e(n[r]))return!0;r+=1}return!1}));const _d=Fb;var Ob=Mt(function(e,n){return typeof n["fantasy-land/ap"]=="function"?n["fantasy-land/ap"](e):typeof e.ap=="function"?e.ap(n):typeof e=="function"?function(r){return e(r)(n(r))}:gr(function(r,i){return ob(r,Sn(i,n))},[],e)}),Pb=Mt(function(e,n){return e.apply(this,n)});function Mu(t,e){return qs(e)?e.map(t):vn(e).reduce(function(n,r){return n[r]=t(e[r]),n},{})}var Rb=pi(function t(e){return e=Mu(function(n){return typeof n=="function"?n:t(n)},e),mr(hd(xb,0,Gf("length",Ln(e))),function(){var n=arguments;return Mu(function(r){return Pb(r,n)},e)})});const Su=Rb;function Ws(t){var e=Object.prototype.toString.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}var Bb=Mt(function(e,n){var r=mr(e,n);return mr(e,function(){return gr(Ob,Sn(r,arguments[0]),Array.prototype.slice.call(arguments,1))})}),Ub=pi(function(e){return Bb(e.length,e)});function zb(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}}var qb=function(t){return{"@@transducer/init":Un.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var r=t["@@transducer/step"](e,n);return r["@@transducer/reduced"]?zb(r):r}}},jb=function(e){var n=qb(e);return{"@@transducer/init":Un.init,"@@transducer/result":function(r){return n["@@transducer/result"](r)},"@@transducer/step":function(r,i){return sb(i)?gr(n,r,i):gr(n,r,[i])}}},$b=Mt(function(e,n){return Sn(e,jb(n))}),Wb=Mt(uo(["fantasy-land/chain","chain"],$b,function(e,n){return typeof n=="function"?function(r){return e(n(r))(r)}:fb(!1)(Sn(e,n))}));const wd=Wb;function Xo(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var Rr=function(e){return(e<10?"0":"")+e},Vb=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+Rr(e.getUTCMonth()+1)+"-"+Rr(e.getUTCDate())+"T"+Rr(e.getUTCHours())+":"+Rr(e.getUTCMinutes())+":"+Rr(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function Hb(t){return function(){return!t.apply(this,arguments)}}var Yb=Mt(function(e,n){return cb(Hb(e),n)});const Xb=Yb;function vd(t,e){var n=function(s){var f=e.concat([t]);return dd(s,f)?"<Circular>":vd(s,f)},r=function(a,s){return fa(function(f){return Xo(f)+": "+n(a[f])},s.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+fa(n,t).join(", ")+"))";case"[object Array]":return"["+fa(n,t).concat(r(t,Xb(function(a){return/^\d+$/.test(a)},vn(t)))).join(", ")+"]";case"[object Boolean]":return typeof t=="object"?"new Boolean("+n(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?n(NaN):Xo(Vb(t)))+")";case"[object Null]":return"null";case"[object Number]":return typeof t=="object"?"new Number("+n(t.valueOf())+")":1/t===-1/0?"-0":t.toString(10);case"[object String]":return typeof t=="object"?"new String("+n(t.valueOf())+")":Xo(t);case"[object Undefined]":return"undefined";default:if(typeof t.toString=="function"){var i=t.toString();if(i!=="[object Object]")return i}return"{"+r(t,vn(t)).join(", ")+"}"}}var Go=pi(function(e){return vd(e,[])}),Gb=Mt(function(e,n){if(qs(e)){if(qs(n))return e.concat(n);throw new TypeError(Go(n)+" is not an array")}if(zs(e)){if(zs(n))return e+n;throw new TypeError(Go(n)+" is not a string")}if(e!=null&&Ws(e["fantasy-land/concat"]))return e["fantasy-land/concat"](n);if(e!=null&&Ws(e.concat))return e.concat(n);throw new TypeError(Go(e)+' does not have a method named "concat" or "fantasy-land/concat"')});const ya=Gb;var Zb=yd(-1);const Zo=Zb;var Jb=Mt(function(e,n){return e||n}),Kb=Mt(function(e,n){return Ws(e)?function(){return e.apply(this,arguments)||n.apply(this,arguments)}:Ub(Jb)(e,n)});const Qb=Kb;var t2=pi(function(e){return mr(e.length,function(n,r){var i=Array.prototype.slice.call(arguments,0);return i[0]=r,i[1]=n,e.apply(this,i)})}),e2=Mt(function(e,n){if(e.length===0||Dt(n))return!1;for(var r=n,i=0;i<e.length;)if(!Dt(r)&&ub(e[i],r))r=r[e[i]],i+=1;else return!1;return!0}),n2=Mt(function(e,n){return e2([e],n)});const _a=n2;var r2=lb(function(e,n,r){return mr(Math.max(e.length,n.length,r.length),function(){return e.apply(this,arguments)?n.apply(this,arguments):r.apply(this,arguments)})});const xu=r2;var i2=function(){function t(e,n){this.xf=n,this.f=e,this.set=new gd}return t.prototype["@@transducer/init"]=Un.init,t.prototype["@@transducer/result"]=Un.result,t.prototype["@@transducer/step"]=function(e,n){return this.set.add(this.f(n))?this.xf["@@transducer/step"](e,n):e},t}(),a2=Mt(function(e,n){return new i2(e,n)}),o2=Mt(uo([],a2,function(t,e){for(var n=new gd,r=[],i=0,a,s;i<e.length;)s=e[i],a=t(s),n.add(a)&&r.push(s),i+=1;return r})),s2=o2(js),f2=Mt(function(e,n){var r,i;return e.length>n.length?(r=e,i=n):(r=n,i=e),s2(hb(t2(dd)(r),i))});const c2=f2;var u2=Mt(function(e,n){return gr(function(r,i){return r[i]=e(n[i],i,n),r},{},vn(n))});const l2=u2;var h2=hd(Mb,0);const d2=h2;var g2=Mt(function(e,n){for(var r={},i=0;i<e.length;)e[i]in n&&(r[e[i]]=n[e[i]]),i+=1;return r});const m2=g2;var p2=Mt(function(e,n){return Array.prototype.slice.call(n,0).sort(e)});const b2=p2;var y2=Mt(function(e,n){return ya(ma(e,n),ma(n,e))});const _2=y2;function ne(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ho(t){let e,n,r;t.length!==2?(e=ne,n=(f,c)=>ne(t(f),c),r=(f,c)=>t(f)-c):(e=t===ne||t===bi?t:w2,n=t,r=t);function i(f,c,u=0,l=f.length){if(u<l){if(e(c,c)!==0)return l;do{const d=u+l>>>1;n(f[d],c)<0?u=d+1:l=d}while(u<l)}return u}function a(f,c,u=0,l=f.length){if(u<l){if(e(c,c)!==0)return l;do{const d=u+l>>>1;n(f[d],c)<=0?u=d+1:l=d}while(u<l)}return u}function s(f,c,u=0,l=f.length){const d=i(f,c,u,l-1);return d>u&&r(f[d-1],c)>-r(f[d],c)?d-1:d}return{left:i,center:s,right:a}}function w2(){return 0}function Md(t){return t===null?NaN:+t}function*v2(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const M2=ho(ne),S2=M2.right;ho(Md).center;const Zf=S2;function x2(t){return t.length|0}function T2(t){return!(t>0)}function A2(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function k2(t){return e=>t(...e)}function E2(...t){const e=typeof t[t.length-1]=="function"&&k2(t.pop());t=t.map(A2);const n=t.map(x2),r=t.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(T2))return a;for(;;){a.push(i.map((f,c)=>t[c][f]));let s=r;for(;++i[s]===n[s];){if(s===0)return e?a.map(e):a;i[s--]=0}}}function C2(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function Sd(t,e){let n=0,r,i=0,a=0;if(e===void 0)for(let s of t)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i));else{let s=-1;for(let f of t)(f=e(f,++s,t))!=null&&(f=+f)>=f&&(r=f-i,i+=r/++n,a+=r*(f-i))}if(n>1)return a/(n-1)}function N2(t,e){const n=Sd(t,e);return n&&Math.sqrt(n)}function _n(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class zn{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],s=e+a,f=Math.abs(e)<Math.abs(a)?e-(s-a):a-(s-e);f&&(n[r++]=f),e=s}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,a,s=0;if(n>0){for(s=e[--n];n>0&&(r=s,i=e[--n],s=r+i,a=i-(s-r),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(i=a*2,r=s+i,i==r-s&&(s=r))}return s}}class qn extends Map{constructor(e,n=Ad){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Vs(this,e))}has(e){return super.has(Vs(this,e))}set(e,n){return super.set(xd(this,e),n)}delete(e){return super.delete(Td(this,e))}}class go extends Set{constructor(e,n=Ad){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Vs(this,e))}add(e){return super.add(xd(this,e))}delete(e){return super.delete(Td(this,e))}}function Vs({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function xd({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Td({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ad(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Hs(t){return t}function Jf(t,...e){return Kf(t,Hs,Hs,e)}function Qr(t,e,...n){return Kf(t,Hs,e,n)}function D2(t,e,...n){return Kf(t,Array.from,e,n)}function Kf(t,e,n,r){return function i(a,s){if(s>=r.length)return n(a);const f=new qn,c=r[s++];let u=-1;for(const l of a){const d=c(l,++u,a),h=f.get(d);h?h.push(l):f.set(d,[l])}for(const[l,d]of f)f.set(l,i(d,s));return e(f)}(t,0)}function I2(t,e){return Array.from(e,n=>t[n])}function Ys(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,a)=>{for(const s of e){const f=wa(s[i],s[a]);if(f)return f}})):(n=t.map(n),r.sort((i,a)=>wa(n[i],n[a]))),I2(t,r)}return t.sort(kd(n))}function kd(t=ne){if(t===ne)return wa;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function wa(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function Qf(t,e,n){return(e.length!==2?Ys(Qr(t,e,n),([r,i],[a,s])=>ne(i,s)||ne(r,a)):Ys(Jf(t,n),([r,i],[a,s])=>e(i,s)||ne(r,a))).map(([r])=>r)}const L2=Math.sqrt(50),F2=Math.sqrt(10),O2=Math.sqrt(2);function va(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=L2?10:a>=F2?5:a>=O2?2:1;let f,c,u;return i<0?(u=Math.pow(10,-i)/s,f=Math.round(t*u),c=Math.round(e*u),f/u<t&&++f,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,f=Math.round(t/u),c=Math.round(e/u),f*u<t&&++f,c*u>e&&--c),c<f&&.5<=n&&n<2?va(t,e,n*2):[f,c,u]}function Ma(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?va(e,t,n):va(t,e,n);if(!(a>=i))return[];const f=a-i+1,c=new Array(f);if(r)if(s<0)for(let u=0;u<f;++u)c[u]=(a-u)/-s;else for(let u=0;u<f;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<f;++u)c[u]=(i+u)/-s;else for(let u=0;u<f;++u)c[u]=(i+u)*s;return c}function Xs(t,e,n){return e=+e,t=+t,n=+n,va(t,e,n)[2]}function Gs(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Xs(e,t,n):Xs(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function se(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function P2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function ze(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function R2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Ed(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?wa:kd(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,l=Math.log(c),d=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*d*(c-d)/c)*(u-c/2<0?-1:1),g=Math.max(n,Math.floor(e-u*d/c+h)),m=Math.min(r,Math.floor(e+(c-u)*d/c+h));Ed(t,e,g,m,i)}const a=t[e];let s=n,f=r;for(Br(t,n,e),i(t[r],a)>0&&Br(t,n,r);s<f;){for(Br(t,s,f),++s,--f;i(t[s],a)<0;)++s;for(;i(t[f],a)>0;)--f}i(t[n],a)===0?Br(t,n,f):(++f,Br(t,f,r)),f<=e&&(n=f+1),e<=f&&(r=f-1)}return t}function Br(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Cd(t,e=ne){let n,r=!1;if(e.length===1){let i;for(const a of t){const s=e(a);(r?ne(s,i)>0:ne(s,s)===0)&&(n=a,i=s,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function Sa(t,e,n){if(t=Float64Array.from(v2(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return ze(t);if(e>=1)return se(t);var r,i=(r-1)*e,a=Math.floor(i),s=se(Ed(t,a).subarray(0,a+1)),f=ze(t.subarray(a+1));return s+(f-s)*(i-a)}}function B2(t,e,n=Md){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),f=+n(t[a+1],a+1,t);return s+(f-s)*(i-a)}}function U2(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function Zs(t,e){return Sa(t,.5,e)}function*z2(t){for(const e of t)yield*e}function Nd(t){return Array.from(z2(t))}function q2(t,e){const n=new qn;if(e===void 0)for(let a of t)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let s of t)(s=e(s,++a,t))!=null&&s>=s&&n.set(s,(n.get(s)||0)+1)}let r,i=0;for(const[a,s]of n)s>i&&(i=s,r=a);return r}function j2(t,e=$2){const n=[];let r,i=!1;for(const a of t)i&&n.push(e(r,a)),r=a,i=!0;return n}function $2(t,e){return[t,e]}function Js(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function jn(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function xa(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function W2(t){return t}var Jo=1,Ko=2,Ks=3,Ui=4,Tu=1e-6;function V2(t){return"translate("+t+",0)"}function H2(t){return"translate(0,"+t+")"}function Y2(t){return e=>+t(e)}function X2(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function G2(){return!this.__axis}function Z2(t,e){var n=[],r=null,i=null,a=6,s=6,f=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Jo||t===Ui?-1:1,l=t===Ui||t===Ko?"x":"y",d=t===Jo||t===Ks?V2:H2;function h(g){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),p=i??(e.tickFormat?e.tickFormat.apply(e,n):W2),b=Math.max(a,0)+f,y=e.range(),_=+y[0]+c,M=+y[y.length-1]+c,w=(e.bandwidth?X2:Y2)(e.copy(),c),S=g.selection?g.selection():g,v=S.selectAll(".domain").data([null]),T=S.selectAll(".tick").data(m,e).order(),x=T.exit(),N=T.enter().append("g").attr("class","tick"),E=T.select("line"),k=T.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(N),E=E.merge(N.append("line").attr("stroke","currentColor").attr(l+"2",u*a)),k=k.merge(N.append("text").attr("fill","currentColor").attr(l,u*b).attr("dy",t===Jo?"0em":t===Ks?"0.71em":"0.32em")),g!==S&&(v=v.transition(g),T=T.transition(g),E=E.transition(g),k=k.transition(g),x=x.transition(g).attr("opacity",Tu).attr("transform",function(U){return isFinite(U=w(U))?d(U+c):this.getAttribute("transform")}),N.attr("opacity",Tu).attr("transform",function(U){var R=this.parentNode.__axis;return d((R&&isFinite(R=R(U))?R:w(U))+c)})),x.remove(),v.attr("d",t===Ui||t===Ko?s?"M"+u*s+","+_+"H"+c+"V"+M+"H"+u*s:"M"+c+","+_+"V"+M:s?"M"+_+","+u*s+"V"+c+"H"+M+"V"+u*s:"M"+_+","+c+"H"+M),T.attr("opacity",1).attr("transform",function(U){return d(w(U)+c)}),E.attr(l+"2",u*a),k.attr(l,u*b).text(p),S.filter(G2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ko?"start":t===Ui?"end":"middle"),S.each(function(){this.__axis=w})}return h.scale=function(g){return arguments.length?(e=g,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),h):n.slice()},h.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),h):r&&r.slice()},h.tickFormat=function(g){return arguments.length?(i=g,h):i},h.tickSize=function(g){return arguments.length?(a=s=+g,h):a},h.tickSizeInner=function(g){return arguments.length?(a=+g,h):a},h.tickSizeOuter=function(g){return arguments.length?(s=+g,h):s},h.tickPadding=function(g){return arguments.length?(f=+g,h):f},h.offset=function(g){return arguments.length?(c=+g,h):c},h}function J2(t){return Z2(Ks,t)}function jt(t){return typeof t=="string"?new mu([[document.querySelector(t)]],[document.documentElement]):new mu([[t]],db)}function K2(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Qs(t,e){if(t=K2(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const tf={capture:!0,passive:!1};function ef(t){t.preventDefault(),t.stopImmediatePropagation()}function Q2(t){var e=t.document.documentElement,n=jt(t).on("dragstart.drag",ef,tf);"onselectstart"in e?n.on("selectstart.drag",ef,tf):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ty(t,e){var n=t.document.documentElement,r=jt(t).on("dragstart.drag",null);e&&(r.on("click.drag",ef,tf),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Dd=Math.PI/180,Id=180/Math.PI,Ta=18,Ld=.96422,Fd=1,Od=.82521,Pd=4/29,ur=6/29,Rd=3*ur*ur,ey=ur*ur*ur;function Bd(t){if(t instanceof Ue)return new Ue(t.l,t.a,t.b,t.opacity);if(t instanceof nn)return Ud(t);t instanceof lo||(t=md(t));var e=ns(t.r),n=ns(t.g),r=ns(t.b),i=Qo((.2225045*e+.7168786*n+.0606169*r)/Fd),a,s;return e===n&&n===r?a=s=i:(a=Qo((.4360747*e+.3850649*n+.1430804*r)/Ld),s=Qo((.0139322*e+.0971045*n+.7141733*r)/Od)),new Ue(116*i-16,500*(a-i),200*(i-s),t.opacity)}function nf(t,e,n,r){return arguments.length===1?Bd(t):new Ue(t,e,n,r??1)}function Ue(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Vf(Ue,nf,Hf(Yf,{brighter(t){return new Ue(this.l+Ta*(t??1),this.a,this.b,this.opacity)},darker(t){return new Ue(this.l-Ta*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Ld*ts(e),t=Fd*ts(t),n=Od*ts(n),new lo(es(3.1338561*e-1.6168667*t-.4906146*n),es(-.9787684*e+1.9161415*t+.033454*n),es(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Qo(t){return t>ey?Math.pow(t,1/3):t/Rd+Pd}function ts(t){return t>ur?t*t*t:Rd*(t-Pd)}function es(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ns(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ny(t){if(t instanceof nn)return new nn(t.h,t.c,t.l,t.opacity);if(t instanceof Ue||(t=Bd(t)),t.a===0&&t.b===0)return new nn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Id;return new nn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Aa(t,e,n,r){return arguments.length===1?ny(t):new nn(t,e,n,r??1)}function nn(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Ud(t){if(isNaN(t.h))return new Ue(t.l,0,0,t.opacity);var e=t.h*Dd;return new Ue(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Vf(nn,Aa,Hf(Yf,{brighter(t){return new nn(this.h,this.c,this.l+Ta*(t??1),this.opacity)},darker(t){return new nn(this.h,this.c,this.l-Ta*(t??1),this.opacity)},rgb(){return Ud(this).rgb()}}));var zd=-.14861,tc=1.78277,ec=-.29227,mo=-.90649,ai=1.97294,Au=ai*mo,ku=ai*tc,Eu=tc*ec-mo*zd;function ry(t){if(t instanceof Rn)return new Rn(t.h,t.s,t.l,t.opacity);t instanceof lo||(t=md(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Eu*r+Au*e-ku*n)/(Eu+Au-ku),a=r-i,s=(ai*(n-i)-ec*a)/mo,f=Math.sqrt(s*s+a*a)/(ai*i*(1-i)),c=f?Math.atan2(s,a)*Id-120:NaN;return new Rn(c<0?c+360:c,f,i,t.opacity)}function qe(t,e,n,r){return arguments.length===1?ry(t):new Rn(t,e,n,r??1)}function Rn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Vf(Rn,qe,Hf(Yf,{brighter(t){return t=t==null?pu:Math.pow(pu,t),new Rn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bu:Math.pow(bu,t),new Rn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Dd,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new lo(255*(e+n*(zd*r+tc*i)),255*(e+n*(ec*r+mo*i)),255*(e+n*(ai*r)),this.opacity)}}));function iy(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function ay(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function oy(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Dr(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(f){for(s=0;s<r;++s)a[s]=i[s](f);return a}}function sy(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function fy(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Dr(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}function Dr(t,e){var n=typeof e,r;return e==null||n==="boolean"?gb(e):(n==="number"?Mn:n==="string"?(r=yu(e))?(e=r,ii):mb:e instanceof yu?ii:e instanceof Date?sy:ay(e)?iy:Array.isArray(e)?oy:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?fy:Mn)(t,e)}function nc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function cy(t){return function(e,n){var r=t((e=_u(e)).h,(n=_u(n)).h),i=te(e.s,n.s),a=te(e.l,n.l),s=te(e.opacity,n.opacity);return function(f){return e.h=r(f),e.s=i(f),e.l=a(f),e.opacity=s(f),e+""}}}const uy=cy(Xf);function ly(t,e){var n=te((t=nf(t)).l,(e=nf(e)).l),r=te(t.a,e.a),i=te(t.b,e.b),a=te(t.opacity,e.opacity);return function(s){return t.l=n(s),t.a=r(s),t.b=i(s),t.opacity=a(s),t+""}}function hy(t){return function(e,n){var r=t((e=Aa(e)).h,(n=Aa(n)).h),i=te(e.c,n.c),a=te(e.l,n.l),s=te(e.opacity,n.opacity);return function(f){return e.h=r(f),e.c=i(f),e.l=a(f),e.opacity=s(f),e+""}}}const dy=hy(Xf);function qd(t){return function e(n){n=+n;function r(i,a){var s=t((i=qe(i)).h,(a=qe(a)).h),f=te(i.s,a.s),c=te(i.l,a.l),u=te(i.opacity,a.opacity);return function(l){return i.h=s(l),i.s=f(l),i.l=c(Math.pow(l,n)),i.opacity=u(l),i+""}}return r.gamma=e,r}(1)}qd(Xf);var rc=qd(te);function po(t,e){e===void 0&&(e=t,t=Dr);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var f=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[f](s-f)}}function Ae(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}const rs=t=>()=>t;function gy(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function my(t){t.stopImmediatePropagation()}function is(t){t.preventDefault(),t.stopImmediatePropagation()}var Cu={name:"drag"},as={name:"space"},er={name:"handle"},nr={name:"center"};const{abs:Nu,max:zt,min:qt}=Math;function Du(t){return[+t[0],+t[1]]}function Iu(t){return[Du(t[0]),Du(t[1])]}var ca={name:"x",handles:["w","e"].map(ka),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},os={name:"y",handles:["n","s"].map(ka),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ge={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Lu={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Fu={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},py={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},by={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ka(t){return{type:t}}function yy(t){return!t.ctrlKey&&!t.button}function _y(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function wy(){return navigator.maxTouchPoints||"ontouchstart"in this}function ss(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function vy(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function My(){return Sy(ca)}function Sy(t){var e=_y,n=yy,r=wy,i=!0,a=pb("start","brush","end"),s=6,f;function c(b){var y=b.property("__brush",p).selectAll(".overlay").data([ka("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ge.overlay).merge(y).each(function(){var M=ss(this).extent;jt(this).attr("x",M[0][0]).attr("y",M[0][1]).attr("width",M[1][0]-M[0][0]).attr("height",M[1][1]-M[0][1])}),b.selectAll(".selection").data([ka("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ge.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=b.selectAll(".handle").data(t.handles,function(M){return M.type});_.exit().remove(),_.enter().append("rect").attr("class",function(M){return"handle handle--"+M.type}).attr("cursor",function(M){return Ge[M.type]}),b.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(b,y,_){b.tween?b.on("start.brush",function(M){l(this,arguments).beforestart().start(M)}).on("interrupt.brush end.brush",function(M){l(this,arguments).end(M)}).tween("brush",function(){var M=this,w=M.__brush,S=l(M,arguments),v=w.selection,T=t.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),x=Dr(v,T);function N(E){w.selection=E===1&&T===null?null:x(E),u.call(M),S.brush()}return v!==null&&T!==null?N:N(1)}):b.each(function(){var M=this,w=arguments,S=M.__brush,v=t.input(typeof y=="function"?y.apply(M,w):y,S.extent),T=l(M,w).beforestart();wu(M),S.selection=v===null?null:v,u.call(M),T.start(_).brush(_).end(_)})},c.clear=function(b,y){c.move(b,null,y)};function u(){var b=jt(this),y=ss(this).selection;y?(b.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),b.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?y[1][0]-s/2:y[0][0]-s/2}).attr("y",function(_){return _.type[0]==="s"?y[1][1]-s/2:y[0][1]-s/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?y[1][0]-y[0][0]+s:s}).attr("height",function(_){return _.type==="e"||_.type==="w"?y[1][1]-y[0][1]+s:s})):b.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(b,y,_){var M=b.__brush.emitter;return M&&(!_||!M.clean)?M:new d(b,y,_)}function d(b,y,_){this.that=b,this.args=y,this.state=b.__brush,this.active=0,this.clean=_}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(b,y){return this.starting?(this.starting=!1,this.emit("start",b,y)):this.emit("brush",b),this},brush:function(b,y){return this.emit("brush",b,y),this},end:function(b,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",b,y)),this},emit:function(b,y,_){var M=jt(this.that).datum();a.call(b,this.that,new gy(b,{sourceEvent:y,target:c,selection:t.output(this.state.selection),mode:_,dispatch:a}),M)}};function h(b){if(f&&!b.touches||!n.apply(this,arguments))return;var y=this,_=b.target.__data__.type,M=(i&&b.metaKey?_="overlay":_)==="selection"?Cu:i&&b.altKey?nr:er,w=t===os?null:py[_],S=t===ca?null:by[_],v=ss(y),T=v.extent,x=v.selection,N=T[0][0],E,k,U=T[0][1],R,B,A=T[1][0],P,C,Y=T[1][1],X,L,z=0,W=0,q,I=w&&S&&i&&b.shiftKey,tt,nt,j=Array.from(b.touches||[b],J=>{const wt=J.identifier;return J=Qs(J,y),J.point0=J.slice(),J.identifier=wt,J});wu(y);var Q=l(y,arguments,!0).beforestart();if(_==="overlay"){x&&(q=!0);const J=[j[0],j[1]||j[0]];v.selection=x=[[E=t===os?N:qt(J[0][0],J[1][0]),R=t===ca?U:qt(J[0][1],J[1][1])],[P=t===os?A:zt(J[0][0],J[1][0]),X=t===ca?Y:zt(J[0][1],J[1][1])]],j.length>1&&mt(b)}else E=x[0][0],R=x[0][1],P=x[1][0],X=x[1][1];k=E,B=R,C=P,L=X;var O=jt(y).attr("pointer-events","none"),G=O.selectAll(".overlay").attr("cursor",Ge[_]);if(b.touches)Q.moved=F,Q.ended=rt;else{var Z=jt(b.view).on("mousemove.brush",F,!0).on("mouseup.brush",rt,!0);i&&Z.on("keydown.brush",yt,!0).on("keyup.brush",St,!0),Q2(b.view)}u.call(y),Q.start(b,M.name);function F(J){for(const wt of J.changedTouches||[J])for(const ae of j)ae.identifier===wt.identifier&&(ae.cur=Qs(wt,y));if(I&&!tt&&!nt&&j.length===1){const wt=j[0];Nu(wt.cur[0]-wt[0])>Nu(wt.cur[1]-wt[1])?nt=!0:tt=!0}for(const wt of j)wt.cur&&(wt[0]=wt.cur[0],wt[1]=wt.cur[1]);q=!0,is(J),mt(J)}function mt(J){const wt=j[0],ae=wt.point0;var Le;switch(z=wt[0]-ae[0],W=wt[1]-ae[1],M){case as:case Cu:{w&&(z=zt(N-E,qt(A-P,z)),k=E+z,C=P+z),S&&(W=zt(U-R,qt(Y-X,W)),B=R+W,L=X+W);break}case er:{j[1]?(w&&(k=zt(N,qt(A,j[0][0])),C=zt(N,qt(A,j[1][0])),w=1),S&&(B=zt(U,qt(Y,j[0][1])),L=zt(U,qt(Y,j[1][1])),S=1)):(w<0?(z=zt(N-E,qt(A-E,z)),k=E+z,C=P):w>0&&(z=zt(N-P,qt(A-P,z)),k=E,C=P+z),S<0?(W=zt(U-R,qt(Y-R,W)),B=R+W,L=X):S>0&&(W=zt(U-X,qt(Y-X,W)),B=R,L=X+W));break}case nr:{w&&(k=zt(N,qt(A,E-z*w)),C=zt(N,qt(A,P+z*w))),S&&(B=zt(U,qt(Y,R-W*S)),L=zt(U,qt(Y,X+W*S)));break}}C<k&&(w*=-1,Le=E,E=P,P=Le,Le=k,k=C,C=Le,_ in Lu&&G.attr("cursor",Ge[_=Lu[_]])),L<B&&(S*=-1,Le=R,R=X,X=Le,Le=B,B=L,L=Le,_ in Fu&&G.attr("cursor",Ge[_=Fu[_]])),v.selection&&(x=v.selection),tt&&(k=x[0][0],C=x[1][0]),nt&&(B=x[0][1],L=x[1][1]),(x[0][0]!==k||x[0][1]!==B||x[1][0]!==C||x[1][1]!==L)&&(v.selection=[[k,B],[C,L]],u.call(y),Q.brush(J,M.name))}function rt(J){if(my(J),J.touches){if(J.touches.length)return;f&&clearTimeout(f),f=setTimeout(function(){f=null},500)}else ty(J.view,q),Z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);O.attr("pointer-events","all"),G.attr("cursor",Ge.overlay),v.selection&&(x=v.selection),vy(x)&&(v.selection=null,u.call(y)),Q.end(J,M.name)}function yt(J){switch(J.keyCode){case 16:{I=w&&S;break}case 18:{M===er&&(w&&(P=C-z*w,E=k+z*w),S&&(X=L-W*S,R=B+W*S),M=nr,mt(J));break}case 32:{(M===er||M===nr)&&(w<0?P=C-z:w>0&&(E=k-z),S<0?X=L-W:S>0&&(R=B-W),M=as,G.attr("cursor",Ge.selection),mt(J));break}default:return}is(J)}function St(J){switch(J.keyCode){case 16:{I&&(tt=nt=I=!1,mt(J));break}case 18:{M===nr&&(w<0?P=C:w>0&&(E=k),S<0?X=L:S>0&&(R=B),M=er,mt(J));break}case 32:{M===as&&(J.altKey?(w&&(P=C-z*w,E=k+z*w),S&&(X=L-W*S,R=B+W*S),M=nr):(w<0?P=C:w>0&&(E=k),S<0?X=L:S>0&&(R=B),M=er),G.attr("cursor",Ge[_]),mt(J));break}default:return}is(J)}}function g(b){l(this,arguments).moved(b)}function m(b){l(this,arguments).ended(b)}function p(){var b=this.__brush||{selection:null};return b.extent=Iu(e.apply(this,arguments)),b.dim=t,b}return c.extent=function(b){return arguments.length?(e=typeof b=="function"?b:rs(Iu(b)),c):e},c.filter=function(b){return arguments.length?(n=typeof b=="function"?b:rs(!!b),c):n},c.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:rs(!!b),c):r},c.handleSize=function(b){return arguments.length?(s=+b,c):s},c.keyModifiers=function(b){return arguments.length?(i=!!b,c):i},c.on=function(){var b=a.on.apply(a,arguments);return b===a?c:b},c}const rf=Math.PI,af=2*rf,In=1e-6,xy=af-In;function jd(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ty(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return jd;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class $d{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?jd:Ty(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,f=this._y1,c=r-e,u=i-n,l=s-e,d=f-n,h=l*l+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>In)if(!(Math.abs(d*c-u*l)>In)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,m=i-f,p=c*c+u*u,b=g*g+m*m,y=Math.sqrt(p),_=Math.sqrt(h),M=a*Math.tan((rf-Math.acos((p+h-b)/(2*y*_)))/2),w=M/_,S=M/y;Math.abs(w-1)>In&&this._append`L${e+w*l},${n+w*d}`,this._append`A${a},${a},0,0,${+(d*g>l*m)},${this._x1=e+S*c},${this._y1=n+S*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),c=r*Math.sin(i),u=e+f,l=n+c,d=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${l}`:(Math.abs(this._x1-u)>In||Math.abs(this._y1-l)>In)&&this._append`L${u},${l}`,r&&(h<0&&(h=h%af+af),h>xy?this._append`A${r},${r},0,1,${d},${e-f},${n-c}A${r},${r},0,1,${d},${this._x1=u},${this._y1=l}`:h>In&&this._append`A${r},${r},0,${+(h>=rf)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function mn(t=3){return new $d(+t)}function Ay(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ea(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function pr(t){return t=Ea(Math.abs(t)),t?t[1]:NaN}function ky(t,e){return function(n,r){for(var i=n.length,a=[],s=0,f=t[0],c=0;i>0&&f>0&&(c+f+1>r&&(f=Math.max(1,r-c)),a.push(n.substring(i-=f,i+f)),!((c+=f+1)>r));)f=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Ey(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Cy=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oi(t){if(!(e=Cy.exec(t)))throw new Error("invalid format: "+t);var e;return new ic({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}oi.prototype=ic.prototype;function ic(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ic.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ny(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Wd;function Dy(t,e){var n=Ea(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Wd=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ea(t,Math.max(0,e+a-1))[0]}function Ou(t,e){var n=Ea(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Pu={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ay,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ou(t*100,e),r:Ou,s:Dy,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ru(t){return t}var Bu=Array.prototype.map,Uu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Iy(t){var e=t.grouping===void 0||t.thousands===void 0?Ru:ky(Bu.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Ru:Ey(Bu.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(d){d=oi(d);var h=d.fill,g=d.align,m=d.sign,p=d.symbol,b=d.zero,y=d.width,_=d.comma,M=d.precision,w=d.trim,S=d.type;S==="n"?(_=!0,S="g"):Pu[S]||(M===void 0&&(M=12),w=!0,S="g"),(b||h==="0"&&g==="=")&&(b=!0,h="0",g="=");var v=p==="$"?n:p==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",T=p==="$"?r:/[%p]/.test(S)?s:"",x=Pu[S],N=/[defgprs%]/.test(S);M=M===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function E(k){var U=v,R=T,B,A,P;if(S==="c")R=x(k)+R,k="";else{k=+k;var C=k<0||1/k<0;if(k=isNaN(k)?c:x(Math.abs(k),M),w&&(k=Ny(k)),C&&+k==0&&m!=="+"&&(C=!1),U=(C?m==="("?m:f:m==="-"||m==="("?"":m)+U,R=(S==="s"?Uu[8+Wd/3]:"")+R+(C&&m==="("?")":""),N){for(B=-1,A=k.length;++B<A;)if(P=k.charCodeAt(B),48>P||P>57){R=(P===46?i+k.slice(B+1):k.slice(B))+R,k=k.slice(0,B);break}}}_&&!b&&(k=e(k,1/0));var Y=U.length+k.length+R.length,X=Y<y?new Array(y-Y+1).join(h):"";switch(_&&b&&(k=e(X+k,X.length?y-R.length:1/0),X=""),g){case"<":k=U+k+R+X;break;case"=":k=U+X+k+R;break;case"^":k=X.slice(0,Y=X.length>>1)+U+k+R+X.slice(Y);break;default:k=X+U+k+R;break}return a(k)}return E.toString=function(){return d+""},E}function l(d,h){var g=u((d=oi(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(pr(h)/3)))*3,p=Math.pow(10,-m),b=Uu[8+m/3];return function(y){return g(p*y)+b}}return{format:u,formatPrefix:l}}var zi,Ir,Vd;Ly({thousands:",",grouping:[3],currency:["$",""]});function Ly(t){return zi=Iy(t),Ir=zi.format,Vd=zi.formatPrefix,zi}function Fy(t){return Math.max(0,-pr(Math.abs(t)))}function Oy(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pr(e)/3)))*3-pr(Math.abs(t)))}function Py(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pr(e)-pr(t))+1}var ht=1e-6,Hd=1e-12,gt=Math.PI,Ct=gt/2,zu=gt/4,fe=gt*2,Yt=180/gt,Et=gt/180,_t=Math.abs,Lr=Math.atan,fn=Math.atan2,dt=Math.cos,Yd=Math.exp,Ca=Math.log,fs=Math.pow,ut=Math.sin,me=Math.sign||function(t){return t>0?1:t<0?-1:0},re=Math.sqrt,ac=Math.tan;function Xd(t){return t>1?0:t<-1?gt:Math.acos(t)}function we(t){return t>1?Ct:t<-1?-Ct:Math.asin(t)}function pe(){}function Na(t,e){t&&ju.hasOwnProperty(t.type)&&ju[t.type](t,e)}var qu={Feature:function(t,e){Na(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Na(n[r].geometry,e)}},ju={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){of(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)of(n[r],e,0)},Polygon:function(t,e){$u(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)$u(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Na(n[r],e)}};function of(t,e,n){var r=-1,i=t.length-n,a;for(e.lineStart();++r<i;)a=t[r],e.point(a[0],a[1],a[2]);e.lineEnd()}function $u(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)of(t[n],e,1);e.polygonEnd()}function Fn(t,e){t&&qu.hasOwnProperty(t.type)?qu[t.type](t,e):Na(t,e)}function sf(t){return[fn(t[1],t[0]),we(t[2])]}function br(t){var e=t[0],n=t[1],r=dt(n);return[r*dt(e),r*ut(e),ut(n)]}function qi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Da(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function cs(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ji(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ff(t){var e=re(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function cf(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function uf(t,e){return _t(t)>gt&&(t-=Math.round(t/fe)*fe),[t,e]}uf.invert=uf;function Gd(t,e,n){return(t%=fe)?e||n?cf(Vu(t),Hu(e,n)):Vu(t):e||n?Hu(e,n):uf}function Wu(t){return function(e,n){return e+=t,_t(e)>gt&&(e-=Math.round(e/fe)*fe),[e,n]}}function Vu(t){var e=Wu(t);return e.invert=Wu(-t),e}function Hu(t,e){var n=dt(t),r=ut(t),i=dt(e),a=ut(e);function s(f,c){var u=dt(c),l=dt(f)*u,d=ut(f)*u,h=ut(c),g=h*n+l*r;return[fn(d*i-g*a,l*n-h*r),we(g*i+d*a)]}return s.invert=function(f,c){var u=dt(c),l=dt(f)*u,d=ut(f)*u,h=ut(c),g=h*i-d*a;return[fn(d*i+h*a,l*n+g*r),we(g*n-l*r)]},s}function Ry(t){t=Gd(t[0]*Et,t[1]*Et,t.length>2?t[2]*Et:0);function e(n){return n=t(n[0]*Et,n[1]*Et),n[0]*=Yt,n[1]*=Yt,n}return e.invert=function(n){return n=t.invert(n[0]*Et,n[1]*Et),n[0]*=Yt,n[1]*=Yt,n},e}function By(t,e,n,r,i,a){if(n){var s=dt(e),f=ut(e),c=r*n;i==null?(i=e+r*fe,a=e-c/2):(i=Yu(s,i),a=Yu(s,a),(r>0?i<a:i>a)&&(i+=r*fe));for(var u,l=i;r>0?l>a:l<a;l-=c)u=sf([s,-f*dt(l),-f*ut(l)]),t.point(u[0],u[1])}}function Yu(t,e){e=br(e),e[0]-=t,ff(e);var n=Xd(-e[1]);return((-e[2]<0?-n:n)+fe-ht)%fe}function Zd(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:pe,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ua(t,e){return _t(t[0]-e[0])<ht&&_t(t[1]-e[1])<ht}function $i(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Jd(t,e,n,r,i){var a=[],s=[],f,c;if(t.forEach(function(m){if(!((p=m.length-1)<=0)){var p,b=m[0],y=m[p],_;if(ua(b,y)){if(!b[2]&&!y[2]){for(i.lineStart(),f=0;f<p;++f)i.point((b=m[f])[0],b[1]);i.lineEnd();return}y[0]+=2*ht}a.push(_=new $i(b,m,null,!0)),s.push(_.o=new $i(b,null,_,!1)),a.push(_=new $i(y,m,null,!1)),s.push(_.o=new $i(y,null,_,!0))}}),!!a.length){for(s.sort(e),Xu(a),Xu(s),f=0,c=s.length;f<c;++f)s[f].e=n=!n;for(var u=a[0],l,d;;){for(var h=u,g=!0;h.v;)if((h=h.n)===u)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(g)for(f=0,c=l.length;f<c;++f)i.point((d=l[f])[0],d[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(g)for(l=h.p.z,f=l.length-1;f>=0;--f)i.point((d=l[f])[0],d[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,g=!g}while(!h.v);i.lineEnd()}}}function Xu(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function us(t){return _t(t[0])<=gt?t[0]:me(t[0])*((_t(t[0])+gt)%fe-gt)}function Uy(t,e){var n=us(e),r=e[1],i=ut(r),a=[ut(n),-dt(n),0],s=0,f=0,c=new zn;i===1?r=Ct+ht:i===-1&&(r=-Ct-ht);for(var u=0,l=t.length;u<l;++u)if(h=(d=t[u]).length)for(var d,h,g=d[h-1],m=us(g),p=g[1]/2+zu,b=ut(p),y=dt(p),_=0;_<h;++_,m=w,b=v,y=T,g=M){var M=d[_],w=us(M),S=M[1]/2+zu,v=ut(S),T=dt(S),x=w-m,N=x>=0?1:-1,E=N*x,k=E>gt,U=b*v;if(c.add(fn(U*N*ut(E),y*T+U*dt(E))),s+=k?x+N*fe:x,k^m>=n^w>=n){var R=Da(br(g),br(M));ff(R);var B=Da(a,R);ff(B);var A=(k^x>=0?-1:1)*we(B[2]);(r>A||r===A&&(R[0]||R[1]))&&(f+=k^x>=0?1:-1)}}return(s<-ht||s<ht&&c<-Hd)^f&1}function Kd(t,e,n,r){return function(i){var a=e(i),s=Zd(),f=e(s),c=!1,u,l,d,h={point:g,lineStart:p,lineEnd:b,polygonStart:function(){h.point=y,h.lineStart=_,h.lineEnd=M,l=[],u=[]},polygonEnd:function(){h.point=g,h.lineStart=p,h.lineEnd=b,l=Nd(l);var w=Uy(u,r);l.length?(c||(i.polygonStart(),c=!0),Jd(l,qy,w,n,i)):w&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),l=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(w,S){t(w,S)&&i.point(w,S)}function m(w,S){a.point(w,S)}function p(){h.point=m,a.lineStart()}function b(){h.point=g,a.lineEnd()}function y(w,S){d.push([w,S]),f.point(w,S)}function _(){f.lineStart(),d=[]}function M(){y(d[0][0],d[0][1]),f.lineEnd();var w=f.clean(),S=s.result(),v,T=S.length,x,N,E;if(d.pop(),u.push(d),d=null,!!T){if(w&1){if(N=S[0],(x=N.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),v=0;v<x;++v)i.point((E=N[v])[0],E[1]);i.lineEnd()}return}T>1&&w&2&&S.push(S.pop().concat(S.shift())),l.push(S.filter(zy))}}return h}}function zy(t){return t.length>1}function qy(t,e){return((t=t.x)[0]<0?t[1]-Ct-ht:Ct-t[1])-((e=e.x)[0]<0?e[1]-Ct-ht:Ct-e[1])}const Gu=Kd(function(){return!0},jy,Wy,[-gt,-Ct]);function jy(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(a,s){var f=a>0?gt:-gt,c=_t(a-e);_t(c-gt)<ht?(t.point(e,n=(n+s)/2>0?Ct:-Ct),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),t.point(a,n),i=0):r!==f&&c>=gt&&(_t(e-r)<ht&&(e-=r*ht),_t(a-f)<ht&&(a-=f*ht),n=$y(e,n,a,s),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),i=0),t.point(e=a,n=s),r=f},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function $y(t,e,n,r){var i,a,s=ut(t-n);return _t(s)>ht?Lr((ut(e)*(a=dt(r))*ut(n)-ut(r)*(i=dt(e))*ut(t))/(i*a*s)):(e+r)/2}function Wy(t,e,n,r){var i;if(t==null)i=n*Ct,r.point(-gt,i),r.point(0,i),r.point(gt,i),r.point(gt,0),r.point(gt,-i),r.point(0,-i),r.point(-gt,-i),r.point(-gt,0),r.point(-gt,i);else if(_t(t[0]-e[0])>ht){var a=t[0]<e[0]?gt:-gt;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function Vy(t){var e=dt(t),n=2*Et,r=e>0,i=_t(e)>ht;function a(l,d,h,g){By(g,t,n,h,l,d)}function s(l,d){return dt(l)*dt(d)>e}function f(l){var d,h,g,m,p;return{lineStart:function(){m=g=!1,p=1},point:function(b,y){var _=[b,y],M,w=s(b,y),S=r?w?0:u(b,y):w?u(b+(b<0?gt:-gt),y):0;if(!d&&(m=g=w)&&l.lineStart(),w!==g&&(M=c(d,_),(!M||ua(d,M)||ua(_,M))&&(_[2]=1)),w!==g)p=0,w?(l.lineStart(),M=c(_,d),l.point(M[0],M[1])):(M=c(d,_),l.point(M[0],M[1],2),l.lineEnd()),d=M;else if(i&&d&&r^w){var v;!(S&h)&&(v=c(_,d,!0))&&(p=0,r?(l.lineStart(),l.point(v[0][0],v[0][1]),l.point(v[1][0],v[1][1]),l.lineEnd()):(l.point(v[1][0],v[1][1]),l.lineEnd(),l.lineStart(),l.point(v[0][0],v[0][1],3)))}w&&(!d||!ua(d,_))&&l.point(_[0],_[1]),d=_,g=w,h=S},lineEnd:function(){g&&l.lineEnd(),d=null},clean:function(){return p|(m&&g)<<1}}}function c(l,d,h){var g=br(l),m=br(d),p=[1,0,0],b=Da(g,m),y=qi(b,b),_=b[0],M=y-_*_;if(!M)return!h&&l;var w=e*y/M,S=-e*_/M,v=Da(p,b),T=ji(p,w),x=ji(b,S);cs(T,x);var N=v,E=qi(T,N),k=qi(N,N),U=E*E-k*(qi(T,T)-1);if(!(U<0)){var R=re(U),B=ji(N,(-E-R)/k);if(cs(B,T),B=sf(B),!h)return B;var A=l[0],P=d[0],C=l[1],Y=d[1],X;P<A&&(X=A,A=P,P=X);var L=P-A,z=_t(L-gt)<ht,W=z||L<ht;if(!z&&Y<C&&(X=C,C=Y,Y=X),W?z?C+Y>0^B[1]<(_t(B[0]-A)<ht?C:Y):C<=B[1]&&B[1]<=Y:L>gt^(A<=B[0]&&B[0]<=P)){var q=ji(N,(-E+R)/k);return cs(q,T),[B,sf(q)]}}}function u(l,d){var h=r?t:gt-t,g=0;return l<-h?g|=1:l>h&&(g|=2),d<-h?g|=4:d>h&&(g|=8),g}return Kd(s,f,a,r?[0,-t]:[-gt,t-gt])}function Hy(t,e,n,r,i,a){var s=t[0],f=t[1],c=e[0],u=e[1],l=0,d=1,h=c-s,g=u-f,m;if(m=n-s,!(!h&&m>0)){if(m/=h,h<0){if(m<l)return;m<d&&(d=m)}else if(h>0){if(m>d)return;m>l&&(l=m)}if(m=i-s,!(!h&&m<0)){if(m/=h,h<0){if(m>d)return;m>l&&(l=m)}else if(h>0){if(m<l)return;m<d&&(d=m)}if(m=r-f,!(!g&&m>0)){if(m/=g,g<0){if(m<l)return;m<d&&(d=m)}else if(g>0){if(m>d)return;m>l&&(l=m)}if(m=a-f,!(!g&&m<0)){if(m/=g,g<0){if(m>d)return;m>l&&(l=m)}else if(g>0){if(m<l)return;m<d&&(d=m)}return l>0&&(t[0]=s+l*h,t[1]=f+l*g),d<1&&(e[0]=s+d*h,e[1]=f+d*g),!0}}}}}var Hr=1e9,Wi=-Hr;function Qd(t,e,n,r){function i(u,l){return t<=u&&u<=n&&e<=l&&l<=r}function a(u,l,d,h){var g=0,m=0;if(u==null||(g=s(u,d))!==(m=s(l,d))||c(u,l)<0^d>0)do h.point(g===0||g===3?t:n,g>1?r:e);while((g=(g+d+4)%4)!==m);else h.point(l[0],l[1])}function s(u,l){return _t(u[0]-t)<ht?l>0?0:3:_t(u[0]-n)<ht?l>0?2:1:_t(u[1]-e)<ht?l>0?1:0:l>0?3:2}function f(u,l){return c(u.x,l.x)}function c(u,l){var d=s(u,1),h=s(l,1);return d!==h?d-h:d===0?l[1]-u[1]:d===1?u[0]-l[0]:d===2?u[1]-l[1]:l[0]-u[0]}return function(u){var l=u,d=Zd(),h,g,m,p,b,y,_,M,w,S,v,T={point:x,lineStart:U,lineEnd:R,polygonStart:E,polygonEnd:k};function x(A,P){i(A,P)&&l.point(A,P)}function N(){for(var A=0,P=0,C=g.length;P<C;++P)for(var Y=g[P],X=1,L=Y.length,z=Y[0],W,q,I=z[0],tt=z[1];X<L;++X)W=I,q=tt,z=Y[X],I=z[0],tt=z[1],q<=r?tt>r&&(I-W)*(r-q)>(tt-q)*(t-W)&&++A:tt<=r&&(I-W)*(r-q)<(tt-q)*(t-W)&&--A;return A}function E(){l=d,h=[],g=[],v=!0}function k(){var A=N(),P=v&&A,C=(h=Nd(h)).length;(P||C)&&(u.polygonStart(),P&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),C&&Jd(h,f,A,a,u),u.polygonEnd()),l=u,h=g=m=null}function U(){T.point=B,g&&g.push(m=[]),S=!0,w=!1,_=M=NaN}function R(){h&&(B(p,b),y&&w&&d.rejoin(),h.push(d.result())),T.point=x,w&&l.lineEnd()}function B(A,P){var C=i(A,P);if(g&&m.push([A,P]),S)p=A,b=P,y=C,S=!1,C&&(l.lineStart(),l.point(A,P));else if(C&&w)l.point(A,P);else{var Y=[_=Math.max(Wi,Math.min(Hr,_)),M=Math.max(Wi,Math.min(Hr,M))],X=[A=Math.max(Wi,Math.min(Hr,A)),P=Math.max(Wi,Math.min(Hr,P))];Hy(Y,X,t,e,n,r)?(w||(l.lineStart(),l.point(Y[0],Y[1])),l.point(X[0],X[1]),C||l.lineEnd(),v=!1):C&&(l.lineStart(),l.point(A,P),v=!1)}_=A,M=P,w=C}return T}}const lf=t=>t;var ls=new zn,hf=new zn,t0,e0,df,gf,dn={point:pe,lineStart:pe,lineEnd:pe,polygonStart:function(){dn.lineStart=Yy,dn.lineEnd=Gy},polygonEnd:function(){dn.lineStart=dn.lineEnd=dn.point=pe,ls.add(_t(hf)),hf=new zn},result:function(){var t=ls/2;return ls=new zn,t}};function Yy(){dn.point=Xy}function Xy(t,e){dn.point=n0,t0=df=t,e0=gf=e}function n0(t,e){hf.add(gf*t-df*e),df=t,gf=e}function Gy(){n0(t0,e0)}const Zu=dn;var yr=1/0,Ia=yr,si=-yr,La=si,Zy={point:Jy,lineStart:pe,lineEnd:pe,polygonStart:pe,polygonEnd:pe,result:function(){var t=[[yr,Ia],[si,La]];return si=La=-(Ia=yr=1/0),t}};function Jy(t,e){t<yr&&(yr=t),t>si&&(si=t),e<Ia&&(Ia=e),e>La&&(La=e)}const Fa=Zy;var mf=0,pf=0,Yr=0,Oa=0,Pa=0,fr=0,bf=0,yf=0,Xr=0,r0,i0,Oe,Pe,xe={point:$n,lineStart:Ju,lineEnd:Ku,polygonStart:function(){xe.lineStart=t_,xe.lineEnd=e_},polygonEnd:function(){xe.point=$n,xe.lineStart=Ju,xe.lineEnd=Ku},result:function(){var t=Xr?[bf/Xr,yf/Xr]:fr?[Oa/fr,Pa/fr]:Yr?[mf/Yr,pf/Yr]:[NaN,NaN];return mf=pf=Yr=Oa=Pa=fr=bf=yf=Xr=0,t}};function $n(t,e){mf+=t,pf+=e,++Yr}function Ju(){xe.point=Ky}function Ky(t,e){xe.point=Qy,$n(Oe=t,Pe=e)}function Qy(t,e){var n=t-Oe,r=e-Pe,i=re(n*n+r*r);Oa+=i*(Oe+t)/2,Pa+=i*(Pe+e)/2,fr+=i,$n(Oe=t,Pe=e)}function Ku(){xe.point=$n}function t_(){xe.point=n_}function e_(){a0(r0,i0)}function n_(t,e){xe.point=a0,$n(r0=Oe=t,i0=Pe=e)}function a0(t,e){var n=t-Oe,r=e-Pe,i=re(n*n+r*r);Oa+=i*(Oe+t)/2,Pa+=i*(Pe+e)/2,fr+=i,i=Pe*t-Oe*e,bf+=i*(Oe+t),yf+=i*(Pe+e),Xr+=i*3,$n(Oe=t,Pe=e)}const Qu=xe;function o0(t){this._context=t}o0.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,fe);break}}},result:pe};var _f=new zn,hs,s0,f0,Gr,Zr,Ra={point:pe,lineStart:function(){Ra.point=r_},lineEnd:function(){hs&&c0(s0,f0),Ra.point=pe},polygonStart:function(){hs=!0},polygonEnd:function(){hs=null},result:function(){var t=+_f;return _f=new zn,t}};function r_(t,e){Ra.point=c0,s0=Gr=t,f0=Zr=e}function c0(t,e){Gr-=t,Zr-=e,_f.add(re(Gr*Gr+Zr*Zr)),Gr=t,Zr=e}const tl=Ra;let el,Ba,nl,rl;class il{constructor(e){this._append=e==null?u0:i_(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==nl||this._append!==Ba){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,nl=r,Ba=this._append,rl=this._,this._=i}this._+=rl;break}}}result(){const e=this._;return this._="",e.length?e:null}}function u0(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function i_(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return u0;if(e!==el){const n=10**e;el=e,Ba=function(i){let a=1;this._+=i[0];for(const s=i.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return Ba}function oc(t,e){let n=3,r=4.5,i,a;function s(f){return f&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),Fn(f,i(a))),a.result()}return s.area=function(f){return Fn(f,i(Zu)),Zu.result()},s.measure=function(f){return Fn(f,i(tl)),tl.result()},s.bounds=function(f){return Fn(f,i(Fa)),Fa.result()},s.centroid=function(f){return Fn(f,i(Qu)),Qu.result()},s.projection=function(f){return arguments.length?(i=f==null?(t=null,lf):(t=f).stream,s):t},s.context=function(f){return arguments.length?(a=f==null?(e=null,new il(n)):new o0(e=f),typeof r!="function"&&a.pointRadius(r),s):e},s.pointRadius=function(f){return arguments.length?(r=typeof f=="function"?f:(a.pointRadius(+f),+f),s):r},s.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const c=Math.floor(f);if(!(c>=0))throw new RangeError(`invalid digits: ${f}`);n=c}return e===null&&(a=new il(n)),s},s.projection(t).digits(n).context(e)}function Ua(t){return{stream:bo(t)}}function bo(t){return function(e){var n=new wf;for(var r in t)n[r]=t[r];return n.stream=e,n}}function wf(){}wf.prototype={constructor:wf,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function sc(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Fn(n,t.stream(Fa)),e(Fa.result()),r!=null&&t.clipExtent(r),t}function fc(t,e,n){return sc(t,function(r){var i=e[1][0]-e[0][0],a=e[1][1]-e[0][1],s=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),f=+e[0][0]+(i-s*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(a-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([f,c])},n)}function l0(t,e,n){return fc(t,[[0,0],e],n)}function h0(t,e,n){return sc(t,function(r){var i=+e,a=i/(r[1][0]-r[0][0]),s=(i-a*(r[1][0]+r[0][0]))/2,f=-a*r[0][1];t.scale(150*a).translate([s,f])},n)}function d0(t,e,n){return sc(t,function(r){var i=+e,a=i/(r[1][1]-r[0][1]),s=-a*r[0][0],f=(i-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([s,f])},n)}var al=16,a_=dt(30*Et);function ol(t,e){return+e?s_(t,e):o_(t)}function o_(t){return bo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function s_(t,e){function n(r,i,a,s,f,c,u,l,d,h,g,m,p,b){var y=u-r,_=l-i,M=y*y+_*_;if(M>4*e&&p--){var w=s+h,S=f+g,v=c+m,T=re(w*w+S*S+v*v),x=we(v/=T),N=_t(_t(v)-1)<ht||_t(a-d)<ht?(a+d)/2:fn(S,w),E=t(N,x),k=E[0],U=E[1],R=k-r,B=U-i,A=_*R-y*B;(A*A/M>e||_t((y*R+_*B)/M-.5)>.3||s*h+f*g+c*m<a_)&&(n(r,i,a,s,f,c,k,U,N,w/=T,S/=T,v,p,b),b.point(k,U),n(k,U,N,w,S,v,u,l,d,h,g,m,p,b))}}return function(r){var i,a,s,f,c,u,l,d,h,g,m,p,b={point:y,lineStart:_,lineEnd:w,polygonStart:function(){r.polygonStart(),b.lineStart=S},polygonEnd:function(){r.polygonEnd(),b.lineStart=_}};function y(x,N){x=t(x,N),r.point(x[0],x[1])}function _(){d=NaN,b.point=M,r.lineStart()}function M(x,N){var E=br([x,N]),k=t(x,N);n(d,h,l,g,m,p,d=k[0],h=k[1],l=x,g=E[0],m=E[1],p=E[2],al,r),r.point(d,h)}function w(){b.point=y,r.lineEnd()}function S(){_(),b.point=v,b.lineEnd=T}function v(x,N){M(i=x,N),a=d,s=h,f=g,c=m,u=p,b.point=M}function T(){n(d,h,l,g,m,p,a,s,i,f,c,u,al,r),b.lineEnd=w,w()}return b}}var f_=bo({point:function(t,e){this.stream.point(t*Et,e*Et)}});function c_(t){return bo({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function u_(t,e,n,r,i){function a(s,f){return s*=r,f*=i,[e+t*s,n-t*f]}return a.invert=function(s,f){return[(s-e)/t*r,(n-f)/t*i]},a}function sl(t,e,n,r,i,a){if(!a)return u_(t,e,n,r,i);var s=dt(a),f=ut(a),c=s*t,u=f*t,l=s/t,d=f/t,h=(f*n-s*e)/t,g=(f*e+s*n)/t;function m(p,b){return p*=r,b*=i,[c*p-u*b+e,n-u*p-c*b]}return m.invert=function(p,b){return[r*(l*p-d*b+h),i*(g-d*p-l*b)]},m}function kn(t){return g0(function(){return t})()}function g0(t){var e,n=150,r=480,i=250,a=0,s=0,f=0,c=0,u=0,l,d=0,h=1,g=1,m=null,p=Gu,b=null,y,_,M,w=lf,S=.5,v,T,x,N,E;function k(A){return x(A[0]*Et,A[1]*Et)}function U(A){return A=x.invert(A[0],A[1]),A&&[A[0]*Yt,A[1]*Yt]}k.stream=function(A){return N&&E===A?N:N=f_(c_(l)(p(v(w(E=A)))))},k.preclip=function(A){return arguments.length?(p=A,m=void 0,B()):p},k.postclip=function(A){return arguments.length?(w=A,b=y=_=M=null,B()):w},k.clipAngle=function(A){return arguments.length?(p=+A?Vy(m=A*Et):(m=null,Gu),B()):m*Yt},k.clipExtent=function(A){return arguments.length?(w=A==null?(b=y=_=M=null,lf):Qd(b=+A[0][0],y=+A[0][1],_=+A[1][0],M=+A[1][1]),B()):b==null?null:[[b,y],[_,M]]},k.scale=function(A){return arguments.length?(n=+A,R()):n},k.translate=function(A){return arguments.length?(r=+A[0],i=+A[1],R()):[r,i]},k.center=function(A){return arguments.length?(a=A[0]%360*Et,s=A[1]%360*Et,R()):[a*Yt,s*Yt]},k.rotate=function(A){return arguments.length?(f=A[0]%360*Et,c=A[1]%360*Et,u=A.length>2?A[2]%360*Et:0,R()):[f*Yt,c*Yt,u*Yt]},k.angle=function(A){return arguments.length?(d=A%360*Et,R()):d*Yt},k.reflectX=function(A){return arguments.length?(h=A?-1:1,R()):h<0},k.reflectY=function(A){return arguments.length?(g=A?-1:1,R()):g<0},k.precision=function(A){return arguments.length?(v=ol(T,S=A*A),B()):re(S)},k.fitExtent=function(A,P){return fc(k,A,P)},k.fitSize=function(A,P){return l0(k,A,P)},k.fitWidth=function(A,P){return h0(k,A,P)},k.fitHeight=function(A,P){return d0(k,A,P)};function R(){var A=sl(n,0,0,h,g,d).apply(null,e(a,s)),P=sl(n,r-A[0],i-A[1],h,g,d);return l=Gd(f,c,u),T=cf(e,P),x=cf(l,T),v=ol(T,S),B()}function B(){return N=E=null,k}return function(){return e=t.apply(this,arguments),k.invert=e.invert&&U,R()}}function cc(t){var e=0,n=gt/3,r=g0(t),i=r(e,n);return i.parallels=function(a){return arguments.length?r(e=a[0]*Et,n=a[1]*Et):[e*Yt,n*Yt]},i}function l_(t){var e=dt(t);function n(r,i){return[r*e,ut(i)/e]}return n.invert=function(r,i){return[r/e,we(i*e)]},n}function h_(t,e){var n=ut(t),r=(n+ut(e))/2;if(_t(r)<ht)return l_(t);var i=1+n*(2*r-n),a=re(i)/r;function s(f,c){var u=re(i-2*r*ut(c))/r;return[u*ut(f*=r),a-u*dt(f)]}return s.invert=function(f,c){var u=a-c,l=fn(f,_t(u))*me(u);return u*r<0&&(l-=gt*me(f)*me(u)),[l/r,we((i-(f*f+u*u)*r*r)/(2*r))]},s}function za(){return cc(h_).scale(155.424).center([0,33.6442])}function m0(){return za().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function d_(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function g_(){var t,e,n=m0(),r,i=za().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=za().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,c,u={point:function(h,g){c=[h,g]}};function l(h){var g=h[0],m=h[1];return c=null,r.point(g,m),c||(a.point(g,m),c)||(f.point(g,m),c)}l.invert=function(h){var g=n.scale(),m=n.translate(),p=(h[0]-m[0])/g,b=(h[1]-m[1])/g;return(b>=.12&&b<.234&&p>=-.425&&p<-.214?i:b>=.166&&b<.234&&p>=-.214&&p<-.115?s:n).invert(h)},l.stream=function(h){return t&&e===h?t:t=d_([n.stream(e=h),i.stream(h),s.stream(h)])},l.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),s.precision(h),d()):n.precision()},l.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),s.scale(h),l.translate(n.translate())):n.scale()},l.translate=function(h){if(!arguments.length)return n.translate();var g=n.scale(),m=+h[0],p=+h[1];return r=n.translate(h).clipExtent([[m-.455*g,p-.238*g],[m+.455*g,p+.238*g]]).stream(u),a=i.translate([m-.307*g,p+.201*g]).clipExtent([[m-.425*g+ht,p+.12*g+ht],[m-.214*g-ht,p+.234*g-ht]]).stream(u),f=s.translate([m-.205*g,p+.212*g]).clipExtent([[m-.214*g+ht,p+.166*g+ht],[m-.115*g-ht,p+.234*g-ht]]).stream(u),d()},l.fitExtent=function(h,g){return fc(l,h,g)},l.fitSize=function(h,g){return l0(l,h,g)},l.fitWidth=function(h,g){return h0(l,h,g)},l.fitHeight=function(h,g){return d0(l,h,g)};function d(){return t=e=null,l}return l.scale(1070)}function p0(t){return function(e,n){var r=dt(e),i=dt(n),a=t(r*i);return a===1/0?[2,0]:[a*i*ut(e),a*ut(n)]}}function yi(t){return function(e,n){var r=re(e*e+n*n),i=t(r),a=ut(i),s=dt(i);return[fn(e*a,r*s),we(r&&n*a/r)]}}var b0=p0(function(t){return re(2/(1+t))});b0.invert=yi(function(t){return 2*we(t/2)});function m_(){return kn(b0).scale(124.75).clipAngle(180-.001)}var y0=p0(function(t){return(t=Xd(t))&&t/ut(t)});y0.invert=yi(function(t){return t});function p_(){return kn(y0).scale(79.4188).clipAngle(180-.001)}function yo(t,e){return[t,Ca(ac((Ct+e)/2))]}yo.invert=function(t,e){return[t,2*Lr(Yd(e))-Ct]};function b_(){return _0(yo).scale(961/fe)}function _0(t){var e=kn(t),n=e.center,r=e.scale,i=e.translate,a=e.clipExtent,s=null,f,c,u;e.scale=function(d){return arguments.length?(r(d),l()):r()},e.translate=function(d){return arguments.length?(i(d),l()):i()},e.center=function(d){return arguments.length?(n(d),l()):n()},e.clipExtent=function(d){return arguments.length?(d==null?s=f=c=u=null:(s=+d[0][0],f=+d[0][1],c=+d[1][0],u=+d[1][1]),l()):s==null?null:[[s,f],[c,u]]};function l(){var d=gt*r(),h=e(Ry(e.rotate()).invert([0,0]));return a(s==null?[[h[0]-d,h[1]-d],[h[0]+d,h[1]+d]]:t===yo?[[Math.max(h[0]-d,s),f],[Math.min(h[0]+d,c),u]]:[[s,Math.max(h[1]-d,f)],[c,Math.min(h[1]+d,u)]])}return l()}function Vi(t){return ac((Ct+t)/2)}function y_(t,e){var n=dt(t),r=t===e?ut(t):Ca(n/dt(e))/Ca(Vi(e)/Vi(t)),i=n*fs(Vi(t),r)/r;if(!r)return yo;function a(s,f){i>0?f<-Ct+ht&&(f=-Ct+ht):f>Ct-ht&&(f=Ct-ht);var c=i/fs(Vi(f),r);return[c*ut(r*s),i-c*dt(r*s)]}return a.invert=function(s,f){var c=i-f,u=me(r)*re(s*s+c*c),l=fn(s,_t(c))*me(c);return c*r<0&&(l-=gt*me(s)*me(c)),[l/r,2*Lr(fs(i/u,1/r))-Ct]},a}function __(){return cc(y_).scale(109.5).parallels([30,30])}function qa(t,e){return[t,e]}qa.invert=qa;function w_(){return kn(qa).scale(152.63)}function v_(t,e){var n=dt(t),r=t===e?ut(t):(n-dt(e))/(e-t),i=n/r+t;if(_t(r)<ht)return qa;function a(s,f){var c=i-f,u=r*s;return[c*ut(u),i-c*dt(u)]}return a.invert=function(s,f){var c=i-f,u=fn(s,_t(c))*me(c);return c*r<0&&(u-=gt*me(s)*me(c)),[u/r,i-me(r)*re(s*s+c*c)]},a}function M_(){return cc(v_).scale(131.154).center([0,13.9389])}var ti=1.340264,ei=-.081106,ni=893e-6,ri=.003796,ja=re(3)/2,S_=12;function w0(t,e){var n=we(ja*ut(e)),r=n*n,i=r*r*r;return[t*dt(n)/(ja*(ti+3*ei*r+i*(7*ni+9*ri*r))),n*(ti+ei*r+i*(ni+ri*r))]}w0.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,a=0,s,f,c;a<S_&&(f=n*(ti+ei*r+i*(ni+ri*r))-e,c=ti+3*ei*r+i*(7*ni+9*ri*r),n-=s=f/c,r=n*n,i=r*r*r,!(_t(s)<Hd));++a);return[ja*t*(ti+3*ei*r+i*(7*ni+9*ri*r))/dt(n),we(ut(n)/ja)]};function x_(){return kn(w0).scale(177.158)}function v0(t,e){var n=dt(e),r=dt(t)*n;return[n*ut(t)/r,ut(e)/r]}v0.invert=yi(Lr);function T_(){return kn(v0).scale(144.049).clipAngle(60)}function M0(t,e){return[dt(e)*ut(t),ut(e)]}M0.invert=yi(we);function A_(){return kn(M0).scale(249.5).clipAngle(90+ht)}function S0(t,e){var n=dt(e),r=1+dt(t)*n;return[n*ut(t)/r,ut(e)/r]}S0.invert=yi(function(t){return 2*Lr(t)});function k_(){return kn(S0).scale(250).clipAngle(142)}function x0(t,e){return[Ca(ac((Ct+e)/2)),-t]}x0.invert=function(t,e){return[-e,2*Lr(Yd(t))-Ct]};function E_(){var t=_0(x0),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ye(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _o(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const vf=Symbol("implicit");function uc(){var t=new qn,e=[],n=[],r=vf;function i(a){let s=t.get(a);if(s===void 0){if(r!==vf)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new qn;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return uc(e,n).unknown(r)},Ye.apply(i,arguments),i}function wo(){var t=uc().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,f=!1,c=0,u=0,l=.5;delete t.unknown;function d(){var h=e().length,g=i<r,m=g?i:r,p=g?r:i;a=(p-m)/Math.max(1,h-c+u*2),f&&(a=Math.floor(a)),m+=(p-m-a*(h-c))*l,s=a*(1-c),f&&(m=Math.round(m),s=Math.round(s));var b=Js(h).map(function(y){return m+a*y});return n(g?b.reverse():b)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,f=!0,d()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(h){return arguments.length?(f=!!h,d()):f},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),d()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),d()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},t.align=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),d()):l},t.copy=function(){return wo(e(),[r,i]).round(f).paddingInner(c).paddingOuter(u).align(l)},Ye.apply(d(),arguments)}function T0(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return T0(e())},t}function C_(){return T0(wo.apply(null,arguments).paddingInner(1))}function N_(t){return function(){return t}}function Mf(t){return+t}var fl=[0,1];function be(t){return t}function Sf(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:N_(isNaN(e)?NaN:.5)}function D_(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function I_(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Sf(i,r),a=n(s,a)):(r=Sf(r,i),a=n(a,s)),function(f){return a(r(f))}}function L_(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Sf(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(f){var c=Zf(t,f,1,r)-1;return a[c](i[c](f))}}function _i(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vo(){var t=fl,e=fl,n=Dr,r,i,a,s=be,f,c,u;function l(){var h=Math.min(t.length,e.length);return s!==be&&(s=D_(t[0],t[h-1])),f=h>2?L_:I_,c=u=null,d}function d(h){return h==null||isNaN(h=+h)?a:(c||(c=f(t.map(r),e,n)))(r(s(h)))}return d.invert=function(h){return s(i((u||(u=f(e,t.map(r),Mn)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,Mf),l()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),l()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=nc,l()},d.clamp=function(h){return arguments.length?(s=h?!0:be,l()):s!==be},d.interpolate=function(h){return arguments.length?(n=h,l()):n},d.unknown=function(h){return arguments.length?(a=h,d):a},function(h,g){return r=h,i=g,l()}}function A0(){return vo()(be,be)}function F_(t,e,n,r){var i=Gs(t,e,n),a;switch(r=oi(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Oy(i,s))&&(r.precision=a),Vd(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Py(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Fy(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ir(r)}function wi(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ma(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return F_(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],f=r[a],c,u,l=10;for(f<s&&(u=s,s=f,f=u,u=i,i=a,a=u);l-- >0;){if(u=Xs(s,f,n),u===c)return r[i]=s,r[a]=f,e(r);if(u>0)s=Math.floor(s/u)*u,f=Math.ceil(f/u)*u;else if(u<0)s=Math.ceil(s*u)/u,f=Math.floor(f*u)/u;else break;c=u}return t},t}function lc(){var t=A0();return t.copy=function(){return _i(t,lc())},Ye.apply(t,arguments),wi(t)}function k0(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Mf),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return k0(t).unknown(e)},t=arguments.length?Array.from(t,Mf):[0,1],wi(n)}function E0(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function cl(t){return Math.log(t)}function ul(t){return Math.exp(t)}function O_(t){return-Math.log(-t)}function P_(t){return-Math.exp(-t)}function R_(t){return isFinite(t)?+("1e"+t):t<0?0:t}function B_(t){return t===10?R_:t===Math.E?Math.exp:e=>Math.pow(t,e)}function U_(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ll(t){return(e,n)=>-t(-e,n)}function C0(t){const e=t(cl,ul),n=e.domain;let r=10,i,a;function s(){return i=U_(r),a=B_(r),n()[0]<0?(i=ll(i),a=ll(a),t(O_,P_)):t(cl,ul),e}return e.base=function(f){return arguments.length?(r=+f,s()):r},e.domain=function(f){return arguments.length?(n(f),s()):n()},e.ticks=f=>{const c=n();let u=c[0],l=c[c.length-1];const d=l<u;d&&([u,l]=[l,u]);let h=i(u),g=i(l),m,p;const b=f==null?10:+f;let y=[];if(!(r%1)&&g-h<b){if(h=Math.floor(h),g=Math.ceil(g),u>0){for(;h<=g;++h)for(m=1;m<r;++m)if(p=h<0?m/a(-h):m*a(h),!(p<u)){if(p>l)break;y.push(p)}}else for(;h<=g;++h)for(m=r-1;m>=1;--m)if(p=h>0?m/a(-h):m*a(h),!(p<u)){if(p>l)break;y.push(p)}y.length*2<b&&(y=Ma(u,l,b))}else y=Ma(h,g,Math.min(g-h,b)).map(a);return d?y.reverse():y},e.tickFormat=(f,c)=>{if(f==null&&(f=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=oi(c)).precision==null&&(c.trim=!0),c=Ir(c)),f===1/0)return c;const u=Math.max(1,r*f/e.ticks().length);return l=>{let d=l/a(Math.round(i(l)));return d*r<r-.5&&(d*=r),d<=u?c(l):""}},e.nice=()=>n(E0(n(),{floor:f=>a(Math.floor(i(f))),ceil:f=>a(Math.ceil(i(f)))})),e}function N0(){const t=C0(vo()).domain([1,10]);return t.copy=()=>_i(t,N0()).base(t.base()),Ye.apply(t,arguments),t}function hl(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function dl(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function D0(t){var e=1,n=t(hl(e),dl(e));return n.constant=function(r){return arguments.length?t(hl(e=+r),dl(e)):e},wi(n)}function I0(){var t=D0(vo());return t.copy=function(){return _i(t,I0()).constant(t.constant())},Ye.apply(t,arguments)}function gl(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function z_(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function q_(t){return t<0?-t*t:t*t}function L0(t){var e=t(be,be),n=1;function r(){return n===1?t(be,be):n===.5?t(z_,q_):t(gl(n),gl(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},wi(e)}function F0(){var t=L0(vo());return t.copy=function(){return _i(t,F0()).exponent(t.exponent())},Ye.apply(t,arguments),t}function O0(){var t=[],e=[],n=[],r;function i(){var s=0,f=Math.max(1,e.length);for(n=new Array(f-1);++s<f;)n[s-1]=B2(t,s/f);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Zf(n,s)]}return a.invertExtent=function(s){var f=e.indexOf(s);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let f of s)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(ne),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return O0().domain(t).range(e).unknown(r)},Ye.apply(a,arguments)}function P0(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Zf(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return P0().domain(t).range(e).unknown(n)},Ye.apply(i,arguments)}const ds=new Date,gs=new Date;function Ft(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),f=i.ceil(a);return a-s<f-a?s:f},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,f)=>{const c=[];if(a=i.ceil(a),f=f==null?1:Math.floor(f),!(a<s)||!(f>0))return c;let u;do c.push(u=new Date(+a)),e(a,f),t(a);while(u<a&&a<s);return c},i.filter=a=>Ft(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,f)=>{if(s>=s)if(f<0)for(;++f<=0;)for(;e(s,-1),!a(s););else for(;--f>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(ds.setTime(+a),gs.setTime(+s),t(ds),t(gs),Math.floor(n(ds,gs))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const $a=Ft(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);$a.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ft(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):$a);$a.range;const rn=1e3,ye=rn*60,an=ye*60,cn=an*24,hc=cn*7,ml=cn*30,ms=cn*365,Te=Ft(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*rn)},(t,e)=>(e-t)/rn,t=>t.getUTCSeconds());Te.range;const vi=Ft(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rn)},(t,e)=>{t.setTime(+t+e*ye)},(t,e)=>(e-t)/ye,t=>t.getMinutes());vi.range;const Mi=Ft(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ye)},(t,e)=>(e-t)/ye,t=>t.getUTCMinutes());Mi.range;const Si=Ft(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rn-t.getMinutes()*ye)},(t,e)=>{t.setTime(+t+e*an)},(t,e)=>(e-t)/an,t=>t.getHours());Si.range;const xi=Ft(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*an)},(t,e)=>(e-t)/an,t=>t.getUTCHours());xi.range;const Yn=Ft(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ye)/cn,t=>t.getDate()-1);Yn.range;const Mo=Ft(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/cn,t=>t.getUTCDate()-1);Mo.range;const So=Ft(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/cn,t=>Math.floor(t/cn));So.range;function Xn(t){return Ft(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ye)/hc)}const _r=Xn(0),fi=Xn(1),R0=Xn(2),B0=Xn(3),Wn=Xn(4),U0=Xn(5),z0=Xn(6);_r.range;fi.range;R0.range;B0.range;Wn.range;U0.range;z0.range;function Gn(t){return Ft(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/hc)}const wr=Gn(0),ci=Gn(1),q0=Gn(2),j0=Gn(3),Vn=Gn(4),$0=Gn(5),W0=Gn(6);wr.range;ci.range;q0.range;j0.range;Vn.range;$0.range;W0.range;const Ti=Ft(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Ti.range;const Ai=Ft(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Ai.range;const ke=Ft(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ke.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ft(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ke.range;const Ee=Ft(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ee.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ft(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ee.range;function V0(t,e,n,r,i,a){const s=[[Te,1,rn],[Te,5,5*rn],[Te,15,15*rn],[Te,30,30*rn],[a,1,ye],[a,5,5*ye],[a,15,15*ye],[a,30,30*ye],[i,1,an],[i,3,3*an],[i,6,6*an],[i,12,12*an],[r,1,cn],[r,2,2*cn],[n,1,hc],[e,1,ml],[e,3,3*ml],[t,1,ms]];function f(u,l,d){const h=l<u;h&&([u,l]=[l,u]);const g=d&&typeof d.range=="function"?d:c(u,l,d),m=g?g.range(u,+l+1):[];return h?m.reverse():m}function c(u,l,d){const h=Math.abs(l-u)/d,g=ho(([,,b])=>b).right(s,h);if(g===s.length)return t.every(Gs(u/ms,l/ms,d));if(g===0)return $a.every(Math.max(Gs(u,l,d),1));const[m,p]=s[h/s[g-1][2]<s[g][2]/h?g-1:g];return m.every(p)}return[f,c]}const[j_,$_]=V0(Ee,Ai,wr,So,xi,Mi),[W_,V_]=V0(ke,Ti,_r,Yn,Si,vi);function ps(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function bs(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ur(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function H_(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,f=t.months,c=t.shortMonths,u=zr(i),l=qr(i),d=zr(a),h=qr(a),g=zr(s),m=qr(s),p=zr(f),b=qr(f),y=zr(c),_=qr(c),M={a:C,A:Y,b:X,B:L,c:null,d:vl,e:vl,f:m6,g:T6,G:k6,H:h6,I:d6,j:g6,L:H0,m:p6,M:b6,p:z,q:W,Q:xl,s:Tl,S:y6,u:_6,U:w6,V:v6,w:M6,W:S6,x:null,X:null,y:x6,Y:A6,Z:E6,"%":Sl},w={a:q,A:I,b:tt,B:nt,c:null,d:Ml,e:Ml,f:I6,g:j6,G:W6,H:C6,I:N6,j:D6,L:X0,m:L6,M:F6,p:j,q:Q,Q:xl,s:Tl,S:O6,u:P6,U:R6,V:B6,w:U6,W:z6,x:null,X:null,y:q6,Y:$6,Z:V6,"%":Sl},S={a:E,A:k,b:U,B:R,c:B,d:_l,e:_l,f:f6,g:yl,G:bl,H:wl,I:wl,j:i6,L:s6,m:r6,M:a6,p:N,q:n6,Q:u6,s:l6,S:o6,u:J_,U:K_,V:Q_,w:Z_,W:t6,x:A,X:P,y:yl,Y:bl,Z:e6,"%":c6};M.x=v(n,M),M.X=v(r,M),M.c=v(e,M),w.x=v(n,w),w.X=v(r,w),w.c=v(e,w);function v(O,G){return function(Z){var F=[],mt=-1,rt=0,yt=O.length,St,J,wt;for(Z instanceof Date||(Z=new Date(+Z));++mt<yt;)O.charCodeAt(mt)===37&&(F.push(O.slice(rt,mt)),(J=pl[St=O.charAt(++mt)])!=null?St=O.charAt(++mt):J=St==="e"?" ":"0",(wt=G[St])&&(St=wt(Z,J)),F.push(St),rt=mt+1);return F.push(O.slice(rt,mt)),F.join("")}}function T(O,G){return function(Z){var F=Ur(1900,void 0,1),mt=x(F,O,Z+="",0),rt,yt;if(mt!=Z.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(G&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(rt=bs(Ur(F.y,0,1)),yt=rt.getUTCDay(),rt=yt>4||yt===0?ci.ceil(rt):ci(rt),rt=Mo.offset(rt,(F.V-1)*7),F.y=rt.getUTCFullYear(),F.m=rt.getUTCMonth(),F.d=rt.getUTCDate()+(F.w+6)%7):(rt=ps(Ur(F.y,0,1)),yt=rt.getDay(),rt=yt>4||yt===0?fi.ceil(rt):fi(rt),rt=Yn.offset(rt,(F.V-1)*7),F.y=rt.getFullYear(),F.m=rt.getMonth(),F.d=rt.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),yt="Z"in F?bs(Ur(F.y,0,1)).getUTCDay():ps(Ur(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(yt+5)%7:F.w+F.U*7-(yt+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,bs(F)):ps(F)}}function x(O,G,Z,F){for(var mt=0,rt=G.length,yt=Z.length,St,J;mt<rt;){if(F>=yt)return-1;if(St=G.charCodeAt(mt++),St===37){if(St=G.charAt(mt++),J=S[St in pl?G.charAt(mt++):St],!J||(F=J(O,Z,F))<0)return-1}else if(St!=Z.charCodeAt(F++))return-1}return F}function N(O,G,Z){var F=u.exec(G.slice(Z));return F?(O.p=l.get(F[0].toLowerCase()),Z+F[0].length):-1}function E(O,G,Z){var F=g.exec(G.slice(Z));return F?(O.w=m.get(F[0].toLowerCase()),Z+F[0].length):-1}function k(O,G,Z){var F=d.exec(G.slice(Z));return F?(O.w=h.get(F[0].toLowerCase()),Z+F[0].length):-1}function U(O,G,Z){var F=y.exec(G.slice(Z));return F?(O.m=_.get(F[0].toLowerCase()),Z+F[0].length):-1}function R(O,G,Z){var F=p.exec(G.slice(Z));return F?(O.m=b.get(F[0].toLowerCase()),Z+F[0].length):-1}function B(O,G,Z){return x(O,e,G,Z)}function A(O,G,Z){return x(O,n,G,Z)}function P(O,G,Z){return x(O,r,G,Z)}function C(O){return s[O.getDay()]}function Y(O){return a[O.getDay()]}function X(O){return c[O.getMonth()]}function L(O){return f[O.getMonth()]}function z(O){return i[+(O.getHours()>=12)]}function W(O){return 1+~~(O.getMonth()/3)}function q(O){return s[O.getUTCDay()]}function I(O){return a[O.getUTCDay()]}function tt(O){return c[O.getUTCMonth()]}function nt(O){return f[O.getUTCMonth()]}function j(O){return i[+(O.getUTCHours()>=12)]}function Q(O){return 1+~~(O.getUTCMonth()/3)}return{format:function(O){var G=v(O+="",M);return G.toString=function(){return O},G},parse:function(O){var G=T(O+="",!1);return G.toString=function(){return O},G},utcFormat:function(O){var G=v(O+="",w);return G.toString=function(){return O},G},utcParse:function(O){var G=T(O+="",!0);return G.toString=function(){return O},G}}}var pl={"-":"",_:" ",0:"0"},Bt=/^\s*\d+/,Y_=/^%/,X_=/[\\^$*+?|[\]().{}]/g;function bt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function G_(t){return t.replace(X_,"\\$&")}function zr(t){return new RegExp("^(?:"+t.map(G_).join("|")+")","i")}function qr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Z_(t,e,n){var r=Bt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function J_(t,e,n){var r=Bt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function K_(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Q_(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function t6(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function bl(t,e,n){var r=Bt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function yl(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function e6(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function n6(t,e,n){var r=Bt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function r6(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function _l(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function i6(t,e,n){var r=Bt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wl(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function a6(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function o6(t,e,n){var r=Bt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function s6(t,e,n){var r=Bt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function f6(t,e,n){var r=Bt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function c6(t,e,n){var r=Y_.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function u6(t,e,n){var r=Bt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function l6(t,e,n){var r=Bt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function vl(t,e){return bt(t.getDate(),e,2)}function h6(t,e){return bt(t.getHours(),e,2)}function d6(t,e){return bt(t.getHours()%12||12,e,2)}function g6(t,e){return bt(1+Yn.count(ke(t),t),e,3)}function H0(t,e){return bt(t.getMilliseconds(),e,3)}function m6(t,e){return H0(t,e)+"000"}function p6(t,e){return bt(t.getMonth()+1,e,2)}function b6(t,e){return bt(t.getMinutes(),e,2)}function y6(t,e){return bt(t.getSeconds(),e,2)}function _6(t){var e=t.getDay();return e===0?7:e}function w6(t,e){return bt(_r.count(ke(t)-1,t),e,2)}function Y0(t){var e=t.getDay();return e>=4||e===0?Wn(t):Wn.ceil(t)}function v6(t,e){return t=Y0(t),bt(Wn.count(ke(t),t)+(ke(t).getDay()===4),e,2)}function M6(t){return t.getDay()}function S6(t,e){return bt(fi.count(ke(t)-1,t),e,2)}function x6(t,e){return bt(t.getFullYear()%100,e,2)}function T6(t,e){return t=Y0(t),bt(t.getFullYear()%100,e,2)}function A6(t,e){return bt(t.getFullYear()%1e4,e,4)}function k6(t,e){var n=t.getDay();return t=n>=4||n===0?Wn(t):Wn.ceil(t),bt(t.getFullYear()%1e4,e,4)}function E6(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+bt(e/60|0,"0",2)+bt(e%60,"0",2)}function Ml(t,e){return bt(t.getUTCDate(),e,2)}function C6(t,e){return bt(t.getUTCHours(),e,2)}function N6(t,e){return bt(t.getUTCHours()%12||12,e,2)}function D6(t,e){return bt(1+Mo.count(Ee(t),t),e,3)}function X0(t,e){return bt(t.getUTCMilliseconds(),e,3)}function I6(t,e){return X0(t,e)+"000"}function L6(t,e){return bt(t.getUTCMonth()+1,e,2)}function F6(t,e){return bt(t.getUTCMinutes(),e,2)}function O6(t,e){return bt(t.getUTCSeconds(),e,2)}function P6(t){var e=t.getUTCDay();return e===0?7:e}function R6(t,e){return bt(wr.count(Ee(t)-1,t),e,2)}function G0(t){var e=t.getUTCDay();return e>=4||e===0?Vn(t):Vn.ceil(t)}function B6(t,e){return t=G0(t),bt(Vn.count(Ee(t),t)+(Ee(t).getUTCDay()===4),e,2)}function U6(t){return t.getUTCDay()}function z6(t,e){return bt(ci.count(Ee(t)-1,t),e,2)}function q6(t,e){return bt(t.getUTCFullYear()%100,e,2)}function j6(t,e){return t=G0(t),bt(t.getUTCFullYear()%100,e,2)}function $6(t,e){return bt(t.getUTCFullYear()%1e4,e,4)}function W6(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Vn(t):Vn.ceil(t),bt(t.getUTCFullYear()%1e4,e,4)}function V6(){return"+0000"}function Sl(){return"%"}function xl(t){return+t}function Tl(t){return Math.floor(+t/1e3)}var rr,dc,ki;H6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function H6(t){return rr=H_(t),dc=rr.format,rr.parse,ki=rr.utcFormat,rr.utcParse,rr}function Y6(t){return new Date(t)}function X6(t){return t instanceof Date?+t:+new Date(+t)}function gc(t,e,n,r,i,a,s,f,c,u){var l=A0(),d=l.invert,h=l.domain,g=u(".%L"),m=u(":%S"),p=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),_=u("%b %d"),M=u("%B"),w=u("%Y");function S(v){return(c(v)<v?g:f(v)<v?m:s(v)<v?p:a(v)<v?b:r(v)<v?i(v)<v?y:_:n(v)<v?M:w)(v)}return l.invert=function(v){return new Date(d(v))},l.domain=function(v){return arguments.length?h(Array.from(v,X6)):h().map(Y6)},l.ticks=function(v){var T=h();return t(T[0],T[T.length-1],v??10)},l.tickFormat=function(v,T){return T==null?S:u(T)},l.nice=function(v){var T=h();return(!v||typeof v.range!="function")&&(v=e(T[0],T[T.length-1],v??10)),v?h(E0(T,v)):l},l.copy=function(){return _i(l,gc(t,e,n,r,i,a,s,f,c,u))},l}function G6(){return Ye.apply(gc(W_,V_,ke,Ti,_r,Yn,Si,vi,Te,dc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Z6(){return Ye.apply(gc(j_,$_,Ee,Ai,wr,Mo,xi,Mi,Te,ki).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xo(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function To(){var t=0,e=.5,n=1,r=1,i,a,s,f,c,u=be,l,d=!1,h;function g(p){return isNaN(p=+p)?h:(p=.5+((p=+l(p))-a)*(r*p<r*a?f:c),u(d?Math.max(0,Math.min(1,p)):p))}g.domain=function(p){return arguments.length?([t,e,n]=p,i=l(t=+t),a=l(e=+e),s=l(n=+n),f=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,g):[t,e,n]},g.clamp=function(p){return arguments.length?(d=!!p,g):d},g.interpolator=function(p){return arguments.length?(u=p,g):u};function m(p){return function(b){var y,_,M;return arguments.length?([y,_,M]=b,u=po(p,[y,_,M]),g):[u(0),u(.5),u(1)]}}return g.range=m(Dr),g.rangeRound=m(nc),g.unknown=function(p){return arguments.length?(h=p,g):h},function(p){return l=p,i=p(t),a=p(e),s=p(n),f=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,g}}function Z0(){var t=wi(To()(be));return t.copy=function(){return xo(t,Z0())},_o.apply(t,arguments)}function J0(){var t=C0(To()).domain([.1,1,10]);return t.copy=function(){return xo(t,J0()).base(t.base())},_o.apply(t,arguments)}function K0(){var t=D0(To());return t.copy=function(){return xo(t,K0()).constant(t.constant())},_o.apply(t,arguments)}function Q0(){var t=L0(To());return t.copy=function(){return xo(t,Q0()).exponent(t.exponent())},_o.apply(t,arguments)}function lt(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const J6=lt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),K6=lt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Q6=lt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),t3=lt("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),e3=lt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),n3=lt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),r3=lt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),i3=lt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),a3=lt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),o3=lt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),s3=lt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),At=t=>bb(t[t.length-1]);var t1=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(lt);const e1=At(t1);var n1=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(lt);const r1=At(n1);var i1=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(lt);const a1=At(i1);var o1=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(lt);const s1=At(o1);var xf=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(lt);const Wa=At(xf);var f1=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(lt);const c1=At(f1);var Tf=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(lt);const Va=At(Tf);var u1=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(lt);const l1=At(u1);var h1=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(lt);const d1=At(h1);var g1=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(lt);const m1=At(g1);var p1=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(lt);const b1=At(p1);var y1=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(lt);const _1=At(y1);var w1=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(lt);const v1=At(w1);var M1=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(lt);const S1=At(M1);var x1=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(lt);const T1=At(x1);var A1=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(lt);const k1=At(A1);var E1=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(lt);const C1=At(E1);var N1=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(lt);const D1=At(N1);var I1=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(lt);const L1=At(I1);var F1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(lt);const O1=At(F1);var P1=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(lt);const R1=At(P1);var B1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(lt);const U1=At(B1);var z1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(lt);const q1=At(z1);var j1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(lt);const $1=At(j1);var W1=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(lt);const V1=At(W1);var H1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(lt);const Y1=At(H1);var X1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(lt);const G1=At(X1);function Z1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const J1=rc(qe(300,.5,0),qe(-240,.5,1));var K1=rc(qe(-100,.75,.35),qe(80,1.5,.8)),Q1=rc(qe(260,.75,.35),qe(80,1.5,.8)),Hi=qe();function tg(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Hi.h=360*t-100,Hi.s=1.5-1.5*e,Hi.l=.8-.9*e,Hi+""}var Yi=pa(),f3=Math.PI/3,c3=Math.PI*2/3;function eg(t){var e;return t=(.5-t)*Math.PI,Yi.r=255*(e=Math.sin(t))*e,Yi.g=255*(e=Math.sin(t+f3))*e,Yi.b=255*(e=Math.sin(t+c3))*e,Yi+""}function ng(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Ao(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const rg=Ao(lt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var ig=Ao(lt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ag=Ao(lt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),og=Ao(lt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ir(t){return function(){return t}}const sg=Math.cos,mc=Math.min,Ha=Math.sin,Ot=Math.sqrt,Al=1e-12,Ya=Math.PI,ko=2*Ya;function u3(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new $d(e)}function l3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fg(t){this._context=t}fg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Eo(t){return new fg(t)}function h3(t){return t[0]}function d3(t){return t[1]}function g3(t,e){var n=ir(!0),r=null,i=Eo,a=null,s=u3(f);t=typeof t=="function"?t:t===void 0?h3:ir(t),e=typeof e=="function"?e:e===void 0?d3:ir(e);function f(c){var u,l=(c=l3(c)).length,d,h=!1,g;for(r==null&&(a=i(g=s())),u=0;u<=l;++u)!(u<l&&n(d=c[u],u,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(d,u,c),+e(d,u,c));if(g)return a=null,g+""||null}return f.x=function(c){return arguments.length?(t=typeof c=="function"?c:ir(+c),f):t},f.y=function(c){return arguments.length?(e=typeof c=="function"?c:ir(+c),f):e},f.defined=function(c){return arguments.length?(n=typeof c=="function"?c:ir(!!c),f):n},f.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),f):i},f.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),f):r},f}class cg{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function m3(t){return new cg(t,!0)}function p3(t){return new cg(t,!1)}const b3=Ot(3),ug={draw(t,e){const n=Ot(e+mc(e/28,.75))*.59436,r=n/2,i=r*b3;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},ui={draw(t,e){const n=Ot(e/Ya);t.moveTo(n,0),t.arc(0,0,n,0,ko)}},lg={draw(t,e){const n=Ot(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},hg=Ot(1/3),y3=hg*2,dg={draw(t,e){const n=Ot(e/y3),r=n*hg;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},gg={draw(t,e){const n=Ot(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},mg={draw(t,e){const n=Ot(e-mc(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},pg={draw(t,e){const n=Ot(e),r=-n/2;t.rect(r,r,n,n)}},bg={draw(t,e){const n=Ot(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},_3=.8908130915292852,yg=Ha(Ya/10)/Ha(7*Ya/10),w3=Ha(ko/10)*yg,v3=-sg(ko/10)*yg,_g={draw(t,e){const n=Ot(e*_3),r=w3*n,i=v3*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=ko*a/5,f=sg(s),c=Ha(s);t.lineTo(c*n,-f*n),t.lineTo(f*r-c*i,c*r+f*i)}t.closePath()}},ys=Ot(3),wg={draw(t,e){const n=-Ot(e/(ys*3));t.moveTo(0,n*2),t.lineTo(-ys*n,-n),t.lineTo(ys*n,-n),t.closePath()}},M3=Ot(3),vg={draw(t,e){const n=Ot(e)*.6824,r=n/2,i=n*M3/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},le=-.5,he=Ot(3)/2,Af=1/Ot(12),S3=(Af/2+1)*3,Mg={draw(t,e){const n=Ot(e/S3),r=n/2,i=n*Af,a=r,s=n*Af+n,f=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(f,c),t.lineTo(le*r-he*i,he*r+le*i),t.lineTo(le*a-he*s,he*a+le*s),t.lineTo(le*f-he*c,he*f+le*c),t.lineTo(le*r+he*i,le*i-he*r),t.lineTo(le*a+he*s,le*s-he*a),t.lineTo(le*f+he*c,le*c-he*f),t.closePath()}},Sg={draw(t,e){const n=Ot(e-mc(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},x3=[ui,lg,dg,pg,_g,wg,Mg],T3=[ui,mg,Sg,vg,ug,bg,gg];function xn(){}function Xa(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Co(t){this._context=t}Co.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function A3(t){return new Co(t)}function xg(t){this._context=t}xg.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Xa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function k3(t){return new xg(t)}function Tg(t){this._context=t}Tg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Xa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function E3(t){return new Tg(t)}function Ag(t,e){this._basis=new Co(t),this._beta=e}Ag.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],a=t[n]-r,s=e[n]-i,f=-1,c;++f<=n;)c=f/n,this._basis.point(this._beta*t[f]+(1-this._beta)*(r+c*a),this._beta*e[f]+(1-this._beta)*(i+c*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const C3=function t(e){function n(r){return e===1?new Co(r):new Ag(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function Ga(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function pc(t,e){this._context=t,this._k=(1-e)/6}pc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ga(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const N3=function t(e){function n(r){return new pc(r,e)}return n.tension=function(r){return t(+r)},n}(0);function bc(t,e){this._context=t,this._k=(1-e)/6}bc.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const D3=function t(e){function n(r){return new bc(r,e)}return n.tension=function(r){return t(+r)},n}(0);function yc(t,e){this._context=t,this._k=(1-e)/6}yc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const I3=function t(e){function n(r){return new yc(r,e)}return n.tension=function(r){return t(+r)},n}(0);function _c(t,e,n){var r=t._x1,i=t._y1,a=t._x2,s=t._y2;if(t._l01_a>Al){var f=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*f-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*f-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Al){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/l,s=(s*u+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,s,t._x2,t._y2)}function kg(t,e){this._context=t,this._alpha=e}kg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:_c(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const L3=function t(e){function n(r){return e?new kg(r,e):new pc(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Eg(t,e){this._context=t,this._alpha=e}Eg.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:_c(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const F3=function t(e){function n(r){return e?new Eg(r,e):new bc(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Cg(t,e){this._context=t,this._alpha=e}Cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_c(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const O3=function t(e){function n(r){return e?new Cg(r,e):new yc(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Ng(t){this._context=t}Ng.prototype={areaStart:xn,areaEnd:xn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function P3(t){return new Ng(t)}function kl(t){return t<0?-1:1}function El(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),f=(a*i+s*r)/(r+i);return(kl(a)+kl(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(f))||0}function Cl(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function _s(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,f=(a-r)/3;t._context.bezierCurveTo(r+f,i+f*e,a-f,s-f*n,a,s)}function Za(t){this._context=t}Za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_s(this,this._t0,Cl(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,_s(this,Cl(this,n=El(this,t,e)),n);break;default:_s(this,this._t0,n=El(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Dg(t){this._context=new Ig(t)}(Dg.prototype=Object.create(Za.prototype)).point=function(t,e){Za.prototype.point.call(this,e,t)};function Ig(t){this._context=t}Ig.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function R3(t){return new Za(t)}function B3(t){return new Dg(t)}function Lg(t){this._context=t}Lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Nl(t),i=Nl(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Nl(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function U3(t){return new Lg(t)}function No(t,e){this._context=t,this._t=e}No.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function z3(t){return new No(t,.5)}function q3(t){return new No(t,0)}function j3(t){return new No(t,1)}function Tn(t){return t!=null&&!Number.isNaN(t)}function je(t,e){return+Tn(e)-+Tn(t)||ne(t,e)}function Ja(t,e){return+Tn(e)-+Tn(t)||bi(t,e)}function wc(t){return t!=null&&`${t}`!=""}function Fg(t){return isFinite(t)?t:NaN}function Do(t){return t>0&&isFinite(t)?t:NaN}function vc(t){return t<0&&isFinite(t)?t:NaN}function $3(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return`${W3(t.getUTCFullYear())}-${en(t.getUTCMonth()+1,2)}-${en(t.getUTCDate(),2)}${n||r||i||a?`T${en(n,2)}:${en(r,2)}${i||a?`:${en(i,2)}${a?`.${en(a,3)}`:""}`:""}Z`:""}`}function W3(t){return t<0?`-${en(-t,6)}`:t>9999?`+${en(t,6)}`:en(t,4)}function en(t,e){return`${t}`.padStart(e,"0")}const V3=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Og(t,e){return V3.test(t+="")?new Date(t):typeof e=="function"?e(t):e}function vr(t){if(t==null)return;const e=t[0],n=t[t.length-1];return bi(e,n)}const cr=1e3,pn=cr*60,bn=pn*60,$e=bn*24,Fe=$e*7,Bn=$e*30,ln=$e*365,ws=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",cr],["5 seconds",5*cr],["15 seconds",15*cr],["30 seconds",30*cr],["minute",pn],["5 minutes",5*pn],["15 minutes",15*pn],["30 minutes",30*pn],["hour",bn],["3 hours",3*bn],["6 hours",6*bn],["12 hours",12*bn],["day",$e],["2 days",2*$e],["week",Fe],["2 weeks",2*Fe],["month",Bn],["3 months",3*Bn],["6 months",6*Bn],["year",ln],["2 years",2*ln],["5 years",5*ln],["10 years",10*ln],["20 years",20*ln],["50 years",50*ln],["100 years",100*ln]],Mc=new Map([["second",cr],["minute",pn],["hour",bn],["day",$e],["monday",Fe],["tuesday",Fe],["wednesday",Fe],["thursday",Fe],["friday",Fe],["saturday",Fe],["sunday",Fe],["week",Fe],["month",Bn],["year",ln]]),Pg=new Map([["second",Te],["minute",vi],["hour",Si],["day",Yn],["monday",fi],["tuesday",R0],["wednesday",B0],["thursday",Wn],["friday",U0],["saturday",z0],["sunday",_r],["week",_r],["month",Ti],["year",ke]]),Sc=new Map([["second",Te],["minute",Mi],["hour",xi],["day",So],["monday",ci],["tuesday",q0],["wednesday",j0],["thursday",Vn],["friday",$0],["saturday",W0],["sunday",wr],["week",wr],["month",Ai],["year",Ee]]),Ei=Symbol("intervalDuration"),Io=Symbol("intervalType");for(const[t,e]of Pg)e[Ei]=Mc.get(t),e[Io]="time";for(const[t,e]of Sc)e[Ei]=Mc.get(t),e[Io]="utc";const Jr=[["year",Ee,"utc"],["month",Ai,"utc"],["day",So,"utc",6*Bn],["hour",xi,"utc",3*$e],["minute",Mi,"utc",6*bn],["second",Te,"utc",30*pn]],la=[["year",ke,"time"],["month",Ti,"time"],["day",Yn,"time",6*Bn],["hour",Si,"time",3*$e],["minute",vi,"time",6*bn],["second",Te,"time",30*pn]],H3=[Jr[0],la[0],Jr[1],la[1],Jr[2],la[2],...Jr.slice(3)];function Rg(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(e);switch(r&&(e=e.slice(r[0].length),n=+r[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let i=Sc.get(e);if(!i)throw new Error(`unknown interval: ${t}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function Bg(t){return zg(Rg(t),"time")}function Ug(t){return zg(Rg(t),"utc")}function zg([t,e],n){let r=(n==="time"?Pg:Sc).get(t);return e>1&&(r=r.every(e),r[Ei]=Mc.get(t)*e,r[Io]=n),r}function Dl(t,e){if(!(e>1))return;const n=t[Ei];if(!ws.some(([,i])=>i===n)||n%$e===0&&$e<n&&n<Bn)return;const[r]=ws[ho(([,i])=>Math.log(i)).center(ws,Math.log(n*e))];return(t[Io]==="time"?Bg:Ug)(r)}function Il(t,e,n){const r=e==="time"?dc:ki;if(n==null)return r(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=Y3(n);switch(t){case"millisecond":return ar(r(".%L"),r(":%M:%S"),i);case"second":return ar(r(":%S"),r("%-I:%M"),i);case"minute":return ar(r("%-I:%M"),r("%p"),i);case"hour":return ar(r("%-I %p"),r("%b %-d"),i);case"day":return ar(r("%-d"),r("%b"),i);case"month":return ar(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function Y3(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function X3(t){return t==="time"?la:t==="utc"?Jr:H3}function G3(t,e,n){const r=se(j2(e,(i,a)=>Math.abs(a-i)));if(r<1e3)return Il("millisecond","utc",n);for(const[i,a,s,f]of X3(t)){if(r>f||i==="hour"&&!r)break;if(e.every(c=>a.floor(c)>=c))return Il(i,s,n)}}function ar(t,e,n){return(r,i,a)=>{const s=t(r,i),f=e(r,i),c=i-vr(a);return i!==c&&a[c]!==void 0&&f===e(a[c],c)?s:n(s,f)}}const xc=Object.getPrototypeOf(Uint8Array),Z3=Object.prototype.toString;function Zn(t){return t instanceof Array||t instanceof xc}function qg(t){return t instanceof xc&&!J3(t)}function jg(t){return(t==null?void 0:t.prototype)instanceof xc&&!K3(t)}function J3(t){return t instanceof BigInt64Array||t instanceof BigUint64Array}function K3(t){return t===BigInt64Array||t===BigUint64Array}const $g=Symbol("reindex");function _e(t,e,n){const r=typeof e;return r==="string"?nm(t)?Tc(t.getChild(e),n):Ll(t,Wg(e),n):r==="function"?Ll(t,e,n):r==="number"||e instanceof Date||r==="boolean"?Lt(t,on(e),n):typeof(e==null?void 0:e.transform)=="function"?kf(e.transform(t),n):Q3(kf(e,n),t==null?void 0:t[$g])}function Q3(t,e){return t!=null&&e?kc(t,e):t}function Ll(t,e,n){return Lt(t,jg(n)?(r,i)=>Ac(e(r,i)):e,n)}function kf(t,e){return e===void 0?Jn(t):rm(t)?Tc(t,e):t instanceof e?t:e.from(t,jg(e)&&!qg(t)?Ac:void 0)}function Tc(t,e){return t==null?t:(e===void 0||e===Array)&&xw(t.type)?Yg(Fl(t)):kf(Fl(t),e)}function Fl(t){return t.nullCount?t.toJSON():t.toArray()}const ha=[null],Wg=t=>e=>{var r;const n=e[t];return n===void 0&&e.type==="Feature"?(r=e.properties)==null?void 0:r[t]:n},Vg={transform:En},Me={transform:t=>t},tw=()=>1,ew=()=>!0,$t=t=>t==null?t:`${t}`,Wt=t=>t==null?t:+t,Hg=t=>t?t[0]:void 0,nw=t=>t?t[1]:void 0,on=t=>()=>t;function rw(t){const e=+`${t}`.slice(1)/100;return(n,r)=>Sa(n,e,r)}function yn(t){return qg(t)?t:Lt(t,Ac,Float64Array)}function Ac(t){return t==null?NaN:Number(t)}function Yg(t){return Lt(t,iw)}function iw(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?Og(t):t==null||isNaN(t=Number(t))?void 0:new Date(t)}function Hn(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:Oo(t)?[void 0,t]:[t,void 0]}function Xt(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function Xg(t,e,n){if(t!=null)return Ne(t,e,n)}function Ne(t,e,n){const r=`${t}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${e}: ${t}`);return r}function Mr(t){return nm(t)?t:Jn(t)}function Jn(t){if(t==null||Zn(t))return t;if(rm(t))return Tc(t);if(Gg(t))switch(t.type){case"FeatureCollection":return t.features;case"GeometryCollection":return t.geometries;default:return[t]}return Array.from(t)}function Gg(t){switch(t==null?void 0:t.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return!0;default:return!1}}function Lt(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function li(t,e=Array){return t instanceof e?t.slice():e.from(t)}function Zg({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function aw({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function ow(t){return Zg(t)||aw(t)||t.interval!==void 0}function Kn(t){return(t==null?void 0:t.toString)===Z3}function Ka(t){return Kn(t)&&(t.type!==void 0||t.domain!==void 0)}function Lo(t){return Kn(t)&&typeof t.transform!="function"}function Sr(t){return Lo(t)&&t.value===void 0&&t.channel===void 0}function sw(t,e,n,r=Me){return e===void 0&&n===void 0?(e=0,n=t===void 0?r:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function Ci(t,e){return t===void 0&&e===void 0?[Hg,nw]:[t,e]}function Jg({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=Hn(e)),t===void 0&&([t]=Hn(n)),t}function hi(t){return Zn(t)?t.length:t==null?void 0:t.numRows}function En(t){const e=hi(t),n=new Uint32Array(e);for(let r=0;r<e;++r)n[r]=r;return n}function kc(t,e){return Zn(t)?Lt(e,n=>t[n],t.constructor):Lt(e,n=>t.at(n))}function fw(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function sn(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ef(t){let e;return[{transform:()=>e,label:Ni(t)},n=>e=n]}function cw(t){return t==null?[t]:Ef(t)}function Ni(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function uw(t,e){return{transform(n){const r=t.transform(n),i=e.transform(n);return ve(r)||ve(i)?Lt(r,(a,s)=>new Date((+r[s]+ +i[s])/2)):Lt(r,(a,s)=>(+r[s]+ +i[s])/2,Float64Array)},label:t.label}}function lw(t,e){const n=Kg(e==null?void 0:e.interval,e==null?void 0:e.type);return n?Lt(t,n):t}function Kg(t,e){const n=Ec(t,e);return n&&(r=>Tn(r)?n.floor(r):r)}function Ec(t,e){if(t!=null){if(typeof t=="number")return hw(t);if(typeof t=="string")return(e==="time"?Bg:Ug)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function hw(t){t=+t,0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const e=Math.abs(t);return t<0?{floor:n=>Math.floor(n*e)/e,offset:(n,r=1)=>(n*e+Math.floor(r))/e,range:(n,r)=>Js(Math.ceil(n*e),r*e).map(i=>i/e)}:{floor:n=>Math.floor(n/e)*e,offset:(n,r=1)=>n+e*Math.floor(r),range:(n,r)=>Js(Math.ceil(n/e),r/e).map(i=>i*e)}}function Di(t,e){if(t=Ec(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function dw(t,e){if(t=Di(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function gw(t){return typeof(t==null?void 0:t.range)=="function"}function Fo(t){return t===void 0||Lo(t)?t:{value:t}}function mw(t){return t==null?null:{transform:e=>_e(e,t,Float64Array),label:Ni(t)}}function Qn(t){return t&&typeof t[Symbol.iterator]=="function"}function Qg(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function Ol(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function ve(t){for(const e of t)if(e!=null)return e instanceof Date}function pw(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&Og(e)}function bw(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function yw(t){for(const e of t)if(e!=null)return typeof e=="number"}function vs(t,e){let n;for(const r of t)if(r!=null){if(!e(r))return!1;n=!0}return n}const _w=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Oo(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||_w.has(t))}function ww(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function Qt(t){return t==null||di(t)}function di(t){return/^\s*none\s*$/i.test(t)}function vw(t){return/^\s*round\s*$/i.test(t)}function Cf(t,e){return Xg(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Po(t="middle"){return Cf(t,"frameAnchor")}function Mw(t={},...e){let n=t;for(const r of e)for(const i in r)if(n[i]===void 0){const a=r[i];n===t?n={...n,[i]:a}:n[i]=a}return n}function Sw(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(e.has(i))throw new Error(`duplicate name: ${i}`);return e.add(i),[r,n]}))}function tm(t){return Qn(t)?Sw(t):t}function em(t){return t===!0?t="frame":t===!1?t=null:!Gg(t)&&t!=null&&(t=Ne(t,"clip",["frame","sphere"]),t==="sphere"&&(t={type:"Sphere"})),t}function nm(t){return t&&typeof t.getChild=="function"&&typeof t.toArray=="function"&&t.schema&&Array.isArray(t.schema.fields)}function rm(t){return t&&typeof t.toArray=="function"&&t.type}function xw(t){return t&&(t.typeId===8||t.typeId===10)&&t.unit===1}const Be=Symbol("position"),un=Symbol("color"),Ii=Symbol("radius"),Li=Symbol("length"),Fi=Symbol("opacity"),Ro=Symbol("symbol"),im=Symbol("projection"),kt=new Map([["x",Be],["y",Be],["fx",Be],["fy",Be],["r",Ii],["color",un],["opacity",Fi],["symbol",Ro],["length",Li],["projection",im]]);function Tw(t){return t===Be||t===im}function Aw(t){return t===Be||t===Ii||t===Li||t===Fi}const kw=Math.sqrt(3),Ew=2/kw,Cw={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*Ew,i=r/2;t.moveTo(0,r),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(0,-r),t.lineTo(-n,-i),t.lineTo(-n,i),t.closePath()}},Cc=new Map([["asterisk",ug],["circle",ui],["cross",lg],["diamond",dg],["diamond2",gg],["hexagon",Cw],["plus",mg],["square",pg],["square2",bg],["star",_g],["times",Sg],["triangle",wg],["triangle2",vg],["wye",Mg]]);function Nc(t){return t&&typeof t.draw=="function"}function Nw(t){return Nc(t)?!0:typeof t!="string"?!1:Cc.has(t.toLowerCase())}function Dc(t){if(t==null||Nc(t))return t;const e=Cc.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function Dw(t){if(t==null||Nc(t))return[void 0,t];if(typeof t=="string"){const e=Cc.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function Ic({filter:t,sort:e,reverse:n,transform:r,initializer:i,...a}={},s){if(r===void 0&&(t!=null&&(r=am(t)),e!=null&&!Sr(e)&&(r=Ms(r,Lc(e))),n&&(r=Ms(r,om))),s!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(e===null||Sr(e))&&{sort:e},transform:Ms(r,s)}}function xr({filter:t,sort:e,reverse:n,initializer:r,...i}={},a){return r===void 0&&(t!=null&&(r=am(t)),e!=null&&!Sr(e)&&(r=Ss(r,Lc(e))),n&&(r=Ss(r,om))),{...i,...(e===null||Sr(e))&&{sort:e},initializer:Ss(r,a)}}function Ms(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i){return{data:n,facets:r}=t.call(this,n,r,i),e.call(this,Mr(n),r,i)}}function Ss(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i,...a){let s,f,c,u,l,d;return{data:f=n,facets:c=r,channels:s}=t.call(this,n,r,i,...a),{data:l=f,facets:d=c,channels:u}=e.call(this,f,c,{...i,...s},...a),{data:l,facets:d,channels:{...s,...u}}}}function Iw(t,e){return(t.initializer!=null?xr:Ic)(t,e)}function am(t){return(e,n)=>{const r=_e(e,t);return{data:e,facets:n.map(i=>i.filter(a=>r[a]))}}}function om(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function Lw(t,{sort:e,...n}={}){return{...(Lo(t)&&t.channel!==void 0?xr:Iw)(n,Lc(t)),sort:Sr(e)?e:null}}function Lc(t){return(typeof t=="function"&&t.length!==1?Fw:Ow)(t)}function Fw(t){return(e,n)=>{const r=Zn(e)?(i,a)=>t(e[i],e[a]):(i,a)=>t(e.get(i),e.get(a));return{data:e,facets:n.map(i=>i.slice().sort(r))}}}function Ow(t){let e,n;({channel:e,value:t,order:n}={...Fo(t)});const r=e==null?void 0:e.startsWith("-");if(r&&(e=e.slice(1)),n===void 0&&(n=r?Ja:je),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=je;break;case"descending":n=Ja;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,s)=>{let f;if(e===void 0)f=_e(i,t);else{if(s===void 0)throw new Error("channel sort requires an initializer");if(f=s[e],!f)return{};f=f.value}const c=(u,l)=>n(f[u],f[l]);return{data:i,facets:a.map(u=>u.slice().sort(c))}}}function Pw(t,e,n=Rw){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&Kn(t))return Bw(t);if(typeof t=="function")return Uw(t);if(/^p\d{2}$/i.test(t))return Qe(rw(t));switch(`${t}`.toLowerCase()){case"first":return qw;case"last":return jw;case"identity":return zw;case"count":return Rl;case"distinct":return $w;case"sum":return e==null?Rl:Ww;case"proportion":return Bl(e,"data");case"proportion-facet":return Bl(e,"facet");case"deviation":return Qe(N2);case"min":return Qe(ze);case"min-index":return Qe(R2);case"max":return Qe(se);case"max-index":return Qe(P2);case"mean":return Pl(U2);case"median":return Pl(Zs);case"variance":return Qe(Sd);case"mode":return Qe(q2)}return n(t)}function Rw(t){throw new Error(`invalid reduce: ${t}`)}function Bw(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function Uw(t){return{reduceIndex(e,n,r){return t(kc(n,e),r)}}}function Qe(t){return{reduceIndex(e,n){return t(e,r=>n[r])}}}function Pl(t){return{reduceIndex(e,n){const r=t(e,i=>n[i]);return ve(n)?new Date(r):r}}}const zw={reduceIndex(t,e){return kc(e,t)}},qw={reduceIndex(t,e){return e[t[0]]}},jw={reduceIndex(t,e){return e[t[t.length-1]]}},Rl={label:"Frequency",reduceIndex(t){return t.length}},$w={label:"Distinct",reduceIndex(t,e){const n=new go;for(const r of t)n.add(e[r]);return n.size}},Ww=Qe(jn);function Bl(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:e,reduceIndex:(n,r,i=1)=>jn(n,a=>r[a])/i}}function gi(t,{scale:e,type:n,value:r,filter:i,hint:a,label:s=Ni(r)},f){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),sm(f,{scale:e,type:n,value:_e(t,r),label:s,filter:i,hint:a})}function Vw(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,gi(e,r,n)]))}function Hw(t,e){const n=Object.fromEntries(Object.entries(t).map(([r,{scale:i,value:a}])=>{const s=i==null?null:e[i];return[r,s==null?a:Lt(a,s)]}));return n.channels=t,n}function sm(t,e){const{scale:n,value:r}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&vs(r,Oo)?null:"color",e.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&vs(r,ww)?null:"opacity",e.defaultScale="opacity";break;case"symbol":n!==!0&&vs(r,Nw)?(e.scale=null,e.value=Lt(r,Dc)):e.scale="symbol",e.defaultScale="symbol";break;default:e.scale=kt.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!kt.has(n))throw new Error(`unknown scale: ${n}`);return e}function Yw(t,e,n,r,i){const{order:a,reverse:s,reduce:f=!0,limit:c}=i;for(const u in i){if(!kt.has(u))continue;let{value:l,order:d=a,reverse:h=s,reduce:g=f,limit:m=c}=Fo(i[u]);const p=l==null?void 0:l.startsWith("-");if(p&&(l=l.slice(1)),d=d===void 0?p!==(l==="width"||l==="height")?cm:fm:Zw(d),g==null||g===!1)continue;const b=u==="fx"||u==="fy"?Gw(e,r[u]):Xw(n,u);if(!b)throw new Error(`missing channel for scale: ${u}`);const y=b.value,[_=0,M=1/0]=Qn(m)?m:m<0?[m]:[0,m];if(l==null)b.domain=()=>{let w=Array.from(new go(y));return h&&(w=w.reverse()),(_!==0||M!==1/0)&&(w=w.slice(_,M)),w};else{const w=l==="data"?t:l==="height"?Ul(n,"y1","y2"):l==="width"?Ul(n,"x1","x2"):Nf(n,l,l==="y"?"y2":l==="x"?"x2":void 0),S=Pw(g===!0?"max":g,w);b.domain=()=>{let v=D2(En(y),T=>S.reduceIndex(T,w),T=>y[T]);return d&&v.sort(d),h&&v.reverse(),(_!==0||M!==1/0)&&(v=v.slice(_,M)),v.map(Hg)}}}}function Xw(t,e){for(const n in t){const r=t[n];if(r.scale===e)return r}}function Gw(t,e){const n=t.original;if(n===t)return e;const r=e.value,i=e.value=[];for(let a=0;a<n.length;++a){const s=r[n[a][0]];for(const f of t[a])i[f]=s}return e}function Ul(t,e,n){const r=Nf(t,e),i=Nf(t,n);return Lt(i,(a,s)=>Math.abs(a-r[s]),Float64Array)}function Nf(t,e,n){let r=t[e];if(!r&&n!==void 0&&(r=t[n]),r)return r.value;throw new Error(`missing channel: ${e}`)}function Zw(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return fm;case"descending":return cm}throw new Error(`invalid order: ${t}`)}function fm([t,e],[n,r]){return je(e,r)||je(t,n)}function cm([t,e],[n,r]){return Ja(e,r)||je(t,n)}function zl(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}const um=new Map([["accent",K6],["category10",J6],["dark2",Q6],["observable10",t3],["paired",e3],["pastel1",n3],["pastel2",r3],["set1",i3],["set2",a3],["set3",o3],["tableau10",s3]]);function Jw(t){return t!=null&&um.has(`${t}`.toLowerCase())}const ql=new Map([...um,["brbg",Ze(t1,e1)],["prgn",Ze(n1,r1)],["piyg",Ze(i1,a1)],["puor",Ze(o1,s1)],["rdbu",Ze(xf,Wa)],["rdgy",Ze(f1,c1)],["rdylbu",Ze(Tf,Va)],["rdylgn",Ze(u1,l1)],["spectral",Ze(h1,d1)],["burd",jl(xf,Wa)],["buylrd",jl(Tf,Va)],["blues",Rt(B1,U1)],["greens",Rt(z1,q1)],["greys",Rt(j1,$1)],["oranges",Rt(X1,G1)],["purples",Rt(W1,V1)],["reds",Rt(H1,Y1)],["turbo",Je(ng)],["viridis",Je(rg)],["magma",Je(ig)],["inferno",Je(ag)],["plasma",Je(og)],["cividis",Je(Z1)],["cubehelix",Je(J1)],["warm",Je(K1)],["cool",Je(Q1)],["bugn",Rt(g1,m1)],["bupu",Rt(p1,b1)],["gnbu",Rt(y1,_1)],["orrd",Rt(w1,v1)],["pubu",Rt(x1,T1)],["pubugn",Rt(M1,S1)],["purd",Rt(A1,k1)],["rdpu",Rt(E1,C1)],["ylgn",Rt(I1,L1)],["ylgnbu",Rt(N1,D1)],["ylorbr",Rt(F1,O1)],["ylorrd",Rt(P1,R1)],["rainbow",$l(tg)],["sinebow",$l(eg)]]);function Rt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ae(e,n):t[n])}function Ze(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ae(e,n):t[n])}function jl(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ae(r=>e(1-r),n):t[n].slice().reverse())}function Je(t){return({length:e})=>Ae(t,Math.max(2,Math.floor(e)))}function $l(t){return({length:e})=>Ae(t,Math.floor(e)+1).slice(0,-1)}function lm(t){const e=`${t}`.toLowerCase();if(!ql.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return ql.get(e)}function Bo(t,e){const n=lm(t),r=typeof n=="function"?n({length:e}):n;return r.length!==e?r.slice(0,e):r}function Kw(t,e="greys"){const n=new Set,[r,i]=Bo(e,2);for(const a of t)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const Wl=new Map([["brbg",e1],["prgn",r1],["piyg",a1],["puor",s1],["rdbu",Wa],["rdgy",c1],["rdylbu",Va],["rdylgn",l1],["spectral",d1],["burd",t=>Wa(1-t)],["buylrd",t=>Va(1-t)],["blues",U1],["greens",q1],["greys",$1],["purples",V1],["reds",Y1],["oranges",G1],["turbo",ng],["viridis",rg],["magma",ig],["inferno",ag],["plasma",og],["cividis",Z1],["cubehelix",J1],["warm",K1],["cool",Q1],["bugn",m1],["bupu",b1],["gnbu",_1],["orrd",v1],["pubugn",S1],["pubu",T1],["purd",k1],["rdpu",C1],["ylgnbu",D1],["ylgn",L1],["ylorbr",O1],["ylorrd",R1],["rainbow",tg],["sinebow",eg]]);function Fc(t){const e=`${t}`.toLowerCase();if(!Wl.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return Wl.get(e)}const Qw=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function t5(t){return t!=null&&Qw.has(`${t}`.toLowerCase())}const hm=t=>e=>t(1-e),xs=[0,1],Vl=new Map([["number",Mn],["rgb",ii],["hsl",uy],["hcl",dy],["lab",ly]]);function dm(t){const e=`${t}`.toLowerCase();if(!Vl.has(e))throw new Error(`unknown interpolator: ${e}`);return Vl.get(e)}function Oi(t,e,n,{type:r,nice:i,clamp:a,zero:s,domain:f=mm(t,n),unknown:c,round:u,scheme:l,interval:d,range:h=kt.get(t)===Ii?l5(n,f):kt.get(t)===Li?h5(n,f):kt.get(t)===Fi?xs:void 0,interpolate:g=kt.get(t)===un?l==null&&h!==void 0?ii:Fc(l!==void 0?l:r==="cyclical"?"rainbow":"turbo"):u?nc:Mn,reverse:m}){if(f=Hl(f),d=Di(d,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof g!="function"&&(g=dm(g)),m=!!m,h!==void 0){const p=f.length,b=(h=Hl(h)).length;if(p!==b){if(g.length===1)throw new Error("invalid piecewise interpolator");g=po(g,h),h=void 0}}if(g.length===1?(m&&(g=hm(g),m=!1),h===void 0&&(h=Float64Array.from(f,(p,b)=>b/(f.length-1)),h.length===2&&(h=xs)),e.interpolate((h===xs?on:Pc)(g))):e.interpolate(g),s){const[p,b]=_n(f);(p>0||b<0)&&(f=li(f),(vr(f)||1)===Math.sign(p)?f[0]=0:f[f.length-1]=0)}return m&&(f=xa(f)),e.domain(f).unknown(c),i&&(e.nice(e5(i,r)),f=e.domain()),h!==void 0&&e.range(h),a&&e.clamp(a),{type:r,domain:f,range:h,scale:e,interpolate:g,interval:d}}function Hl(t){return t=Jn(t),t.length>=2?t:[t[0],t[0]]}function e5(t,e){return t===!0?void 0:typeof t=="number"?t:dw(t,e)}function n5(t,e,n){return Oi(t,lc(),e,n)}function r5(t,e,n){return gm(t,e,{...n,exponent:.5})}function gm(t,e,{exponent:n=1,...r}){return Oi(t,F0().exponent(n),e,{...r,type:"pow"})}function i5(t,e,{base:n=10,domain:r=d5(e),...i}){return Oi(t,N0().base(n),e,{...i,domain:r})}function a5(t,e,{constant:n=1,...r}){return Oi(t,I0().constant(n),e,r)}function o5(t,e,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:s=g5(e),unknown:f,interpolate:c,reverse:u}){return n===void 0&&(n=c!==void 0?Ae(c,i):kt.get(t)===un?Bo(a,i):void 0),s.length>0&&(s=O0(s,n===void 0?{length:i}:n).quantiles()),Oc(t,e,{domain:s,range:n,reverse:u,unknown:f})}function s5(t,e,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=mm(t,e),unknown:s,interpolate:f,reverse:c}){const[u,l]=_n(a);let d;return n===void 0?(d=Ma(u,l,r),d[0]<=u&&d.splice(0,1),d[d.length-1]>=l&&d.pop(),r=d.length+1,n=f!==void 0?Ae(f,r):kt.get(t)===un?Bo(i,r):void 0):(d=Ae(Mn(u,l),r+1).slice(1,-1),u instanceof Date&&(d=d.map(h=>new Date(h)))),vr(Jn(a))<0&&d.reverse(),Oc(t,e,{domain:d,range:n,reverse:c,unknown:s})}function Oc(t,e,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:s=a!==void 0?Ae(a,n.length+1):kt.get(t)===un?Bo(i,n.length+1):void 0,reverse:f}){n=Jn(n);const c=vr(n);if(!isNaN(c)&&!f5(n,c))throw new Error(`the ${t} scale has a non-monotonic domain`);return f&&(s=xa(s)),{type:"threshold",scale:P0(c<0?xa(n):n,s===void 0?[]:s).unknown(r),domain:n,range:s}}function f5(t,e){for(let n=1,r=t.length,i=t[0];n<r;++n){const a=bi(i,i=t[n]);if(a!==0&&a!==e)return!1}return!0}function c5(t){return{type:"identity",scale:Aw(kt.get(t))?k0():e=>e}}function mi(t,e=Fg){return t.length?[ze(t,({value:n})=>n===void 0?n:ze(n,e)),se(t,({value:n})=>n===void 0?n:se(n,e))]:[0,1]}function mm(t,e){const n=kt.get(t);return(n===Ii||n===Fi||n===Li?u5:mi)(e)}function u5(t){return[0,t.length?se(t,({value:e})=>e===void 0?e:se(e,Fg)):1]}function l5(t,e){const n=t.find(({radius:s})=>s!==void 0);if(n!==void 0)return[0,n.radius];const r=Sa(t,.5,({value:s})=>s===void 0?NaN:Sa(s,.25,Do)),i=e.map(s=>3*Math.sqrt(s/r)),a=30/se(i);return a<1?i.map(s=>s*a):i}function h5(t,e){const n=Zs(t,({value:a})=>a===void 0?NaN:Zs(a,Math.abs)),r=e.map(a=>12*a/n),i=60/se(r);return i<1?r.map(a=>a*i):r}function d5(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return mi(t,Do);if(n<0)return mi(t,vc)}return[1,10]}function g5(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const r of n)e.push(r);return e}function Pc(t){return(e,n)=>r=>t(e+r*(n-e))}let Df=0,If;function m5(){const t=Df;return Df=0,If=void 0,t}function wn(t){t!==If&&(If=t,console.warn(t),++Df)}function Uo(t,e,n,r,{type:i,nice:a,clamp:s,domain:f=mi(r),unknown:c,pivot:u=0,scheme:l,range:d,symmetric:h=!0,interpolate:g=kt.get(t)===un?l==null&&d!==void 0?ii:Fc(l!==void 0?l:"rdbu"):Mn,reverse:m}){u=+u,f=Jn(f);let[p,b]=f;if(f.length>2&&wn(`Warning: the diverging ${t} scale domain contains extra elements.`),bi(p,b)<0&&([p,b]=[b,p],m=!m),p=Math.min(p,u),b=Math.max(b,u),typeof g!="function"&&(g=dm(g)),d!==void 0&&(g=g.length===1?Pc(g)(...d):po(g,d)),m&&(g=hm(g)),h){const y=n.apply(u),_=y-n.apply(p),M=n.apply(b)-y;_<M?p=n.invert(y-M):_>M&&(b=n.invert(y+_))}return e.domain([p,u,b]).unknown(c).interpolator(g),s&&e.clamp(s),a&&e.nice(a),{type:i,domain:[p,b],pivot:u,interpolate:g,scale:e}}function p5(t,e,n){return Uo(t,Z0(),w5,e,n)}function b5(t,e,n){return pm(t,e,{...n,exponent:.5})}function pm(t,e,{exponent:n=1,...r}){return Uo(t,Q0().exponent(n=+n),S5(n),e,{...r,type:"diverging-pow"})}function y5(t,e,{base:n=10,pivot:r=1,domain:i=mi(e,r<0?vc:Do),...a}){return Uo(t,J0().base(n=+n),v5,e,{domain:i,pivot:r,...a})}function _5(t,e,{constant:n=1,...r}){return Uo(t,K0().constant(n=+n),x5(n),e,r)}const w5={apply(t){return t},invert(t){return t}},v5={apply:Math.log,invert:Math.exp},M5={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function S5(t){return t===.5?M5:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function x5(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function bm(t,e,n,r){return Oi(t,e,n,r)}function T5(t,e,n){return bm(t,G6(),e,n)}function A5(t,e,n){return bm(t,Z6(),e,n)}const Pi=Symbol("ordinal");function ym(t,e,n,{type:r,interval:i,domain:a,range:s,reverse:f,hint:c}){return i=Di(i,r),a===void 0&&(a=wm(n,i,t)),(r==="categorical"||r===Pi)&&(r="ordinal"),f&&(a=xa(a)),a=e.domain(a).domain(),s!==void 0&&(typeof s=="function"&&(s=s(a)),e.range(s)),{type:r,domain:a,range:s,scale:e,hint:c,interval:i}}function k5(t,e,{type:n,interval:r,domain:i,range:a,scheme:s,unknown:f,...c}){r=Di(r,n),i===void 0&&(i=wm(e,r,t));let u;if(kt.get(t)===Ro)u=N5(e),a=a===void 0?D5(u):Lt(a,Dc);else if(kt.get(t)===un&&(a===void 0&&(n==="ordinal"||n===Pi)&&(a=Kw(i,s),a!==void 0&&(s=void 0)),s===void 0&&a===void 0&&(s=n==="ordinal"?"turbo":"observable10"),s!==void 0))if(a!==void 0){const l=Fc(s),d=a[0],h=a[1]-a[0];a=({length:g})=>Ae(m=>l(d+h*m),g)}else a=lm(s);if(f===vf)throw new Error(`implicit unknown on ${t} scale is not supported`);return ym(t,uc().unknown(f),e,{...c,type:n,domain:i,range:a,hint:u})}function E5(t,e,{align:n=.5,padding:r=.5,...i}){return _m(C_().align(n).padding(r),e,i,t)}function C5(t,e,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=t==="fx"||t==="fy"?0:r,...s}){return _m(wo().align(n).paddingInner(i).paddingOuter(a),e,s,t)}function _m(t,e,n,r){let{round:i}=n;return i!==void 0&&t.round(i=!!i),t=ym(r,t,e,n),t.round=i,t}function wm(t,e,n){const r=new go;for(const{value:i,domain:a}of t){if(a!==void 0)return a();if(i!==void 0)for(const s of i)r.add(s)}if(e!==void 0){const[i,a]=_n(r).map(e.floor,e);return e.range(i,e.offset(a))}if(r.size>1e4&&kt.get(n)===Be)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Ys(r,je)}function Yl(t,e){let n;for(const{hint:r}of t){const i=r==null?void 0:r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function N5(t){return{fill:Yl(t,"fill"),stroke:Yl(t,"stroke")}}function D5(t){return Qt(t.fill)?T3:x3}function Lf(t,{label:e,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:s=n,round:f,nice:c,clamp:u,zero:l,align:d,padding:h,projection:g,facet:{label:m=e}={},...p}={}){const b={};for(const[y,_]of t){const M=p[y],w=xm(y,_,{round:kt.get(y)===Be?f:void 0,nice:c,clamp:u,zero:l,align:d,padding:h,projection:g,...M});if(w){let{label:S=y==="fx"||y==="fy"?m:e,percent:v,transform:T,inset:x,insetTop:N=x!==void 0?x:y==="y"?r:0,insetRight:E=x!==void 0?x:y==="x"?i:0,insetBottom:k=x!==void 0?x:y==="y"?a:0,insetLeft:U=x!==void 0?x:y==="x"?s:0}=M||{};if(T==null)T=void 0;else if(typeof T!="function")throw new Error("invalid scale transform; not a function");w.percent=!!v,w.label=S===void 0?L5(_,w):S,w.transform=T,y==="x"||y==="fx"?(w.insetLeft=+U,w.insetRight=+E):(y==="y"||y==="fy")&&(w.insetTop=+N,w.insetBottom=+k),b[y]=w}}return b}function Xl(t){const e={},n={scales:e};for(const[r,i]of Object.entries(t)){const{scale:a,type:s,interval:f,label:c}=i;e[r]=Am(i),n[r]=a,a.type=s,f!=null&&(a.interval=f),c!=null&&(a.label=c)}return n}function I5(t,e){const{x:n,y:r,fx:i,fy:a}=t,s=i||a?Rc(e):e;i&&Gl(i,s),a&&Zl(a,s);const f=i||a?vm(t,e):e;n&&Gl(n,f),r&&Zl(r,f)}function L5(t=[],e){let n;for(const{label:r}of t)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!tr(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function F5(t){return Math.sign(vr(t.domain()))*Math.sign(vr(t.range()))}function Rc(t){const{marginTop:e,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:s,facet:{marginTop:f,marginRight:c,marginBottom:u,marginLeft:l}}=t;return{marginTop:Math.max(e,f),marginRight:Math.max(n,c),marginBottom:Math.max(r,u),marginLeft:Math.max(i,l),width:a,height:s}}function vm({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:s,width:f,height:c}=Rc(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:s,width:t?t.scale.bandwidth()+s+i:f,height:e?e.scale.bandwidth()+r+a:c,facet:{width:f,height:c}}}function Gl(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:r}=t,{width:i,marginLeft:a=0,marginRight:s=0}=e,f=a+n,c=i-s-r;t.range=[f,Math.max(f,c)],tr(t)||(t.range=Sm(t)),t.scale.range(t.range)}Mm(t)}function Zl(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:r}=t,{height:i,marginTop:a=0,marginBottom:s=0}=e,f=a+n,c=i-s-r;t.range=[Math.max(f,c),f],tr(t)?t.range.reverse():t.range=Sm(t),t.scale.range(t.range)}Mm(t)}function Mm(t){t.round===void 0&&B5(t)&&O5(t)<=30&&t.scale.round(!0)}function O5({scale:t}){const e=t.domain().length,[n,r]=t.range(),i=t.paddingInner?t.paddingInner():1,a=t.paddingOuter?t.paddingOuter():t.padding(),s=e-i,f=Math.abs(r-n)/Math.max(1,s+a*2);return(f-Math.floor(f))*s}function Sm(t){const e=t.scale.domain().length+Tm(t);if(!(e>2))return t.range;const[n,r]=t.range;return Array.from({length:e},(i,a)=>n+a/(e-1)*(r-n))}function P5(t,e,n){return xm(t,n===void 0?void 0:[{hint:n}],{...e})}function xm(t,e=[],n={}){const r=R5(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&tr({type:r})){const i=e.map(({value:a})=>a).filter(a=>a!==void 0);i.some(ve)?wn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${or(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${or(r)}".`):i.some(pw)?wn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${or(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${or(r)}".`):i.some(bw)&&wn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${or(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${or(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Xi(e,n,yn);break;case"identity":switch(kt.get(t)){case Be:n=Xi(e,n,yn);break;case Ro:n=Xi(e,n,U5);break}break;case"utc":case"time":n=Xi(e,n,Yg);break}switch(r){case"diverging":return p5(t,e,n);case"diverging-sqrt":return b5(t,e,n);case"diverging-pow":return pm(t,e,n);case"diverging-log":return y5(t,e,n);case"diverging-symlog":return _5(t,e,n);case"categorical":case"ordinal":case Pi:return k5(t,e,n);case"cyclical":case"sequential":case"linear":return n5(t,e,n);case"sqrt":return r5(t,e,n);case"threshold":return Oc(t,e,n);case"quantile":return o5(t,e,n);case"quantize":return s5(t,e,n);case"pow":return gm(t,e,n);case"log":return i5(t,e,n);case"symlog":return a5(t,e,n);case"utc":return A5(t,e,n);case"time":return T5(t,e,n);case"point":return E5(t,e,n);case"band":return C5(t,e,n);case"identity":return c5(t);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function or(t){return typeof t=="symbol"?t.description:t}function Jl(t){return typeof t=="string"?`${t}`.toLowerCase():t}const Kl={toString:()=>"projection"};function R5(t,e,{type:n,domain:r,range:i,scheme:a,pivot:s,projection:f}){var l;if(n=Jl(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&f!=null&&(n=Kl);for(const d of e){const h=Jl(d.type);if(h!==void 0){if(n===void 0)n=h;else if(n!==h)throw new Error(`scale incompatible with channel: ${n} !== ${h}`)}}if(n===Kl)return;if(n!==void 0)return n;if(r===void 0&&!e.some(({value:d})=>d!==void 0))return;const c=kt.get(t);if(c===Ii)return"sqrt";if(c===Fi||c===Li)return"linear";if(c===Ro)return"ordinal";const u=(l=r??i)==null?void 0:l.length;if(u<2||u>2)return Ts(c);if(r!==void 0){if(Ol(r))return Ts(c);if(ve(r))return"utc"}else{const d=e.map(({value:h})=>h).filter(h=>h!==void 0);if(d.some(Ol))return Ts(c);if(d.some(ve))return"utc"}if(c===un){if(s!=null||t5(a))return"diverging";if(Jw(a))return"categorical"}return"linear"}function Ts(t){switch(t){case Be:return"point";case un:return Pi;default:return"ordinal"}}function tr({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===Pi}function Tm({type:t}){return t==="threshold"}function B5({type:t}){return t==="point"||t==="band"}function Tr(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let r=1,i=e.length;r<i;++r)if(t(e[r])-n)return!1;return!0}function Xi(t,{domain:e,...n},r){var i;for(const a of t)a.value!==void 0&&(e===void 0&&(e=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:e===void 0?e:r(e),...n}}function U5(t){return Lt(t,Dc)}function Ff(t={}){let e;for(const n in t)if(kt.has(n)&&Ka(t[n])){if(e!==void 0)throw new Error("ambiguous scale definition; multiple scales found");e=Am(P5(n,t[n]))}if(e===void 0)throw new Error("invalid scale definition; no scale found");return e}function z5(t){return e=>{if(!kt.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function Am({scale:t,type:e,domain:n,range:r,interpolate:i,interval:a,transform:s,percent:f,pivot:c}){if(e==="identity")return{type:"identity",apply:l=>l,invert:l=>l};const u=t.unknown?t.unknown():void 0;return{type:e,domain:li(n),...r!==void 0&&{range:li(r)},...s!==void 0&&{transform:s},...f&&{percent:f},...u!==void 0&&{unknown:u},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...c!==void 0&&{pivot:c,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:l=>t(l),...t.invert&&{invert:l=>t.invert(l)}}}function q5(t,e){const{fx:n,fy:r}=Lf(t,e),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?E2(i,a).map(([s,f],c)=>({x:s,y:f,i:c})):i?i.map((s,f)=>({x:s,i:f})):a?a.map((s,f)=>({y:s,i:f})):void 0}function j5(t,{x:e,y:n}){return e&&(e=Of(e)),n&&(n=Of(n)),t.filter(e&&n?r=>e.has(r.x)&&n.has(r.y):e?r=>e.has(r.x):r=>n.has(r.y)).sort(e&&n?(r,i)=>e.get(r.x)-e.get(i.x)||n.get(r.y)-n.get(i.y):e?(r,i)=>e.get(r.x)-e.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Bc(t,{fx:e,fy:n}){const r=En(t),i=e==null?void 0:e.value,a=n==null?void 0:n.value;return e&&n?Qr(r,s=>(s.fx=i[s[0]],s.fy=a[s[0]],s),s=>i[s],s=>a[s]):e?Qr(r,s=>(s.fx=i[s[0]],s),s=>i[s]):Qr(r,s=>(s.fy=a[s[0]],s),s=>a[s])}function $5(t,e,{marginTop:n,marginLeft:r}){const i=t?({x:s})=>t(s)-r:()=>0,a=e?({y:s})=>e(s)-n:()=>0;return function(s){this.tagName==="svg"?(this.setAttribute("x",i(s)),this.setAttribute("y",a(s))):this.setAttribute("transform",`translate(${i(s)},${a(s)})`)}}function W5(t){const e=[],n=new Uint32Array(jn(t,r=>r.length));for(const r of t){let i=0;for(const a of t)r!==a&&(n.set(a,i),i+=a.length);e.push(n.slice(0,i))}return e}const V5=new Map([["top",As],["right",Cs],["bottom",ks],["left",Es],["top-left",Gi(As,Es)],["top-right",Gi(As,Cs)],["bottom-left",Gi(ks,Es)],["bottom-right",Gi(ks,Cs)],["top-empty",X5],["right-empty",J5],["bottom-empty",G5],["left-empty",Z5],["empty",K5]]);function H5(t){if(t==null)return null;const e=V5.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Ql=new WeakMap;function Of(t){let e=Ql.get(t);return e||Ql.set(t,e=new qn(Lt(t,(n,r)=>[n,r]))),e}function Cn(t,e){return Of(t).get(e)}function Y5(t,e,n){return e=sn(e),n=sn(n),t.find(r=>Object.is(sn(r.x),e)&&Object.is(sn(r.y),n))}function zo(t,e,n){var r;return(r=Y5(t,e,n))==null?void 0:r.empty}function As(t,{y:e},{y:n}){return e?Cn(e,n)===0:!0}function ks(t,{y:e},{y:n}){return e?Cn(e,n)===e.length-1:!0}function Es(t,{x:e},{x:n}){return e?Cn(e,n)===0:!0}function Cs(t,{x:e},{x:n}){return e?Cn(e,n)===e.length-1:!0}function X5(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Cn(e,r);if(a>0)return zo(t,n,e[a-1])}function G5(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Cn(e,r);if(a<e.length-1)return zo(t,n,e[a+1])}function Z5(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Cn(e,n);if(a>0)return zo(t,e[a-1],r)}function J5(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const a=Cn(e,n);if(a<e.length-1)return zo(t,e[a+1],r)}function K5(t,e,{empty:n}){return n}function Gi(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Ns(t,{channels:{fx:e,fy:n},groups:r}){return e&&n?t.map(({x:i,y:a})=>{var s;return((s=r.get(i))==null?void 0:s.get(a))??[]}):e?t.map(({x:i})=>r.get(i)??[]):t.map(({y:i})=>r.get(i)??[])}const km=Math.PI,Ke=2*km,Ds=.618;function Q5({projection:t,inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:a=e}={},s){if(t==null)return;if(typeof t.stream=="function")return t;let f,c,u="frame";if(Kn(t)){let S;if({type:t,domain:c,inset:S,insetTop:n=S!==void 0?S:n,insetRight:r=S!==void 0?S:r,insetBottom:i=S!==void 0?S:i,insetLeft:a=S!==void 0?S:a,clip:u=u,...f}=t,t==null)return}typeof t!="function"&&({type:t}=Pf(t));const{width:l,height:d,marginLeft:h,marginRight:g,marginTop:m,marginBottom:p}=s,b=l-h-g-a-r,y=d-m-p-n-i;if(t=t==null?void 0:t({width:b,height:y,clip:u,...f}),t==null)return;u=t4(u,h,m,l-g,d-p);let _=h+a,M=m+n,w;if(c!=null){const[[S,v],[T,x]]=oc(t).bounds(c),N=Math.min(b/(T-S),y/(x-v));N>0?(_-=(N*(S+T)-b)/2,M-=(N*(v+x)-y)/2,w=Ua({point(E,k){this.stream.point(E*N+_,k*N+M)}})):wn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=_===0&&M===0?Em():Ua({point(S,v){this.stream.point(S+_,v+M)}})),{stream:S=>t.stream(w.stream(u(S)))}}function Pf(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Se(g_,.7463,.4673);case"albers":return Zi(m0,.7463,.4673);case"azimuthal-equal-area":return Se(m_,4,4);case"azimuthal-equidistant":return Se(p_,Ke,Ke);case"conic-conformal":return Zi(__,Ke,Ke);case"conic-equal-area":return Zi(za,6.1702,2.9781);case"conic-equidistant":return Zi(M_,7.312,3.6282);case"equal-earth":return Se(x_,5.4133,2.6347);case"equirectangular":return Se(w_,Ke,km);case"gnomonic":return Se(T_,3.4641,3.4641);case"identity":return{type:Em};case"reflect-y":return{type:e4};case"mercator":return Se(b_,Ke,Ke);case"orthographic":return Se(A_,2,2);case"stereographic":return Se(k_,2,2);case"transverse-mercator":return Se(E_,Ke,Ke);default:throw new Error(`unknown projection type: ${t}`)}}function t4(t,e,n,r,i){if(t===!1||t==null||typeof t=="number")return a=>a;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return Qd(e,n,r,i);default:throw new Error(`unknown projection clip type: ${t}`)}}function Se(t,e,n){return{type:({width:r,height:i,rotate:a,precision:s=.15,clip:f})=>{var u,l,d;const c=t();return s!=null&&((u=c.precision)==null||u.call(c,s)),a!=null&&((l=c.rotate)==null||l.call(c,a)),typeof f=="number"&&((d=c.clipAngle)==null||d.call(c,f)),r!=null&&(c.scale(Math.min(r/e,i/n)),c.translate([r/2,i/2])),c},aspectRatio:n/e}}function Zi(t,e,n){const{type:r,aspectRatio:i}=Se(t,e,n);return{type:a=>{const{parallels:s,domain:f,width:c,height:u}=a,l=r(a);return s!=null&&(l.parallels(s),f===void 0&&c!=null&&l.fitSize([c,u],{type:"Sphere"})),l},aspectRatio:i}}const Em=on({stream:t=>t}),e4=on(Ua({point(t,e){this.stream.point(t,-e)}}));function n4(t,e,n,r){const i=n[t],a=n[e],s=i.length,f=n[t]=new Float64Array(s).fill(NaN),c=n[e]=new Float64Array(s).fill(NaN);let u;const l=r.stream({point(d,h){f[u]=d,c[u]=h}});for(u=0;u<s;++u)l.point(i[u],a[u])}function r4({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(Kn(t)&&(t=t.type),t!=null)}function i4(t){if(typeof(t==null?void 0:t.stream)=="function")return Ds;if(Kn(t)){let e,n;if({domain:e,type:t,...n}=t,e!=null&&t!=null){const r=typeof t=="string"?Pf(t).type:t,[[i,a],[s,f]]=oc(r({...n,width:100,height:100})).bounds(e),c=(f-a)/(s-i);return c&&isFinite(c)?c<.2?.2:c>5?5:c:Ds}}if(t!=null){if(typeof t!="function"){const{aspectRatio:e}=Pf(t);if(e)return e}return Ds}}function a4(t){const e=[],n=[],r={scale:"x",value:e},i={scale:"y",value:n},a={point(s,f){e.push(s),n.push(f)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const s of t.value)Fn(s,a);return[r,i]}function o4({x:t,y:e}){if(t||e)return t??(t=n=>n),e??(e=n=>n),Ua({point(n,r){this.stream.point(t(n),e(r))}})}function Uc(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:em(n)}}function Pt(t,{document:e}){return jt(pd(t).call(e.documentElement))}const Rf=Symbol("unset");function zc(t){return(t.length===1?s4:f4)(t)}function s4(t){let e,n=Rf;return r=>(Object.is(n,r)||(n=r,e=t(r)),e)}function f4(t){let e,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>!Object.is(i,r[a])))&&(n=r,e=t(...r)),e)}const c4=zc(t=>new Intl.NumberFormat(t));zc((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{month:e}}));zc((t,e)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...e&&{weekday:e}}));function u4(t="en-US"){const e=c4(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function l4(t){return $3(t,"Invalid Date")}function h4(t="en-US"){const e=u4(t);return n=>(n instanceof Date?l4:typeof n=="number"?e:$t)(n)}const Ar=h4(),oe=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let d4=0;function Cm(){return`plot-clip-${++d4}`}function g4(t,{title:e,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:s,fill:f,fillOpacity:c,stroke:u,strokeWidth:l,strokeOpacity:d,strokeLinejoin:h,strokeLinecap:g,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:b,opacity:y,mixBlendMode:_,imageFilter:M,paintOrder:w,pointerEvents:S,shapeRendering:v,channels:T},{ariaLabel:x,fill:N="currentColor",fillOpacity:E,stroke:k="none",strokeOpacity:U,strokeWidth:R,strokeLinecap:B,strokeLinejoin:A,strokeMiterlimit:P,paintOrder:C}){N===null&&(f=null,c=null),k===null&&(u=null,d=null),Qt(N)?!Qt(k)&&(!Qt(f)||T!=null&&T.fill)&&(k="none"):Qt(k)&&(!Qt(u)||T!=null&&T.stroke)&&(N="none");const[Y,X]=Hn(f,N),[L,z]=Xt(c,E),[W,q]=Hn(u,k),[I,tt]=Xt(d,U),[nt,j]=Xt(y);di(q)||(l===void 0&&(l=R),g===void 0&&(g=B),h===void 0&&(h=A),m===void 0&&!vw(h)&&(m=P),!di(X)&&w===void 0&&(w=C));const[Q,O]=Xt(l);return N!==null&&(t.fill=Ut(X,"currentColor"),t.fillOpacity=jr(z,1)),k!==null&&(t.stroke=Ut(q,"none"),t.strokeWidth=jr(O,1),t.strokeOpacity=jr(tt,1),t.strokeLinejoin=Ut(h,"miter"),t.strokeLinecap=Ut(g,"butt"),t.strokeMiterlimit=jr(m,4),t.strokeDasharray=Ut(p,"none"),t.strokeDashoffset=Ut(b,"0")),t.target=$t(s),t.ariaLabel=$t(x),t.ariaDescription=$t(i),t.ariaHidden=$t(a),t.opacity=jr(j,1),t.mixBlendMode=Ut(_,"normal"),t.imageFilter=Ut(M,"none"),t.paintOrder=Ut(w,"normal"),t.pointerEvents=Ut(S,"auto"),t.shapeRendering=Ut(v,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:Y,scale:"auto",optional:!0},fillOpacity:{value:L,scale:"auto",optional:!0},stroke:{value:W,scale:"auto",optional:!0},strokeOpacity:{value:I,scale:"auto",optional:!0},strokeWidth:{value:Q,optional:!0},opacity:{value:nt,scale:"auto",optional:!0}}}function m4(t,e){e&&t.filter(n=>wc(e[n])).append("title").call(b4,e)}function p4(t,e){e&&t.filter(([n])=>wc(e[n])).append("title").call(y4,e)}function b4(t,e){e&&t.text(n=>Ar(e[n]))}function y4(t,e){e&&t.text(([n])=>Ar(e[n]))}function Ce(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:s,stroke:f,strokeOpacity:c,strokeWidth:u,opacity:l,href:d}){r&&ft(t,"aria-label",h=>r[h]),a&&ft(t,"fill",h=>a[h]),s&&ft(t,"fill-opacity",h=>s[h]),f&&ft(t,"stroke",h=>f[h]),c&&ft(t,"stroke-opacity",h=>c[h]),u&&ft(t,"stroke-width",h=>u[h]),l&&ft(t,"opacity",h=>l[h]),d&&Nm(t,h=>d[h],e),n||m4(t,i)}function _4(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:s,stroke:f,strokeOpacity:c,strokeWidth:u,opacity:l,href:d}){r&&ft(t,"aria-label",([h])=>r[h]),a&&ft(t,"fill",([h])=>a[h]),s&&ft(t,"fill-opacity",([h])=>s[h]),f&&ft(t,"stroke",([h])=>f[h]),c&&ft(t,"stroke-opacity",([h])=>c[h]),u&&ft(t,"stroke-width",([h])=>u[h]),l&&ft(t,"opacity",([h])=>l[h]),d&&Nm(t,([h])=>d[h],e),n||p4(t,i)}function w4({ariaLabel:t,title:e,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:s,opacity:f,href:c},{tip:u}){return[t,u?void 0:e,n,r,i,a,s,f,c].filter(l=>l!==void 0)}function v4(t,e,n){const r=Jf(t,i=>e[i]);return n===void 0&&r.size>1+t.length>>1&&wn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*M4(t,e,n,r){const{z:i}=n,{z:a}=r,s=w4(r,n),f=[...e,...s];for(const c of a?v4(t,a,i):[t]){let u,l;t:for(const d of c){for(const h of f)if(!Tn(h[d])){l&&l.push(-1);continue t}if(u===void 0){l&&(yield l),u=s.map(h=>sn(h[d])),l=[d];continue}l.push(d);for(let h=0;h<s.length;++h)if(sn(s[h][d])!==u[h]){yield l,u=s.map(m=>sn(m[d])),l=[d];continue t}}l&&(yield l)}}function S4(t,e,n,r){let i;const{clip:a=r.clip}=e;a==="frame"?(t=Pt("svg:g",r).each(function(){this.appendChild(t.node()),t.node=()=>this}),i=T4(r,n)):a&&(i=k4(a,r)),ft(t,"aria-label",e.ariaLabel),ft(t,"aria-description",e.ariaDescription),ft(t,"aria-hidden",e.ariaHidden),ft(t,"clip-path",i)}function x4(t){const e=new WeakMap;return(n,r)=>{let i=e.get(n);if(!i){const a=Cm();jt(n.ownerSVGElement).append("clipPath").attr("id",a).call(t,n,r),e.set(n,i=`url(#${a})`)}return i}}const T4=x4((t,e,n)=>{const{width:r,height:i,marginLeft:a,marginRight:s,marginTop:f,marginBottom:c}=n;t.append("rect").attr("x",a).attr("y",f).attr("width",r-s-a).attr("height",i-f-c)}),th=new WeakMap,A4={type:"Sphere"};function k4(t,e){let n,r;if((n=th.get(e))||th.set(e,n=new WeakMap),t.type==="Sphere"&&(t=A4),!(r=n.get(t))){const i=Cm();jt(e.ownerSVGElement).append("clipPath").attr("id",i).append("path").attr("d",e.path()(t)),n.set(t,r=`url(#${i})`)}return r}function De(t,e,n,r){S4(t,e,n,r),ft(t,"class",e.className),ft(t,"fill",e.fill),ft(t,"fill-opacity",e.fillOpacity),ft(t,"stroke",e.stroke),ft(t,"stroke-width",e.strokeWidth),ft(t,"stroke-opacity",e.strokeOpacity),ft(t,"stroke-linejoin",e.strokeLinejoin),ft(t,"stroke-linecap",e.strokeLinecap),ft(t,"stroke-miterlimit",e.strokeMiterlimit),ft(t,"stroke-dasharray",e.strokeDasharray),ft(t,"stroke-dashoffset",e.strokeDashoffset),ft(t,"shape-rendering",e.shapeRendering),ft(t,"filter",e.imageFilter),ft(t,"paint-order",e.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=e;ft(t,"pointer-events",i)}function ce(t,e){E4(t,"mix-blend-mode",e.mixBlendMode),ft(t,"opacity",e.opacity)}function Nm(t,e,n){t.each(function(r){const i=e(r);if(i!=null){const a=this.ownerDocument.createElementNS(ba.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(ba.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function ft(t,e,n){n!=null&&t.attr(e,n)}function E4(t,e,n){n!=null&&t.style(e,n)}function Ie(t,e,{x:n,y:r},i=oe,a=oe){i+=e.dx,a+=e.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&t.attr("transform",`translate(${i},${a})`)}function Ut(t,e){if((t=$t(t))!==e)return t}function jr(t,e){if((t=Wt(t))!==e)return t}const C4=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function qc(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!C4.test(t))throw new Error(`invalid class name: ${t}`);return t}function jc(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function Ri({frameAnchor:t},{width:e,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:s}){return[/left$/.test(t)?s:/right$/.test(t)?e-i:(s+e-i)/2,/^top/.test(t)?r:/^bottom/.test(t)?n-a:(r+n-a)/2]}class ie{constructor(e,n={},r={},i){const{facet:a="auto",facetAnchor:s,fx:f,fy:c,sort:u,dx:l=0,dy:d=0,margin:h=0,marginTop:g=h,marginRight:m=h,marginBottom:p=h,marginLeft:b=h,className:y,clip:_=i==null?void 0:i.clip,channels:M,tip:w,render:S}=r;if(this.data=e,this.sort=Sr(u)?u:null,this.initializer=xr(r).initializer,this.transform=this.initializer?r.transform:Ic(r).transform,a===null||a===!1?this.facet=null:(this.facet=Ne(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=e===ha&&typeof f=="string"?[f]:f,this.fy=e===ha&&typeof c=="string"?[c]:c),this.facetAnchor=H5(s),n=tm(n),M!==void 0&&(n={...N4(M),...n}),i!==void 0&&(n={...g4(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([v,T])=>{if(Lo(T.value)){const{value:x,label:N=T.label,scale:E=T.scale}=T.value;T={...T,label:N,scale:E,value:x}}if(e===ha&&typeof T.value=="string"){const{value:x}=T;T={...T,value:[x]}}return[v,T]}).filter(([v,{value:T,optional:x}])=>{if(T!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${v}`)})),this.dx=+l,this.dy=+d,this.marginTop=+g,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+b,this.clip=em(_),this.tip=D4(w),this.className=$t(y),this.facet==="super"){if(f||c)throw new Error("super-faceting cannot use fx or fy");for(const v in this.channels){const{scale:T}=n[v];if(!(T!=="x"&&T!=="y"))throw new Error("super-faceting cannot use x or y")}}S!=null&&(this.render=Im(S,this.render))}initialize(e,n,r){let i=Mr(this.data);e===void 0&&i!=null&&(e=[En(i)]);const a=e;this.transform!=null&&({facets:e,data:i}=this.transform(i,e,r),i=Mr(i)),e!==void 0&&(e.original=a);const s=Vw(this.channels,i);return this.sort!=null&&Yw(i,e,s,n,this.sort),{data:i,facets:e,channels:s}}filter(e,n,r){for(const i in n){const{filter:a=Tn}=n[i];if(a!==null){const s=r[i];e=e.filter(f=>a(s[f]))}}return e}project(e,n,r){for(const i in e)if(e[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in e&&e[a].scale==="y"&&n4(i,a,n,r.projection)}}scale(e,n,r){const i=Hw(e,n);return r.projection&&this.project(e,i,r),i}}function Dm(...t){return t.plot=ie.prototype.plot,t}function Im(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,r,i,a,s,f){return t.call(this,n,r,i,a,s,(c,u,l,d,h)=>e.call(this,c,u,l,d,h,f))}}function N4(t){return Object.fromEntries(Object.entries(tm(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:Fo(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function D4(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Ne(t,"tip",["x","y","xy"]):t}function $c(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:Kn(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}function I4(t,e,n={}){let r=.5-oe,i=.5+oe,a=.5+oe,s=.5-oe;for(const{marginTop:p,marginRight:b,marginBottom:y,marginLeft:_}of e)p>r&&(r=p),b>i&&(i=b),y>a&&(a=y),_>s&&(s=_);let{margin:f,marginTop:c=f!==void 0?f:r,marginRight:u=f!==void 0?f:i,marginBottom:l=f!==void 0?f:a,marginLeft:d=f!==void 0?f:s}=n;c=+c,u=+u,l=+l,d=+d;let{width:h=640,height:g=L4(t,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:s})+Math.max(0,c-r+l-a)}=n;h=+h,g=+g;const m={width:h,height:g,marginTop:c,marginRight:u,marginBottom:l,marginLeft:d};if(t.fx||t.fy){let{margin:p,marginTop:b=p!==void 0?p:c,marginRight:y=p!==void 0?p:u,marginBottom:_=p!==void 0?p:l,marginLeft:M=p!==void 0?p:d}=n.facet??{};b=+b,y=+y,_=+_,M=+M,m.facet={marginTop:b,marginRight:y,marginBottom:_,marginLeft:M}}return m}function L4({x:t,y:e,fy:n,fx:r},{projection:i,aspectRatio:a},{width:s,marginTopDefault:f,marginRightDefault:c,marginBottomDefault:u,marginLeftDefault:l}){const d=n&&n.scale.domain().length||1,h=i4(i);if(h){const m=r?r.scale.domain().length:1,p=(1.1*d-.1)/(1.1*m-.1)*h,b=Math.max(.1,Math.min(10,p));return Math.round((s-l-c)*b+f+u)}const g=e?tr(e)?e.scale.domain().length||1:Math.max(7,17/d):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=eh("y",e)/(eh("x",t)*a),p=r?r.scale.bandwidth():1,b=n?n.scale.bandwidth():1,y=p*(s-l-c)-t.insetLeft-t.insetRight;return(m*y+e.insetTop+e.insetBottom)/b+f+u}return!!(e||n)*Math.max(1,Math.min(60,g*d))*20+!!r*30+60}function eh(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:r}=e;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const f=e.scale.exponent();i=c=>Math.pow(c,f);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[a,s]=_n(r);return Math.abs(i(s)-i(a))}const nh=new WeakMap;function Wc(t,e,{x:n,y:r,px:i,py:a,maxRadius:s=40,channels:f,render:c,...u}={}){return s=+s,i!=null&&(n??(n=null),f={...f,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),f={...f,py:{value:a,scale:"y"}}),{x:n,y:r,channels:f,...u,render:Im(function(l,d,h,g,m,p){m={...m,pointerSticky:!1};const b=m.ownerSVGElement,{data:y}=m.getMarkState(this);let _=nh.get(b);_||nh.set(b,_={sticky:!1,roots:[],renders:[]});let M=_.renders.push(q)-1;const{x:w,y:S,fx:v,fy:T}=d;let x=v?v(l.fx)-g.marginLeft:0,N=T?T(l.fy)-g.marginTop:0;w!=null&&w.bandwidth&&(x+=w.bandwidth()/2),S!=null&&S.bandwidth&&(N+=S.bandwidth()/2);const E=l.fi!=null;let k;if(E){let j=_.facetStates;j||(_.facetStates=j=new Map),k=j.get(this),k||j.set(this,k=new Map)}const[U,R]=Ri(this,g),{px:B,py:A}=h,P=B?j=>B[j]:Lm(h,U),C=A?j=>A[j]:Fm(h,R);let Y,X,L,z;function W(j,Q){if(E)if(z&&(z=cancelAnimationFrame(z)),j==null)k.delete(l.fi);else{k.set(l.fi,Q),z=requestAnimationFrame(()=>{z=null;for(const[O,G]of k)if(G<Q||G===Q&&O<l.fi){j=null;break}q(j)});return}q(j)}function q(j){if(Y===j&&L===_.sticky)return;Y=j,L=m.pointerSticky=_.sticky;const Q=Y==null?[]:[Y];E&&(Q.fx=l.fx,Q.fy=l.fy,Q.fi=l.fi);const O=p(Q,d,h,g,m);if(X){if(E){const G=X.parentNode,Z=X.getAttribute("transform"),F=O.getAttribute("transform");Z?O.setAttribute("transform",Z):O.removeAttribute("transform"),F?G.setAttribute("transform",F):G.removeAttribute("transform"),O.removeAttribute("aria-label"),O.removeAttribute("aria-description"),O.removeAttribute("aria-hidden")}X.replaceWith(O)}if(_.roots[M]=X=O,!(Y==null&&(k==null?void 0:k.size)>1)){const G=Y==null?null:Zn(y)?y[Y]:y.get(Y);m.dispatchValue(G)}return O}function I(j){if(_.sticky||j.pointerType==="mouse"&&j.buttons===1)return;let[Q,O]=Qs(j);Q-=x,O-=N;const G=Q<g.marginLeft||Q>g.width-g.marginRight?1:t,Z=O<g.marginTop||O>g.height-g.marginBottom?1:e;let F=null,mt=s*s;for(const rt of l){const yt=G*(P(rt)-Q),St=Z*(C(rt)-O),J=yt*yt+St*St;J<=mt&&(F=rt,mt=J)}if(F!=null&&(t!==1||e!==1)){const rt=P(F)-Q,yt=C(F)-O;mt=rt*rt+yt*yt}W(F,mt)}function tt(j){j.pointerType==="mouse"&&Y!=null&&(_.sticky&&_.roots.some(Q=>Q==null?void 0:Q.contains(j.target))||(_.sticky?(_.sticky=!1,_.renders.forEach(Q=>Q(null))):(_.sticky=!0,q(Y)),j.stopImmediatePropagation()))}function nt(j){j.pointerType==="mouse"&&(_.sticky||W(null))}return b.addEventListener("pointerenter",I),b.addEventListener("pointermove",I),b.addEventListener("pointerdown",tt),b.addEventListener("pointerleave",nt),q(null)},c)}}function F4(t){return Wc(1,1,t)}function O4(t){return Wc(1,.01,t)}function rh(t){return Wc(.01,1,t)}function Lm({x1:t,x2:e,x:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function Fm({y1:t,y2:e,y:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function Om(t){return tr(t)&&t.interval===void 0?void 0:"tabular-nums"}function P4(t,e){let{label:n=t.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:s=18,marginRight:f=0,marginBottom:c=16+r,marginLeft:u=0,style:l,ticks:d=(i-u-f)/64,tickFormat:h,fontVariant:g=Om(t),round:m=!0,opacity:p,className:b}=e;const y=Uc(e);b=qc(b),p=Xt(p)[1],h===null&&(h=()=>null);const _=Pt("svg",y).attr("class",`${b}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(U=>U.append("style").text(`:where(.${b}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${b}-ramp text) {
  white-space: pre;
}`)).call(jc,l);let M=U=>U.selectAll(".tick line").attr("y1",s+c-a),w;const S=m?(U,R)=>U.rangeRound(R):(U,R)=>U.range(R),{type:v,domain:T,range:x,interpolate:N,scale:E,pivot:k}=t;if(N){const U=x===void 0?N:po(N.length===1?Pc(N):N,x);w=S(E.copy(),Ae(Mn(u,i-f),Math.min(T.length+(k!==void 0),x===void 0?1/0:x.length)));const R=256,B=y.document.createElement("canvas");B.width=R,B.height=1;const A=B.getContext("2d");for(let P=0,C=R-1;P<R;++P)A.fillStyle=U(P/C),A.fillRect(P,0,1,1);_.append("image").attr("opacity",p).attr("x",u).attr("y",s).attr("width",i-u-f).attr("height",a-s-c).attr("preserveAspectRatio","none").attr("xlink:href",B.toDataURL())}else if(v==="threshold"){const U=T,R=h===void 0?B=>B:typeof h=="string"?Ir(h):h;w=S(lc().domain([-1,x.length-1]),[u,i-f]),_.append("g").attr("fill-opacity",p).selectAll().data(x).enter().append("rect").attr("x",(B,A)=>w(A-1)).attr("y",s).attr("width",(B,A)=>w(A)-w(A-1)).attr("height",a-s-c).attr("fill",B=>B),d=Lt(U,(B,A)=>A),h=B=>R(U[B],B)}else w=S(wo().domain(T),[u,i-f]),_.append("g").attr("fill-opacity",p).selectAll().data(T).enter().append("rect").attr("x",w).attr("y",s).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",a-s-c).attr("fill",E),M=()=>{};return _.append("g").attr("transform",`translate(0,${a-c})`).call(J2(w).ticks(Array.isArray(d)?null:d,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(d)?d:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ut(g,"normal")).call(M).call(U=>U.select(".domain").remove()),n!==void 0&&_.append("text").attr("x",u).attr("y",s-6).attr("fill","currentColor").attr("font-weight","bold").text(n),_.node()}const Pm=Math.PI/180;function qo(t,{marker:e,markerStart:n=e,markerMid:r=e,markerEnd:i=e}={}){t.markerStart=Is(n),t.markerMid=Is(r),t.markerEnd=Is(i)}function Is(t){if(t==null||t===!1)return null;if(t===!0)return ah;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return ih("auto");case"arrow-reverse":return ih("auto-start-reverse");case"dot":return R4;case"circle":case"circle-fill":return ah;case"circle-stroke":return B4;case"tick":return Ls("auto");case"tick-x":return Ls(90);case"tick-y":return Ls(0)}throw new Error(`invalid marker: ${t}`)}function ih(t){return(e,n)=>Pt("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function R4(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function ah(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function B4(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Ls(t){return(e,n)=>Pt("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let U4=0;function Vc(t,e,{stroke:n},r){return Bm(t,e,n&&(i=>n[i]),null,r)}function z4(t,e,{stroke:n,z:r},i){return Bm(t,e,n&&(([a])=>n[a]),r,i)}const Bf=1,Rm=2;function q4(t,e){const n=new Uint8Array(e.length),r=t.data().filter(a=>a.length>1),i=r.length;for(let a=0,s=Rf;a<i;++a){const f=r[a];if(f.length>1){const c=f[0];s!==(s=sn(e[c]))&&(n[c]|=Bf)}}for(let a=i-1,s=Rf;a>=0;--a){const f=r[a];if(f.length>1){const c=f[0];s!==(s=sn(e[c]))&&(n[c]|=Rm)}}return([a])=>n[a]}function Bm(t,{markerStart:e,markerMid:n,markerEnd:r,stroke:i},a=()=>i,s,f){if(!e&&!n&&!r)return;const c=new Map,u=s&&q4(t,s);function l(d,h,g){return function(m){if(g&&!g(m))return;const p=a(m);let b=c.get(h);b||c.set(h,b=new Map);let y=b.get(p);if(!y){const _=this.parentNode.insertBefore(h(p,f),this),M=`plot-marker-${++U4}`;_.setAttribute("id",M),b.set(p,y=`url(#${M})`)}this.setAttribute(d,y)}}e&&t.each(l("marker-start",e,u&&(d=>u(d)&Bf))),n&&u&&t.each(l("marker-start",n,d=>!(u(d)&Bf))),n&&t.each(l("marker-mid",n)),r&&t.each(l("marker-end",r,u&&(d=>u(d)&Rm)))}function Hc({inset:t,insetLeft:e,insetRight:n,...r}={}){return[e,n]=Um(t,e,n),{inset:t,insetLeft:e,insetRight:n,...r}}function Yc({inset:t,insetTop:e,insetBottom:n,...r}={}){return[e,n]=Um(t,e,n),{inset:t,insetTop:e,insetBottom:n,...r}}function Um(t,e,n){return t===void 0&&e===void 0&&n===void 0?oe?[1,0]:[.5,.5]:[e,n]}function zm(t,{interval:e}){return t={...Fo(t)},t.interval=Ec(t.interval===void 0?e:t.interval),t}function jo(t,e,n,r){const{[t]:i,[`${t}1`]:a,[`${t}2`]:s}=n,{value:f,interval:c}=zm(i,n);if(f==null||c==null&&!r)return n;const u=Ni(i);if(c==null){let g;const m={transform:p=>g||(g=_e(p,f)),label:u};return{...n,[t]:void 0,[`${t}1`]:a===void 0?m:a,[`${t}2`]:s===void 0&&!(a===s&&r)?m:s}}let l,d;function h(g){return d!==void 0&&g===l?d:d=Lt(_e(l=g,f),m=>c.floor(m))}return e({...n,[t]:void 0,[`${t}1`]:a===void 0?{transform:h,label:u}:a,[`${t}2`]:s===void 0?{transform:g=>h(g).map(m=>c.offset(m)),label:u}:s})}function qm(t,e,n){const{[t]:r}=n,{value:i,interval:a}=zm(r,n);return i==null||a==null?n:e({...n,[t]:{label:Ni(r),transform:s=>{const f=Lt(_e(s,i),u=>a.floor(u)),c=f.map(u=>a.offset(u));return f.map(ve(f)?(u,l)=>u==null||isNaN(u=+u)||(l=c[l],l==null)||isNaN(l=+l)?void 0:new Date((u+l)/2):(u,l)=>u==null||(l=c[l],l==null)?NaN:(+u+ +l)/2)}}})}function j4(t={}){return jo("x",Hc,t,!0)}function jm(t={}){return jo("y",Yc,t,!0)}function $4(t={}){return jo("x",Hc,t)}function W4(t={}){return jo("y",Yc,t)}function V4(t={}){return qm("x",Hc,t)}function H4(t={}){return qm("y",Yc,t)}const $m={ariaLabel:"rule",fill:null,stroke:"currentColor"};class Y4 extends ie{constructor(e,n={}){const{x:r,y1:i,y2:a,inset:s=0,insetTop:f=s,insetBottom:c=s}=n;super(e,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},$c(n,"x"),$m),this.insetTop=Wt(f),this.insetBottom=Wt(c),qo(this,n)}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y1:u,y2:l}=r,{width:d,height:h,marginTop:g,marginRight:m,marginLeft:p,marginBottom:b}=i,{insetTop:y,insetBottom:_}=this;return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,{x:c&&s},oe,0).call(M=>M.selectAll().data(e).enter().append("line").call(ce,this).attr("x1",c?w=>c[w]:(p+d-m)/2).attr("x2",c?w=>c[w]:(p+d-m)/2).attr("y1",u&&!Tr(f)?w=>u[w]+y:g+y).attr("y2",l&&!Tr(f)?f.bandwidth?w=>l[w]+f.bandwidth()-_:w=>l[w]-_:h-b-_).call(Ce,this,r).call(Vc,this,r,a)).node()}}class X4 extends ie{constructor(e,n={}){const{x1:r,x2:i,y:a,inset:s=0,insetRight:f=s,insetLeft:c=s}=n;super(e,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},$c(n,"y"),$m),this.insetRight=Wt(f),this.insetLeft=Wt(c),qo(this,n)}render(e,n,r,i,a){const{x:s,y:f}=n,{y:c,x1:u,x2:l}=r,{width:d,height:h,marginTop:g,marginRight:m,marginLeft:p,marginBottom:b}=i,{insetLeft:y,insetRight:_}=this;return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,{y:c&&f},0,oe).call(M=>M.selectAll().data(e).enter().append("line").call(ce,this).attr("x1",u&&!Tr(s)?w=>u[w]+y:p+y).attr("x2",l&&!Tr(s)?s.bandwidth?w=>l[w]+s.bandwidth()-_:w=>l[w]-_:d-m-_).attr("y1",c?w=>c[w]:(g+h-b)/2).attr("y2",c?w=>c[w]:(g+h-b)/2).call(Ce,this,r).call(Vc,this,r,a)).node()}}function Xc(t,e){let{x:n=Me,y:r,y1:i,y2:a,...s}=W4(e);return[i,a]=Wm(r,i,a),new Y4(t,{...s,x:n,y1:i,y2:a})}function Gc(t,e){let{y:n=Me,x:r,x1:i,x2:a,...s}=$4(e);return[i,a]=Wm(r,i,a),new X4(t,{...s,y:n,x1:i,x2:a})}function Wm(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function Zc(t,...e){let n=e.length;for(let r=0,i=!0;r<n;++r)typeof e[r]!="function"&&(i&&(t=t.slice(),i=!1),t.splice(r,2,t[r]+e[r]+t[r+1]),e.splice(r,1),--r,--n);return r=>{let i=t[0];for(let a=0;a<n;++a)i+=e[a](r)+t[a+1];return i}}const G4={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},Vm="­";class Jc extends ie{constructor(e,n={}){const{x:r,y:i,text:a=Qn(e)&&Qg(e)?Me:Vg,frameAnchor:s,textAnchor:f=/right$/i.test(s)?"end":/left$/i.test(s)?"start":"middle",lineAnchor:c=/^top/i.test(s)?"top":/^bottom/i.test(s)?"bottom":"middle",lineHeight:u=1,lineWidth:l=1/0,textOverflow:d,monospace:h,fontFamily:g=h?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:b,fontWeight:y,rotate:_}=n,[M,w]=Xt(_,0),[S,v]=e8(m);if(super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:S,optional:!0},rotate:{value:mw(M),optional:!0},text:{value:a,filter:wc,optional:!0}},n,G4),this.rotate=w,this.textAnchor=Ut(f,"middle"),this.lineAnchor=Ne(c,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+l,this.textOverflow=Hm(d),this.monospace=!!h,this.fontFamily=$t(g),this.fontSize=v,this.fontStyle=$t(p),this.fontVariant=$t(b),this.fontWeight=$t(y),this.frameAnchor=Po(s),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${l}`);this.splitLines=Xm(this),this.clipLine=Gm(this)}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y:u,rotate:l,text:d,title:h,fontSize:g}=r,{rotate:m}=this,[p,b]=Ri(this,i);return Pt("svg:g",a).call(De,this,i,a).call(Ym,this,d,i).call(Ie,this,{x:c&&s,y:u&&f}).call(y=>y.selectAll().data(e).enter().append("text").call(ce,this).call(Z4,this,d,h).attr("transform",Zc`translate(${c?_=>c[_]:p},${u?_=>u[_]:b})${l?_=>` rotate(${l[_]})`:m?` rotate(${m})`:""}`).call(ft,"font-size",g&&(_=>g[_])).call(Ce,this,r)).node()}}function Hm(t){return t==null?null:Ne(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function Z4(t,e,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:s,splitLines:f,clipLine:c}=e;t.each(function(u){const l=f(Ar(n[u])??"").map(c),d=l.length,h=i==="top"?.71:i==="bottom"?1-d:(164-d*100)/200;if(d>1){let g=0;for(let m=0;m<d;++m){if(++g,!l[m])continue;const p=this.ownerDocument.createElementNS(ba.svg,"tspan");p.setAttribute("x",0),m===g-1?p.setAttribute("y",`${(h+m)*a}em`):p.setAttribute("dy",`${g*a}em`),p.textContent=l[m],this.appendChild(p),g=0}}else h&&this.setAttribute("y",`${h*a}em`),this.textContent=l[0];if(s&&!r&&l[0]!==n[u]){const g=this.ownerDocument.createElementNS(ba.svg,"title");g.textContent=n[u],this.appendChild(g)}})}function $o(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Ci(e,n)),new Jc(t,{...r,x:e,y:n})}function J4(t,{x:e=Me,...n}={}){return new Jc(t,H4({...n,x:e}))}function K4(t,{y:e=Me,...n}={}){return new Jc(t,V4({...n,y:e}))}function Ym(t,e,n){ft(t,"text-anchor",e.textAnchor),ft(t,"font-family",e.fontFamily),ft(t,"font-size",e.fontSize),ft(t,"font-style",e.fontStyle),ft(t,"font-variant",e.fontVariant===void 0?Q4(n):e.fontVariant),ft(t,"font-weight",e.fontWeight)}function Q4(t){return t&&(yw(t)||ve(t))?"tabular-nums":void 0}const t8=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function e8(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),t8.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function n8(t,e,n){const r=[];let i,a=0;for(const[s,f,c]of r8(t)){if(i===void 0&&(i=s),a>i&&n(t,i,f)>e&&(r.push(t.slice(i,a)+(t[a-1]===Vm?"-":"")),i=s),c){r.push(t.slice(i,f)),i=void 0;continue}a=f}return r}function*r8(t){let e=0,n=0;const r=t.length;for(;n<r;){let i=1;switch(t[n]){case Vm:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++i;case`
`:yield[e,n,!0],n+=i,e=n;break;default:++n;break}}yield[e,n,!0]}const oh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Kc(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Fr(t,i))r+=oh[t[i]]??(Jm(t,i)?120:oh.e);return r}function Qc(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Fr(t,i))r+=Jm(t,i)?126:63;return r}function Xm({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return a=>a.split(/\r\n?|\n/g);const r=t?Qc:Kc,i=e*100;return a=>n8(a,i,r)}function Gm({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return a=>a;const r=t?Qc:Kc,i=e*100;switch(n){case"clip-start":return a=>fh(a,i,r,"");case"clip-end":return a=>sh(a,i,r,"");case"ellipsis-start":return a=>fh(a,i,r,lr);case"ellipsis-middle":return a=>i8(a,i,r,lr);case"ellipsis-end":return a=>sh(a,i,r,lr)}}const lr="…";function kr(t,e,n,r){const i=[];let a=0;for(let s=0,f=0,c=t.length;s<c;s=f){f=Fr(t,s);const u=n(t,s,f);if(a+u>e){for(a+=r;a>e&&s>0;)f=s,s=i.pop(),a-=n(t,s,f);return[s,e-a]}a+=u,i.push(s)}return[-1,0]}function sh(t,e,n,r){t=t.trim();const i=n(r),[a]=kr(t,e,n,i);return a<0?t:t.slice(0,a).trimEnd()+r}function i8(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const a=n(r)/2,[s,f]=kr(t,e/2,n,a),[c]=kr(t,i-e/2-f+a,n,-a);return c<0?r:t.slice(0,s).trimEnd()+r+t.slice(Fr(t,c)).trimStart()}function fh(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const a=n(r),[s]=kr(t,i-e+a,n,-a);return s<0?r:r+t.slice(Fr(t,s)).trimStart()}const Uf=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,ch=/\p{Extended_Pictographic}/uy;function Fr(t,e){return e+=a8(t,e)?2:1,s8(t,e)&&(e=Uf.lastIndex),o8(t,e)?Fr(t,e+1):e}function Zm(t,e){return t.charCodeAt(e)<128}function a8(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const r=t.charCodeAt(e+1);return r>=56320&&r<57344}return!1}function o8(t,e){return t.charCodeAt(e)===8205}function s8(t,e){return Zm(t,e)?!1:(Uf.lastIndex=e,Uf.test(t))}function Jm(t,e){return Zm(t,e)?!1:(ch.lastIndex=e,ch.test(t))}const f8={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},Km=3.5,c8=Km*5,Qm={draw(t,e,n){const r=e*n/c8;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},u8={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},l8=new Map([["arrow",Qm],["spike",u8]]);function h8(t){return t&&typeof t.draw=="function"}function d8(t){if(h8(t))return t;const e=l8.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}let tp=class extends ie{constructor(e,n={}){const{x:r,y:i,r:a=Km,length:s,rotate:f,shape:c=Qm,anchor:u="middle",frameAnchor:l}=n,[d,h]=Xt(s,12),[g,m]=Xt(f,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:d,scale:"length",optional:!0},rotate:{value:g,optional:!0}},n,f8),this.r=+a,this.length=h,this.rotate=m,this.shape=d8(c),this.anchor=Ne(u,"anchor",["start","middle","end"]),this.frameAnchor=Po(l)}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y:u,length:l,rotate:d}=r,{length:h,rotate:g,anchor:m,shape:p,r:b}=this,[y,_]=Ri(this,i);return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,{x:c&&s,y:u&&f}).call(M=>M.selectAll().data(e).enter().append("path").call(ce,this).attr("transform",Zc`translate(${c?w=>c[w]:y},${u?w=>u[w]:_})${d?w=>` rotate(${d[w]})`:g?` rotate(${g})`:""}${m==="start"?"":m==="end"?l?w=>` translate(0,${l[w]})`:` translate(0,${h})`:l?w=>` translate(0,${l[w]/2})`:` translate(0,${h/2})`}`).attr("d",l?w=>{const S=mn();return p.draw(S,l[w],b),S}:(()=>{const w=mn();return p.draw(w,h,b),w})()).call(Ce,this,r)).node()}};function g8(t,e={}){const{x:n=Me,...r}=e;return new tp(t,{...r,x:n})}function m8(t,e={}){const{y:n=Me,...r}=e;return new tp(t,{...r,y:n})}function Nn(t,e){return arguments.length<2&&!Qn(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Wo({anchor:t}={},e){return t===void 0?e[0]:Ne(t,"anchor",e)}function ep(t){return Wo(t,["left","right"])}function np(t){return Wo(t,["right","left"])}function rp(t){return Wo(t,["bottom","top"])}function ip(t){return Wo(t,["top","bottom"])}function Bi(){const[t,e]=Nn(...arguments);return ap("y",ep(e),t,e)}function p8(){const[t,e]=Nn(...arguments);return ap("fy",np(e),t,e)}function Or(){const[t,e]=Nn(...arguments);return op("x",rp(e),t,e)}function b8(){const[t,e]=Nn(...arguments);return op("fx",ip(e),t,e)}function ap(t,e,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:s=i,strokeWidth:f=1,fill:c=r,fillOpacity:u=i,textAnchor:l,textStroke:d,textStrokeOpacity:h,textStrokeWidth:g,tickSize:m=t==="y"?6:0,tickPadding:p,tickRotate:b,x:y,margin:_,marginTop:M=_===void 0?20:_,marginRight:w=_===void 0?e==="right"?40:0:_,marginBottom:S=_===void 0?20:_,marginLeft:v=_===void 0?e==="left"?40:0:_,label:T,labelAnchor:x,labelArrow:N,labelOffset:E,ariaLabel:k=`${t}-axis`,...U}){return m=Wt(m),p=Wt(p),b=Wt(b),x!==void 0&&(x=Ne(x,"labelAnchor",["center","top","bottom"])),N=gp(N),Dm(m&&!Qt(a)?y8(t,e,n,{stroke:a,strokeOpacity:s,strokeWidth:f,tickSize:m,tickPadding:p,tickRotate:b,x:y,ariaLabel:k,...U}):null,Qt(c)?null:w8(t,e,n,{fill:c,fillOpacity:u,stroke:d,strokeOpacity:h,strokeWidth:g,textAnchor:l,tickSize:m,tickPadding:p,tickRotate:b,x:y,marginTop:M,marginRight:w,marginBottom:S,marginLeft:v,ariaLabel:k,...U}),!Qt(c)&&T!==null?$o([],up({fill:c,fillOpacity:u,...U},function(R,B,A,P,C){const Y=P[t],{marginTop:X,marginRight:L,marginBottom:z,marginLeft:W}=t==="y"&&C.inset||C,q=x??(Y.bandwidth?"center":"top"),I=E??(e==="right"?L:W)-3;return q==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=q,this.frameAnchor=`${q}-${e}`,this.rotate=0),this.dy=q==="top"?3-X:q==="bottom"?z-3:0,this.dx=e==="right"?I:-I,this.ariaLabel=`${k} label`,{facets:[[0]],channels:{text:{value:[dp(t,Y,{anchor:e,label:T,labelAnchor:q,labelArrow:N})]}}}})):null)}function op(t,e,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:s=i,strokeWidth:f=1,fill:c=r,fillOpacity:u=i,textAnchor:l,textStroke:d,textStrokeOpacity:h,textStrokeWidth:g,tickSize:m=t==="x"?6:0,tickPadding:p,tickRotate:b,y,margin:_,marginTop:M=_===void 0?e==="top"?30:0:_,marginRight:w=_===void 0?20:_,marginBottom:S=_===void 0?e==="bottom"?30:0:_,marginLeft:v=_===void 0?20:_,label:T,labelAnchor:x,labelArrow:N,labelOffset:E,ariaLabel:k=`${t}-axis`,...U}){return m=Wt(m),p=Wt(p),b=Wt(b),x!==void 0&&(x=Ne(x,"labelAnchor",["center","left","right"])),N=gp(N),Dm(m&&!Qt(a)?_8(t,e,n,{stroke:a,strokeOpacity:s,strokeWidth:f,tickSize:m,tickPadding:p,tickRotate:b,y,ariaLabel:k,...U}):null,Qt(c)?null:v8(t,e,n,{fill:c,fillOpacity:u,stroke:d,strokeOpacity:h,strokeWidth:g,textAnchor:l,tickSize:m,tickPadding:p,tickRotate:b,y,marginTop:M,marginRight:w,marginBottom:S,marginLeft:v,ariaLabel:k,...U}),!Qt(c)&&T!==null?$o([],up({fill:c,fillOpacity:u,...U},function(R,B,A,P,C){const Y=P[t],{marginTop:X,marginRight:L,marginBottom:z,marginLeft:W}=t==="x"&&C.inset||C,q=x??(Y.bandwidth?"center":"right"),I=E??(e==="top"?X:z)-3;return q==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${q}`,this.textAnchor=q==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-I:I,this.dx=q==="right"?L-3:q==="left"?3-W:0,this.ariaLabel=`${k} label`,{facets:[[0]],channels:{text:{value:[dp(t,Y,{anchor:e,label:T,labelAnchor:q,labelArrow:N})]}}}})):null)}function y8(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:s=e+(t==="y"?"-empty":""),frameAnchor:f=e,tickSize:c,inset:u=0,insetLeft:l=u,insetRight:d=u,dx:h=0,y:g=t==="y"?void 0:null,ariaLabel:m,...p}){return Pr(m8,t,n,{ariaLabel:`${m} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:s,frameAnchor:f,y:g,...p,dx:e==="left"?+h-oe+ +l:+h+oe-d,anchor:"start",length:c,shape:e==="left"?C8:N8})}function _8(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:s=e+(t==="x"?"-empty":""),frameAnchor:f=e,tickSize:c,inset:u=0,insetTop:l=u,insetBottom:d=u,dy:h=0,x:g=t==="x"?void 0:null,ariaLabel:m,...p}){return Pr(g8,t,n,{ariaLabel:`${m} tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:s,frameAnchor:f,x:g,...p,dy:e==="bottom"?+h-oe-d:+h+oe+ +l,anchor:"start",length:c,shape:e==="bottom"?k8:E8})}function w8(t,e,n,{facetAnchor:r=e+(t==="y"?"-empty":""),frameAnchor:i=e,tickSize:a,tickRotate:s=0,tickPadding:f=Math.max(3,9-a)+(Math.abs(s)>60?4*Math.cos(s*Pm):0),text:c,textAnchor:u=Math.abs(s)>60?"middle":e==="left"?"end":"start",lineAnchor:l=s>60?"top":s<-60?"bottom":"middle",fontVariant:d,inset:h=0,insetLeft:g=h,insetRight:m=h,dx:p=0,ariaLabel:b,y=t==="y"?void 0:null,..._}){return Pr(K4,t,n,{ariaLabel:`${b} tick label`},{facetAnchor:r,frameAnchor:i,text:c,textAnchor:u,lineAnchor:l,fontVariant:d,rotate:s,y,..._,dx:e==="left"?+p-a-f+ +g:+p+ +a+ +f-m},function(M,w,S,v,T){d===void 0&&(this.fontVariant=hp(M)),c===void 0&&(T.text=lp(M,w,S,v,e))})}function v8(t,e,n,{facetAnchor:r=e+(t==="x"?"-empty":""),frameAnchor:i=e,tickSize:a,tickRotate:s=0,tickPadding:f=Math.max(3,9-a)+(Math.abs(s)>=10?4*Math.cos(s*Pm):0),text:c,textAnchor:u=Math.abs(s)>=10?s<0^e==="bottom"?"start":"end":"middle",lineAnchor:l=Math.abs(s)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:d,inset:h=0,insetTop:g=h,insetBottom:m=h,dy:p=0,x:b=t==="x"?void 0:null,ariaLabel:y,..._}){return Pr(J4,t,n,{ariaLabel:`${y} tick label`},{facetAnchor:r,frameAnchor:i,text:c===void 0?null:c,textAnchor:u,lineAnchor:l,fontVariant:d,rotate:s,x:b,..._,dy:e==="bottom"?+p+ +a+ +f-m:+p-a-f+ +g},function(M,w,S,v,T){d===void 0&&(this.fontVariant=hp(M)),c===void 0&&(T.text=lp(M,w,S,v,e))})}function M8(){const[t,e]=Nn(...arguments);return sp("y",ep(e),t,e)}function S8(){const[t,e]=Nn(...arguments);return sp("fy",np(e),t,e)}function x8(){const[t,e]=Nn(...arguments);return fp("x",rp(e),t,e)}function T8(){const[t,e]=Nn(...arguments);return fp("fx",ip(e),t,e)}function sp(t,e,n,{y:r=t==="y"?void 0:null,x:i=null,x1:a=e==="left"?i:null,x2:s=e==="right"?i:null,ariaLabel:f=`${t}-grid`,ariaHidden:c=!0,...u}){return Pr(Gc,t,n,{ariaLabel:f,ariaHidden:c},{y:r,x1:a,x2:s,...cp(u)})}function fp(t,e,n,{x:r=t==="x"?void 0:null,y:i=null,y1:a=e==="top"?i:null,y2:s=e==="bottom"?i:null,ariaLabel:f=`${t}-grid`,ariaHidden:c=!0,...u}){return Pr(Xc,t,n,{ariaLabel:f,ariaHidden:c},{x:r,y1:a,y2:s,...cp(u)})}function cp({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:r=e,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function up({fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:s,monospace:f,pointerEvents:c,shapeRendering:u,clip:l=!1},d){return[,t]=Hn(t),[,e]=Xt(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:s,monospace:f,pointerEvents:c,shapeRendering:u,clip:l,initializer:d}}function Pr(t,e,n,r,i,a){let s;function f(l,d,h,g,m,p){const b=l==null&&(e==="fx"||e==="fy"),{[e]:y}=g;if(!y)throw new Error(`missing scale: ${e}`);const _=y.domain();let{interval:M,ticks:w,tickFormat:S,tickSpacing:v=e==="x"?80:35}=i;if(typeof w=="string"&&mp(y)&&(M=w,w=void 0),w===void 0&&(w=Di(M,y.type)??A8(y,v)),l==null){if(Qn(w))l=Jn(w);else if(gw(w))l=Fs(w,..._n(_));else if(y.interval){let x=y.interval;if(y.ticks){const[N,E]=_n(_),k=(E-N)/x[Ei];x=Dl(x,k/w)??x,l=Fs(x,N,E)}else{l=_;const N=l.length;x=Dl(x,N/w)??x,x!==y.interval&&(l=Fs(x,..._n(l)))}if(x===y.interval){const N=Math.round(l.length/w);N>1&&(l=l.filter((E,k)=>k%N===0))}}else y.ticks?l=y.ticks(w):l=_;if(!y.ticks&&l.length&&l!==_){const x=new go(_);l=l.filter(N=>x.has(N)),l.length||wn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?d=[En(l)]:s[e]={scale:e,value:Me}}a==null||a.call(this,y,l,w,S,s);const T=Object.fromEntries(Object.entries(s).map(([x,N])=>[x,{...N,value:_e(l,N.value)}]));return b&&(d=p.filterFacets(l,T)),{data:l,facets:d,channels:T}}const c=xr(i).initializer,u=t(n,xr({...i,initializer:f},c));return n==null?(s=u.channels,u.channels={}):s={},r!==void 0&&Object.assign(u,r),u.clip===void 0&&(u.clip=!1),u}function A8(t,e){const[n,r]=_n(t.range());return(r-n)/e}function lp(t,e,n,r,i){return{value:tu(t,e,n,r,i)}}function tu(t,e,n,r,i){return typeof r=="function"&&!(t.type==="log"&&t.tickFormat)?r:r===void 0&&e&&ve(e)?G3(t.type,e,i)??Ar:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,r):typeof r=="string"&&t.domain().length>0?(ve(t.domain())?ki:Ir)(r):r===void 0?Ar:on(r)}function Fs(t,e,n){return t.range(e,t.offset(t.floor(n)))}const k8={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},E8={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},C8={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},N8={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function hp(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function dp(t,e,{anchor:n,label:r=e.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&mp(e)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(r)),!a)return r;if(a===!0){const s=F5(e);s&&(a=/x$/.test(t)||i==="center"?/x$/.test(t)===s<0?"left":"right":s<0?"up":"down")}switch(a){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function gp(t="auto"){return Qt(t)?!1:typeof t=="boolean"?t:Ne(t,"labelArrow",["auto","up","right","down","left"])}function mp(t){return ve(t.domain())}function uh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function D8(t,{opacity:e,...n}={}){if(!tr(t)&&!Tm(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return pp(t,n,(r,i,a,s)=>r.append("svg").attr("width",a).attr("height",s).attr("fill",i.scale).attr("fill-opacity",Xt(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function I8(t,{fill:e=(u=>(u=t.hint)==null?void 0:u.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:r=(l=>(l=t.hint)==null?void 0:l.stroke)()!==void 0?t.hint.stroke:Qt(e)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:s=4.5,...f}={},c){const[d,h]=Hn(e),[g,m]=Hn(r),p=uh(c,d),b=uh(c,g),y=s*s*Math.PI;return n=Xt(n)[1],i=Xt(i)[1],a=Xt(a)[1],pp(t,f,(_,M,w,S)=>_.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",S).attr("fill",d==="color"?v=>p.scale(v):h).attr("fill-opacity",n).attr("stroke",g==="color"?v=>b.scale(v):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",v=>{const T=mn();return t.scale(v).draw(T,y),T}))}function pp(t,e={},n){let{columns:r,tickFormat:i,fontVariant:a=Om(t),swatchSize:s=15,swatchWidth:f=s,swatchHeight:c=s,marginLeft:u=0,className:l,style:d,width:h}=e;const g=Uc(e);l=qc(l),i=tu(t.scale,t.domain,void 0,i);const m=Pt("div",g).attr("class",`${l}-swatches ${l}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${l}-swatches-columns .${l}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${l}-swatches-columns .${l}-swatch::before) {
  flex-shrink: 0;
}
:where(.${l}-swatches-columns .${l}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${l}-swatch`).call(n,t,f,c).call(b=>b.append("div").attr("class",`${l}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${l}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${l}-swatches-wrap .${l}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(t.domain).enter().append("span").attr("class",`${l}-swatch`).call(n,t,f,c).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(b=>b.insert("style","*").text(`:where(.${l}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${l}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",u?`${+u}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",Ut(a,"normal")).call(jc,d).node()}const zf=new Map([["symbol",I8],["color",yp],["opacity",F8]]);function L8(t,e,n={}){return(r,i)=>{if(!zf.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return zf.get(r)(t[r],bp(e,n[r],i),a=>t[a])}}function bp({className:t,...e},{label:n,ticks:r,tickFormat:i}={},a){return Mw(a,{className:t,...e},{label:n,ticks:r,tickFormat:i})}function yp(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return D8(t,n);case"ramp":return P4(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function F8({type:t,interpolate:e,...n},{legend:r=!0,color:i=pa(0,0,0),...a}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return yp({type:t,...n,interpolate:O8(i)},{legend:r,...a})}function O8(t){const{r:e,g:n,b:r}=pa(t)||pa(0,0,0);return i=>`rgba(${e},${n},${r},${i})`}function P8(t,e,n){const r=[];for(const[i,a]of zf){const s=n[i];if(s!=null&&s.legend&&i in t){const f=a(t[i],bp(e,t[i],s),c=>t[c]);f!=null&&r.push(f)}}return r}function R8(t={},e="x"){return Zg(t)?t:{...t,[e]:Me}}function B8(t,e){if(e.length===1)return{data:t,facets:e};const n=hi(t),r=new Uint8Array(n);let i=0;for(const f of e)for(const c of f)r[c]&&++i,r[c]=1;if(i===0)return{data:t,facets:e};t=li(t);const a=t[$g]=new Uint32Array(n+i);e=e.map(f=>li(f,Uint32Array));let s=n;r.fill(0);for(const f of e)for(let c=0,u=f.length;c<u;++c){const l=f[c];r[l]?(f[c]=s,t[s]=t[l],a[s]=l,++s):a[l]=l,r[l]=1}return{data:t,facets:e}}function U8(t={},e={}){arguments.length===1&&([t,e]=q8(t));const{y1:n,y:r=n,x:i,...a}=e,[s,f,c,u]=$8(r,i,"y","x",t,a);return{...s,y1:n,y:f,x1:c,x2:u,x:uw(c,u)}}function z8({x:t,x1:e,x2:n,...r}={}){return r=$c(r,"y"),e===void 0&&n===void 0?U8({x:t,...r}):([e,n]=sw(t,e,n),{...r,x1:e,x2:n})}function q8(t){const{offset:e,order:n,reverse:r,...i}=t;return[{offset:e,order:n,reverse:r},i]}const j8={length:!0};function $8(t,e=tw,n,r,{offset:i,order:a,reverse:s},f){if(e===null)throw new Error(`stack requires ${r}`);const c=Jg(f),[u,l]=cw(t),[d,h]=Ef(e),[g,m]=Ef(e);return d.hint=g.hint=j8,i=W8(i),a=Y8(a,i,r),[Ic(f,(p,b,y)=>{({data:p,facets:b}=B8(p,b));const _=t==null?void 0:l(lw(_e(p,t),y==null?void 0:y[n])),M=_e(p,e,Float64Array),w=_e(p,c),S=a&&a(p,_,M,w),v=hi(p),T=h(new Float64Array(v)),x=m(new Float64Array(v)),N=[];for(const E of b){const k=_?Array.from(Jf(E,U=>_[U]).values()):[E];if(S)for(const U of k)U.sort(S);for(const U of k){let R=0,B=0;s&&U.reverse();for(const A of U){const P=M[A];P<0?R=x[A]=(T[A]=R)+P:P>0?B=x[A]=(T[A]=B)+P:x[A]=T[A]=B}}N.push(k)}return i&&i(N,T,x,w),{data:p,facets:b}}),u,d,g]}function W8(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return V8;case"center":case"silhouette":return H8;case"wiggle":return wp}throw new Error(`unknown offset: ${t}`)}}function _p(t,e){let n=0,r=0;for(const i of t){const a=e[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function V8(t,e,n){for(const r of t)for(const i of r){const[a,s]=_p(i,n);for(const f of i){const c=1/(s-a||1);e[f]=c*(e[f]-a),n[f]=c*(n[f]-a)}}}function H8(t,e,n){for(const r of t){for(const i of r){const[a,s]=_p(i,n);for(const f of i){const c=(s+a)/2;e[f]-=c,n[f]-=c}}vp(r,e,n)}Mp(t,e,n)}function wp(t,e,n,r){for(const i of t){const a=new qn;let s=0;for(const f of i){let c=-1;const u=f.map(g=>Math.abs(n[g]-e[g])),l=f.map(g=>{c=r?r[g]:++c;const m=n[g]-e[g],p=a.has(c)?m-a.get(c):0;return a.set(c,m),p}),d=[0,...C2(l)];for(const g of f)e[g]+=s,n[g]+=s;const h=jn(u);h&&(s-=jn(u,(g,m)=>(l[m]/2+d[m])*g)/h)}vp(i,e,n)}Mp(t,e,n)}function vp(t,e,n){const r=ze(t,i=>ze(i,a=>e[a]));for(const i of t)for(const a of i)e[a]-=r,n[a]-=r}function Mp(t,e,n){const r=t.length;if(r===1)return;const i=t.map(f=>f.flat()),a=i.map(f=>(ze(f,c=>e[c])+se(f,c=>n[c]))/2),s=ze(a);for(let f=0;f<r;f++){const c=s-a[f];for(const u of i[f])e[u]+=c,n[u]+=c}}function Y8(t,e,n){if(t===void 0&&e===wp)return lh(je);if(t!=null){if(typeof t=="string"){const r=t.startsWith("-"),i=r?Ja:je;switch((r?t.slice(1):t).toLowerCase()){case"value":case n:return X8(i);case"z":return G8(i);case"sum":return Z8(i);case"appearance":return J8(i);case"inside-out":return lh(i)}return hh(Wg(t))}if(typeof t=="function")return(t.length===1?hh:K8)(t);if(Zn(t))return Q8(t);throw new Error(`invalid order: ${t}`)}}function X8(t){return(e,n,r)=>(i,a)=>t(r[i],r[a])}function G8(t){return(e,n,r,i)=>(a,s)=>t(i[a],i[s])}function Z8(t){return Vo(t,(e,n,r,i)=>Qf(En(e),a=>jn(a,s=>r[s]),a=>i[a]))}function J8(t){return Vo(t,(e,n,r,i)=>Qf(En(e),a=>n[Cd(a,s=>r[s])],a=>i[a]))}function lh(t){return Vo(t,(e,n,r,i)=>{const a=En(e),s=Qf(a,d=>n[Cd(d,h=>r[h])],d=>i[d]),f=Qr(a,d=>jn(d,h=>r[h]),d=>i[d]),c=[],u=[];let l=0;for(const d of s)l<0?(l+=f.get(d),c.push(d)):(l-=f.get(d),u.push(d));return u.reverse().concat(c)})}function hh(t){return e=>{const n=_e(e,t);return(r,i)=>je(n[r],n[i])}}function K8(t){return e=>Zn(e)?(n,r)=>t(e[n],e[r]):(n,r)=>t(e.get(n),e.get(r))}function Q8(t){return Vo(je,()=>t)}function Vo(t,e){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const s=new qn(e(n,r,i,a).map((f,c)=>[f,c]));return(f,c)=>t(s.get(a[f]),s.get(a[c]))}}const t7={ariaLabel:"rect"};class Sp extends ie{constructor(e,n={}){const{x1:r,y1:i,x2:a,y2:s}=n;super(e,{x1:{value:r,scale:"x",type:r!=null&&a==null?"band":void 0,optional:!0},y1:{value:i,scale:"y",type:i!=null&&s==null?"band":void 0,optional:!0},x2:{value:a,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,t7),eu(this,n),nu(this,n)}render(e,n,r,i,a){const{x:s,y:f}=n;let{x1:c,y1:u,x2:l,y2:d}=r;const{marginTop:h,marginRight:g,marginBottom:m,marginLeft:p,width:b,height:y}=i,{projection:_}=a,{insetTop:M,insetRight:w,insetBottom:S,insetLeft:v}=this,{rx:T,ry:x,rx1y1:N,rx1y2:E,rx2y1:k,rx2y2:U}=this;(c||l)&&!_&&Tr(s)&&(c=l=null),(u||d)&&!_&&Tr(f)&&(u=d=null);const R=s!=null&&s.bandwidth?s.bandwidth():0,B=f!=null&&f.bandwidth?f.bandwidth():0;return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,{},0,0).call(A=>A.selectAll().data(e).enter().call(N||E||k||U?P=>P.append("path").call(ce,this).call(ru,c&&l?C=>c[C]+(l[C]<c[C]?-w:v):c?C=>c[C]+v:p+v,u&&d?C=>u[C]+(d[C]<u[C]?-S:M):u?C=>u[C]+M:h+M,c&&l?C=>l[C]-(l[C]<c[C]?-v:w):c?C=>c[C]+R-w:b-g-w,u&&d?C=>d[C]-(d[C]<u[C]?-M:S):u?C=>u[C]+B-S:y-m-S,this).call(Ce,this,r):P=>P.append("rect").call(ce,this).attr("x",c?l?C=>Math.min(c[C],l[C])+v:C=>c[C]+v:p+v).attr("y",u?d?C=>Math.min(u[C],d[C])+M:C=>u[C]+M:h+M).attr("width",c?l?C=>Math.max(0,Math.abs(l[C]-c[C])+R-v-w):R-v-w:b-g-p-w-v).attr("height",u?d?C=>Math.max(0,Math.abs(u[C]-d[C])+B-M-S):B-M-S:y-h-m-M-S).call(ft,"rx",T).call(ft,"ry",x).call(Ce,this,r))).node()}}function eu(t,{inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:a=e}={}){t.insetTop=Wt(n),t.insetRight=Wt(r),t.insetBottom=Wt(i),t.insetLeft=Wt(a)}function nu(t,{r:e,rx:n,ry:r,rx1:i=e,ry1:a=e,rx2:s=e,ry2:f=e,rx1y1:c=i!==void 0?+i:a!==void 0?+a:0,rx1y2:u=i!==void 0?+i:f!==void 0?+f:0,rx2y1:l=s!==void 0?+s:a!==void 0?+a:0,rx2y2:d=s!==void 0?+s:f!==void 0?+f:0}={}){c||u||l||d?(t.rx1y1=c,t.rx1y2=u,t.rx2y1=l,t.rx2y2=d):(t.rx=Ut(n,"auto"),t.ry=Ut(r,"auto"))}function ru(t,e,n,r,i,a){const{rx1y1:s,rx1y2:f,rx2y1:c,rx2y2:u}=a;typeof e!="function"&&(e=on(e)),typeof n!="function"&&(n=on(n)),typeof r!="function"&&(r=on(r)),typeof i!="function"&&(i=on(i));const l=Math.max(Math.abs(s+c),Math.abs(f+u)),d=Math.max(Math.abs(s+f),Math.abs(c+u));t.attr("d",h=>{const g=e(h),m=n(h),p=r(h),b=i(h),y=g>p,_=m>b,M=y?p:g,w=y?g:p,S=_?b:m,v=_?m:b,T=Math.min(1,(w-M)/l,(v-S)/d),x=T*(y?_?u:c:_?f:s),N=T*(y?_?f:s:_?u:c),E=T*(y?_?s:f:_?c:u),k=T*(y?_?c:u:_?s:f);return`M${M},${S+Ki(x,k)}A${x},${x} 0 0 ${x<0?0:1} ${M+Ji(x,k)},${S}H${w-Ji(N,E)}A${N},${N} 0 0 ${N<0?0:1} ${w},${S+Ki(N,E)}V${v-Ki(E,N)}A${E},${E} 0 0 ${E<0?0:1} ${w-Ji(E,N)},${v}H${M+Ji(k,x)}A${k},${k} 0 0 ${k<0?0:1} ${M},${v-Ki(k,x)}Z`})}function Ji(t,e){return e<0?t:Math.abs(t)}function Ki(t,e){return e<0?Math.abs(t):t}function e7(t,e){return new Sp(t,j4(jm(e)))}function iu(t,e={}){return ow(e)||(e={...e,y:Vg,x2:Me,interval:1}),new Sp(t,z8(jm(R8(e))))}const n7={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},r7={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class i7 extends ie{constructor(e={}){const{anchor:n=null}=e;super(ha,void 0,e,n==null?n7:r7),this.anchor=Xg(n,"anchor",["top","right","bottom","left"]),eu(this,e),n||nu(this,e)}render(e,n,r,i,a){const{marginTop:s,marginRight:f,marginBottom:c,marginLeft:u,width:l,height:d}=i,{anchor:h,insetTop:g,insetRight:m,insetBottom:p,insetLeft:b}=this,{rx:y,ry:_,rx1y1:M,rx1y2:w,rx2y1:S,rx2y2:v}=this,T=u+b,x=l-f-m,N=s+g,E=d-c-p;return Pt(h?"svg:line":M||w||S||v?"svg:path":"svg:rect",a).datum(0).call(De,this,i,a).call(ce,this).call(Ce,this,r).call(Ie,this,{}).call(h==="left"?k=>k.attr("x1",T).attr("x2",T).attr("y1",N).attr("y2",E):h==="right"?k=>k.attr("x1",x).attr("x2",x).attr("y1",N).attr("y2",E):h==="top"?k=>k.attr("x1",T).attr("x2",x).attr("y1",N).attr("y2",N):h==="bottom"?k=>k.attr("x1",T).attr("x2",x).attr("y1",E).attr("y2",E):M||w||S||v?k=>k.call(ru,T,N,x,E,this):k=>k.attr("x",T).attr("y",N).attr("width",x-T).attr("height",E-N).attr("rx",y).attr("ry",_)).node()}}function xp(t){return new i7(t)}const Os={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},a7=new Set(["geometry","href","src","ariaLabel","scales"]);class o7 extends ie{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Qn(e)&&Qg(e)&&(n={...n,title:Me});const{x:r,y:i,x1:a,x2:s,y1:f,y2:c,anchor:u,preferredAnchor:l="bottom",monospace:d,fontFamily:h=d?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:m,fontVariant:p,fontWeight:b,lineHeight:y=1,lineWidth:_=20,frameAnchor:M,format:w,textAnchor:S="start",textOverflow:v,textPadding:T=8,title:x,pointerSize:N=12,pathFilter:E="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:a!=null&&s!=null?null:r,scale:"x",optional:!0},y:{value:f!=null&&c!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:s==null},y1:{value:f,scale:"y",optional:c==null},x2:{value:s,scale:"x",optional:a==null},y2:{value:c,scale:"y",optional:f==null},title:{value:x,optional:!0}},n,Os),this.anchor=Cf(u,"anchor"),this.preferredAnchor=Cf(l,"preferredAnchor"),this.frameAnchor=Po(M),this.textAnchor=Ut(S,"middle"),this.textPadding=+T,this.pointerSize=+N,this.pathFilter=$t(E),this.lineHeight=+y,this.lineWidth=+_,this.textOverflow=Hm(v),this.monospace=!!d,this.fontFamily=$t(h),this.fontSize=Wt(g),this.fontStyle=$t(m),this.fontVariant=$t(p),this.fontWeight=$t(b);for(const k in Os)k in this.channels&&(this[k]=Os[k]);this.splitLines=Xm(this),this.clipLine=Gm(this),this.format=typeof w=="string"||typeof w=="function"?{title:w}:{...w}}render(e,n,r,i,a){const s=this,{x:f,y:c,fx:u,fy:l}=n,{ownerSVGElement:d,document:h}=a,{anchor:g,monospace:m,lineHeight:p,lineWidth:b}=this,{textPadding:y,pointerSize:_,pathFilter:M}=this,{marginTop:w,marginLeft:S}=i,{x1:v,y1:T,x2:x,y2:N,x:E=v??x,y:k=T??N}=r,U=u?u(e.fx)-S:0,R=l?l(e.fy)-w:0,[B,A]=Ri(this,i),P=Lm(r,B),C=Fm(r,A),Y=m?Qc:Kc,X=Y(lr);let L,z;"title"in r?(L=dh.call(this,{title:r.channels.title},n),z=l7):(L=dh.call(this,r.channels,n),z=h7);const W=Pt("svg:g",a).call(De,this,i,a).call(Ym,this).call(Ie,this,{x:E&&f,y:k&&c}).call(tt=>tt.selectAll().data(e).enter().append("g").attr("transform",nt=>`translate(${Math.round(P(nt))},${Math.round(C(nt))})`).call(ce,this).call(nt=>nt.append("path").attr("filter",M)).call(nt=>nt.append("text").each(function(j){const Q=jt(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const O=z.call(s,j,e,L,n,r);if(typeof O=="string")for(const G of s.splitLines(O))q(Q,{value:s.clipLine(G)});else{const G=new Set;for(const Z of O){const{label:F=""}=Z;F&&G.has(F)||(G.add(F),q(Q,Z))}}})));function q(tt,{label:nt,value:j,color:Q,opacity:O}){nt??(nt=""),j??(j="");const G=Q!=null||O!=null;let Z,F=b*100;const[mt]=kr(nt,F,Y,X);if(mt>=0)nt=nt.slice(0,mt).trimEnd()+lr,Z=j.trim(),j="";else{(nt||!j&&!G)&&(j=" "+j);const[yt]=kr(j,F-Y(nt),Y,X);yt>=0&&(Z=j.trim(),j=j.slice(0,yt).trimEnd()+lr)}const rt=tt.append("tspan").attr("x",0).attr("dy",`${p}em`).text("​");nt&&rt.append("tspan").attr("font-weight","bold").text(nt),j&&rt.append(()=>h.createTextNode(j)),G&&rt.append("tspan").text(" ■").attr("fill",Q).attr("fill-opacity",O).style("user-select","none"),Z&&rt.append("title").text(Z)}function I(){const{width:tt,height:nt}=i.facet??i;W.selectChildren().each(function(j){let{x:Q,width:O,height:G}=this.getBBox();O=Math.round(O),G=Math.round(G);let Z=g;if(Z===void 0){const rt=P(j)+U,yt=C(j)+R,St=rt+O+_+y*2<tt,J=rt-O-_-y*2>0,wt=yt+G+_+y*2<nt,ae=yt-G-_-y*2>0;Z=St&&J?wt&&ae?s.preferredAnchor:ae?"bottom":"top":wt&&ae?St?"left":"right":(St||J)&&(wt||ae)?`${ae?"bottom":"top"}-${St?"left":"right"}`:s.preferredAnchor}const F=this.firstChild,mt=this.lastChild;if(F.setAttribute("d",u7(Z,_,y,O,G)),Q)for(const rt of mt.childNodes)rt.setAttribute("x",-Q);mt.setAttribute("y",`${+f7(Z,mt.childNodes.length,p).toFixed(6)}em`),mt.setAttribute("transform",`translate(${c7(Z,_,y,O,G)})`)}),W.attr("visibility",null)}return e.length&&(W.attr("visibility","hidden"),d.isConnected?Promise.resolve().then(I):typeof requestAnimationFrame<"u"&&requestAnimationFrame(I)),W.node()}}function s7(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Ci(e,n)),new o7(t,{...r,x:e,y:n})}function f7(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function c7(t,e,n,r,i){switch(t){case"middle":return[-r/2,i/2];case"top-left":return[n,e+n];case"top":return[-r/2,e/2+n];case"top-right":return[-r-n,e+n];case"right":return[-e/2-r-n,i/2];case"bottom-left":return[n,-e-n];case"bottom":return[-r/2,-e/2-n];case"bottom-right":return[-r-n,-e-n];case"left":return[n+e/2,i/2]}}function u7(t,e,n,r,i){const a=r+n*2,s=i+n*2;switch(t){case"middle":return`M${-a/2},${-s/2}h${a}v${s}h${-a}z`;case"top-left":return`M0,0l${e},${e}h${a-e}v${s}h${-a}z`;case"top":return`M0,0l${e/2},${e/2}h${(a-e)/2}v${s}h${-a}v${-s}h${(a-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-a}v${s}h${a}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-s/2}h${-a}v${s}h${a}v${e/2-s/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${a-e}v${-s}h${-a}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(a-e)/2}v${-s}h${-a}v${s}h${(a-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-a}v${-s}h${a}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-s/2}h${a}v${s}h${-a}v${e/2-s/2}z`}}function dh(t,e){var i,a;const n={};let r=this.format;r=gh(r,t,"x"),r=gh(r,t,"y"),this.format=r;for(const s in r){const f=r[s];if(!(f===null||f===!1))if(s==="fx"||s==="fy")n[s]=!0;else{const c=zl(t,s);c&&(n[s]=c)}}for(const s in t){if(s in n||s in r||a7.has(s)||(s==="x"||s==="y")&&t.geometry)continue;const f=zl(t,s);if(f){if(f.scale==null&&f.defaultScale==="color")continue;n[s]=f}}this.facet&&(e.fx&&!("fx"in r)&&(n.fx=!0),e.fy&&!("fy"in r)&&(n.fy=!0));for(const s in n){const f=this.format[s];if(typeof f=="string"){const c=((i=n[s])==null?void 0:i.value)??((a=e[s])==null?void 0:a.domain())??[];this.format[s]=(ve(c)?ki:Ir)(f)}else if(f===void 0||f===!0){const c=e[s];this.format[s]=c!=null&&c.bandwidth?tu(c,c.domain()):Ar}}return n}function gh(t,e,n){if(!(n in t))return t;const r=`${n}1`,i=`${n}2`;if((r in t||!(r in e))&&(i in t||!(i in e)))return t;const a=Object.entries(t),s=t[n];return a.splice(a.findIndex(([f])=>f===n)+1,0,[r,s],[i,s]),Object.fromEntries(a)}function l7(t,e,{title:n}){return this.format.title(n.value[t],t)}function*h7(t,e,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:Qa(r,n,a),value:this.format[a](e[a],t)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const s=n[a];if(a==="x2"&&"x1"in n)yield{label:ph(r,n,"x"),value:mh(this.format.x2,n.x1,s,t)};else if(a==="y2"&&"y1"in n)yield{label:ph(r,n,"y"),value:mh(this.format.y2,n.y1,s,t)};else{const f=s.value[t],c=s.scale;if(!Tn(f)&&c==null)continue;yield{label:Qa(r,n,a),value:this.format[a](f,t),color:c==="color"?i[a][t]:null,opacity:c==="opacity"?i[a][t]:null}}}}function mh(t,e,n,r){var i;return(i=n.hint)!=null&&i.length?`${t(n.value[r]-e.value[r],r)}`:`${t(e.value[r],r)}–${t(n.value[r],r)}`}function ph(t,e,n){const r=Qa(t,e,`${n}1`,n),i=Qa(t,e,`${n}2`,n);return r===i?r:`${r}–${i}`}function Qa(t,e,n,r=n){const i=e[n],a=t[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function Tp(t={}){var X;const{facet:e,style:n,title:r,subtitle:i,caption:a,ariaLabel:s,ariaDescription:f}=t,c=qc(t.className),u=t.marks===void 0?[]:yh(t.marks);u.push(..._7(u));const l=b7(e,t),d=new Map;for(const L of u){const z=_h(L,l,t);z&&d.set(L,z)}const h=new Map;l&&$r(h,[l],t),$r(h,d,t);const g=yh(w7(u,h,t));for(const L of g){const z=_h(L,l,t);z&&d.set(L,z)}u.unshift(...g);let m=q5(h,t);if(m!==void 0){const L=l?Ns(m,l):void 0;for(const W of u){if(W.facet===null||W.facet==="super")continue;const q=d.get(W);q!==void 0&&(q.facetsIndex=W.fx!=null||W.fy!=null?Ns(m,q):L)}const z=new Set;for(const{facetsIndex:W}of d.values())W==null||W.forEach((q,I)=>{(q==null?void 0:q.length)>0&&z.add(I)});m.forEach(0<z.size&&z.size<m.length?(W,q)=>W.empty=!z.has(q):W=>W.empty=!1);for(const W of u)if(W.facet==="exclude"){const q=d.get(W);q!==void 0&&(q.facetsIndex=W5(q.facetsIndex))}}for(const L of kt.keys())Ka(t[L])&&L!=="fx"&&L!=="fy"&&h.set(L,[]);const p=new Map;for(const L of u){if(p.has(L))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:z,channels:W}=d.get(L)??{},{data:q,facets:I,channels:tt}=L.initialize(z,W,t);au(tt,t),p.set(L,{data:q,facets:I,channels:tt})}const b=Lf($r(h,p,t),t),y=I4(b,u,t);I5(b,y);const _=Xl(b),{fx:M,fy:w}=_,S=M||w?vm(b,y):y,v=M||w?k7(_,y):y,T=Uc(t),x=T.document,N=pd("svg").call(x.documentElement);let E=N;T.ownerSVGElement=N,T.className=c,T.projection=Q5(t,S),T.path=function(){return oc(this.projection??o4(_))},T.filterFacets=(L,z)=>Ns(m,{channels:z,groups:Bc(L,z)}),T.getMarkState=L=>{const z=p.get(L),W=d.get(L);return{...z,channels:{...z.channels,...W==null?void 0:W.channels}}},T.dispatchValue=L=>{E.value!==L&&(E.value=L,E.dispatchEvent(new T.document.defaultView.Event("input",{bubbles:!0})))};const k=new Set;for(const[L,z]of p)if(L.initializer!=null){const W=L.facet==="super"?v:S,q=L.initializer(z.data,z.facets,z.channels,_,W,T);if(q.data!==void 0&&(z.data=q.data),q.facets!==void 0&&(z.facets=q.facets),q.channels!==void 0){const{fx:I,fy:tt,...nt}=q.channels;p7(nt),Object.assign(z.channels,nt);for(const j of Object.values(nt)){const{scale:Q}=j;Q!=null&&!Tw(kt.get(Q))&&(Ap(j,t),k.add(Q))}(I!=null||tt!=null)&&d.set(L,!0)}}if(k.size){const L=new Map;$r(L,p,t,I=>k.has(I)),$r(h,p,t,I=>k.has(I));const z=A7(Lf(L,t),b),{scales:W,...q}=Xl(z);Object.assign(b,z),Object.assign(_,q),Object.assign(_.scales,W)}let U,R;m!==void 0&&(U={x:M==null?void 0:M.domain(),y:w==null?void 0:w.domain()},m=j5(m,U),R=$5(M,w,y));for(const[L,z]of p)z.values=L.scale(z.channels,_,T);const{width:B,height:A}=y;jt(N).attr("class",c).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",B).attr("height",A).attr("viewBox",`0 0 ${B} ${A}`).attr("aria-label",s).attr("aria-description",f).call(L=>L.append("style").text(`:where(.${c}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${c} text),
:where(.${c} tspan) {
  white-space: pre;
}`)).call(jc,n);for(const L of u){const{channels:z,values:W,facets:q}=p.get(L);if(m===void 0||L.facet==="super"){let I=null;if(q&&(I=q[0],I=L.filter(I,z,W),I.length===0))continue;const tt=L.render(I,_,W,v,T);if(tt==null)continue;N.appendChild(tt)}else{let I;for(const tt of m){if(!(((X=L.facetAnchor)==null?void 0:X.call(L,m,U,tt))??!tt.empty))continue;let nt=null;if(q){const Q=d.has(L);if(nt=q[Q?tt.i:0],nt=L.filter(nt,z,W),nt.length===0)continue;!Q&&nt===q[0]&&(nt=fw(nt)),nt.fx=tt.x,nt.fy=tt.y,nt.fi=tt.i}const j=L.render(nt,_,W,S,T);if(j!=null){(I??(I=jt(N).append("g"))).append(()=>j).datum(tt);for(const Q of["aria-label","aria-description","aria-hidden","transform"])j.hasAttribute(Q)&&(I.attr(Q,j.getAttribute(Q)),j.removeAttribute(Q))}}I==null||I.selectChildren().each(R)}}const P=P8(b,T,t),{figure:C=r!=null||i!=null||a!=null||P.length>0}=t;C&&(E=x.createElement("figure"),E.className=`${c}-figure`,E.style.maxWidth="initial",r!=null&&E.append(bh(x,r,"h2")),i!=null&&E.append(bh(x,i,"h3")),E.append(...P,N),a!=null&&E.append(d7(x,a)),"value"in N&&(E.value=N.value,delete N.value)),E.scale=z5(_.scales),E.legend=L8(b,T,t);const Y=m5();return Y>0&&jt(N).append("text").attr("x",B).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${Y.toLocaleString("en-US")} warning${Y===1?"":"s"}. Please check the console.`),E}function bh(t,e,n){if(e.ownerDocument)return e;const r=t.createElement(n);return r.append(e),r}function d7(t,e){const n=t.createElement("figcaption");return n.append(e),n}function yh(t){return t.flat(1/0).filter(e=>e!=null).map(g7)}function g7(t){return typeof t.render=="function"?t:new m7(t)}class m7 extends ie{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function au(t,e){for(const n in t)Ap(t[n],e);return t}function Ap(t,e){const{scale:n,transform:r=!0}=t;if(n==null||!r)return;const{type:i,percent:a,interval:s,transform:f=a?c=>c==null?NaN:c*100:Kg(s,i)}=e[n]??{};f!=null&&(t.value=Lt(t.value,f),t.transform=!1)}function p7(t){for(const e in t)sm(e,t[e])}function $r(t,e,n,r=ew){var i,a;for(const{channels:s}of e.values())for(const f in s){const c=s[f],{scale:u}=c;if(u!=null&&r(u))if(u==="projection"){if(!r4(n)){const l=((i=n.x)==null?void 0:i.domain)===void 0,d=((a=n.y)==null?void 0:a.domain)===void 0;if(l||d){const[h,g]=a4(c);l&&Ps(t,"x",h),d&&Ps(t,"y",g)}}}else Ps(t,u,c)}return t}function Ps(t,e,n){const r=t.get(e);r!==void 0?r.push(n):t.set(e,[n])}function b7(t,e){if(t==null)return;const{x:n,y:r}=t;if(n==null&&r==null)return;const i=Mr(t.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=gi(i,{value:n,scale:"fx"})),r!=null&&(a.fy=gi(i,{value:r,scale:"fy"})),au(a,e);const s=Bc(i,a);return{channels:a,groups:s,data:t.data}}function _h(t,e,n){if(t.facet===null||t.facet==="super")return;const{fx:r,fy:i}=t;if(r!=null||i!=null){const c=Mr(t.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(c===null)return;const u={};return r!=null&&(u.fx=gi(c,{value:r,scale:"fx"})),i!=null&&(u.fy=gi(c,{value:i,scale:"fy"})),au(u,n),{channels:u,groups:Bc(c,u)}}if(e===void 0)return;const{channels:a,groups:s,data:f}=e;if(t.facet!=="auto"||t.data===f)return{channels:a,groups:s};f.length>0&&(s.size>1||s.size===1&&a.fx&&a.fy&&[...s][0][1].size>1)&&hi(Mr(t.data))===hi(f)&&wn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function y7(t,e={}){return xr({...e,x:null,y:null},(n,r,i,a,s,f)=>f.getMarkState(t))}function _7(t){const e=[];for(const n of t){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?O4:/^y$/i.test(i)?rh:F4,r=i(y7(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===rh?"left":"bottom");const s=s7(n.data,r);s.facet=n.facet,s.facetAnchor=n.facetAnchor,e.push(s)}}return e}function w7(t,e,n){let{projection:r,x:i={},y:a={},fx:s={},fy:f={},axis:c,grid:u,facet:l={},facet:{axis:d=c,grid:h}=l,x:{axis:g=c,grid:m=g===null?null:u}=i,y:{axis:p=c,grid:b=p===null?null:u}=a,fx:{axis:y=d,grid:_=y===null?null:h}=s,fy:{axis:M=d,grid:w=M===null?null:h}=f}=n;(r||!Ka(i)&&!wh("x",t))&&(g=m=null),(r||!Ka(a)&&!wh("y",t))&&(p=b=null),e.has("fx")||(y=_=null),e.has("fy")||(M=w=null),g===void 0&&(g=!ea(t,"x")),p===void 0&&(p=!ea(t,"y")),y===void 0&&(y=!ea(t,"fx")),M===void 0&&(M=!ea(t,"fy")),g===!0&&(g="bottom"),p===!0&&(p="left"),y===!0&&(y=g==="top"||g===null?"bottom":"top"),M===!0&&(M=p==="right"||p===null?"left":"right");const S=[];return ta(S,w,S8,f),Qi(S,M,p8,"right","left",l,f),ta(S,_,T8,s),Qi(S,y,b8,"top","bottom",l,s),ta(S,b,M8,a),Qi(S,p,Bi,"left","right",n,a),ta(S,m,x8,i),Qi(S,g,Or,"bottom","top",n,i),S}function Qi(t,e,n,r,i,a,s){if(!e)return;const f=v7(e);s=M7(f?r:e,a,s);const{line:c}=s;(n===Bi||n===Or)&&c&&!di(c)&&t.push(xp(S7(s))),t.push(n(s)),f&&t.push(n({...s,anchor:i,label:null}))}function ta(t,e,n,r){!e||di(e)||t.push(n(x7(e,r)))}function v7(t){return/^\s*both\s*$/i.test(t)}function M7(t,e,{line:n=e.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:s,tickFormat:f,tickRotate:c,fontVariant:u,ariaLabel:l,ariaDescription:d,label:h=e.label,labelAnchor:g,labelArrow:m=e.labelArrow,labelOffset:p}){return{anchor:t,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:s,tickFormat:f,tickRotate:c,fontVariant:u,ariaLabel:l,ariaDescription:d,label:h,labelAnchor:g,labelArrow:m,labelOffset:p}}function S7(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function x7(t,{stroke:e=Oo(t)?t:void 0,ticks:n=T7(t)?t:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:e,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function T7(t){switch(typeof t){case"number":return!0;case"string":return!Oo(t)}return Qn(t)||typeof(t==null?void 0:t.range)=="function"}function ea(t,e){const n=`${e}-axis `;return t.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function wh(t,e){for(const n of e)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===t||i==="projection")return!0}return!1}function A7(t,e){for(const n in t){const r=t[n],i=e[n];r.label===void 0&&i&&(r.label=i.label)}return t}function k7({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:s,width:f,height:c}=Rc(n),u=t&&vh(t),l=e&&vh(e);return{marginTop:e?l[0]:r,marginRight:t?f-u[1]:i,marginBottom:e?c-l[1]:a,marginLeft:t?u[0]:s,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:f,height:c}}function vh(t){const e=t.domain();if(e.length===0)return[0,t.bandwidth()];let n=t(e[0]),r=t(e[e.length-1]);return r<n&&([n,r]=[r,n]),[n,r+t.bandwidth()]}const E7=new Map([["basis",A3],["basis-closed",k3],["basis-open",E3],["bundle",C3],["bump-x",m3],["bump-y",p3],["cardinal",N3],["cardinal-closed",D3],["cardinal-open",I3],["catmull-rom",L3],["catmull-rom-closed",F3],["catmull-rom-open",O3],["linear",Eo],["linear-closed",P3],["monotone-x",R3],["monotone-y",B3],["natural",U3],["step",z3],["step-after",j3],["step-before",q3]]);function C7(t=Eo,e){if(typeof t=="function")return t;const n=E7.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function kp(t=Er,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?Er:C7(t,e)}function Er(t){return Eo(t)}const N7={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class D7 extends ie{constructor(e,n={}){const{x1:r,y1:i,x2:a,y2:s,curve:f,tension:c}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:s,scale:"y",optional:!0}},n,N7),this.curve=kp(f,c),qo(this,n)}project(e,n,r){this.curve!==Er&&super.project(e,n,r)}render(e,n,r,i,a){const{x1:s,y1:f,x2:c=s,y2:u=f}=r,{curve:l}=this;return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,n).call(d=>d.selectAll().data(e).enter().append("path").call(ce,this).attr("d",l===Er&&a.projection?I7(a.path(),s,f,c,u):h=>{const g=mn(),m=l(g);return m.lineStart(),m.point(s[h],f[h]),m.point(c[h],u[h]),m.lineEnd(),g}).call(Ce,this,r).call(Vc,this,r,a)).node()}}function I7(t,e,n,r,i){return e=yn(e),n=yn(n),r=yn(r),i=yn(i),a=>t({type:"LineString",coordinates:[[e[a],n[a]],[r[a],i[a]]]})}function qf(t,{x:e,x1:n,x2:r,y:i,y1:a,y2:s,...f}={}){return[n,r]=Mh(e,n,r),[a,s]=Mh(i,a,s),new D7(t,{...f,x1:n,x2:r,y1:a,y2:s})}function Mh(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}const L7={ariaLabel:"bar"};class F7 extends ie{constructor(e,n,r={},i=L7){super(e,n,r,i),eu(this,r),nu(this,r)}render(e,n,r,i,a){const{rx:s,ry:f,rx1y1:c,rx1y2:u,rx2y1:l,rx2y2:d}=this,h=this._x(n,r,i),g=this._y(n,r,i),m=this._width(n,r,i),p=this._height(n,r,i);return Pt("svg:g",a).call(De,this,i,a).call(this._transform,this,n).call(b=>b.selectAll().data(e).enter().call(c||u||l||d?y=>y.append("path").call(ce,this).call(ru,h,g,Sh(h,m),Sh(g,p),this).call(Ce,this,r):y=>y.append("rect").call(ce,this).attr("x",h).attr("width",m).attr("y",g).attr("height",p).call(ft,"rx",s).call(ft,"ry",f).call(Ce,this,r))).node()}_x(e,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(e,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:e},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:s,insetRight:f}=this,c=n&&e?e.bandwidth():a-r-i;return Math.max(0,c-s-f)}_height({y:e},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:s,insetBottom:f}=this,c=n&&e?e.bandwidth():a-r-i;return Math.max(0,c-s-f)}}function Sh(t,e){return typeof t=="function"&&typeof e=="function"?n=>t(n)+e(n):typeof t=="function"?n=>t(n)+e:typeof e=="function"?n=>t+e(n):t+e}const O7={ariaLabel:"cell"};class P7 extends F7{constructor(e,{x:n,y:r,...i}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,O7)}_transform(e,n){e.call(Ie,n,{},0,0)}}function R7(t,{x:e,y:n,...r}={}){return[e,n]=Ci(e,n),new P7(t,{...r,x:e,y:n})}const B7={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function U7(t){return t.sort===void 0&&t.reverse===void 0?Lw({channel:"-r"},t):t}class z7 extends ie{constructor(e,n={}){const{x:r,y:i,r:a,rotate:s,symbol:f=ui,frameAnchor:c}=n,[u,l]=Xt(s,0),[d,h]=Dw(f),[g,m]=Xt(a,d==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:g,scale:"r",filter:Do,optional:!0},rotate:{value:u,optional:!0},symbol:{value:d,scale:"auto",optional:!0}},U7(n),B7),this.r=m,this.rotate=l,this.symbol=h,this.frameAnchor=Po(c);const{channels:p}=this,{symbol:b}=p;if(b){const{fill:y,stroke:_}=p;b.hint={fill:y?y.value===b.value?"color":"currentColor":this.fill??"currentColor",stroke:_?_.value===b.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,i,a){const{x:s,y:f}=n,{x:c,y:u,r:l,rotate:d,symbol:h}=r,{r:g,rotate:m,symbol:p}=this,[b,y]=Ri(this,i),_=p===ui,M=l?void 0:g*g*Math.PI;return vc(g)&&(e=[]),Pt("svg:g",a).call(De,this,i,a).call(Ie,this,{x:c&&s,y:u&&f}).call(w=>w.selectAll().data(e).enter().append(_?"circle":"path").call(ce,this).call(_?S=>{S.attr("cx",c?v=>c[v]:b).attr("cy",u?v=>u[v]:y).attr("r",l?v=>l[v]:g)}:S=>{S.attr("transform",Zc`translate(${c?v=>c[v]:b},${u?v=>u[v]:y})${d?v=>` rotate(${d[v]})`:m?` rotate(${m})`:""}`).attr("d",l&&h?v=>{const T=mn();return h[v].draw(T,l[v]*l[v]*Math.PI),T}:l?v=>{const T=mn();return p.draw(T,l[v]*l[v]*Math.PI),T}:h?v=>{const T=mn();return h[v].draw(T,M),T}:(()=>{const v=mn();return p.draw(v,M),v})())}).call(Ce,this,r)).node()}}function q7(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Ci(e,n)),new z7(t,{...r,x:e,y:n})}function j7(t,e){return q7(t,{...e,symbol:"circle"})}const $7={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};let W7=class extends ie{constructor(e,n={}){const{x:r,y:i,z:a,curve:s,tension:f}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:Jg(n),optional:!0}},n,$7),this.z=a,this.curve=kp(s,f),qo(this,n)}filter(e){return e}project(e,n,r){this.curve!==Er&&super.project(e,n,r)}render(e,n,r,i,a){const{x:s,y:f}=r,{curve:c}=this;return Pt("svg:g",a).call(De,this,i,a).call(Ie,this,n).call(u=>u.selectAll().data(M4(e,[s,f],this,r)).enter().append("path").call(ce,this).call(_4,this,r).call(z4,this,r,a).attr("d",c===Er&&a.projection?V7(a.path(),s,f):g3().curve(c).defined(l=>l>=0).x(l=>s[l]).y(l=>f[l]))).node()}};function V7(t,e,n){return e=yn(e),n=yn(n),r=>{let i=[];const a=[i];for(const s of r)s===-1?(i=[],a.push(i)):i.push([e[s],n[s]]);return t({type:"MultiLineString",coordinates:a})}}function H7(t,{x:e,y:n,...r}={}){return[e,n]=Ci(e,n),new W7(t,{...r,x:e,y:n})}ie.prototype.plot=function({marks:t=[],...e}={}){return Tp({...e,marks:[...t,this]})};function Y7(t,e={}){if(!t||t.length===0)return[];let n=vn(t[0]),r=e.include?e.include:n;r=ma(e.include||n,e.exclude||[]);let i=ma(n,r);return console.log(r,i),wd(a=>r.map(s=>{let f=m2(i,a);return f[e.key||"key"]=s,f[e.value||"value"]=a[s],f}),t)}class X7{add(e,n,r){let i=`${r.view.id}::${r.eventname}`;return Dt(this[i])?this[i]={iact:r,oldVal:e,newVal:n}:this[i].newVal=n,console.log("WriteSet.add",i,this[i]),this}forEach(e){Ln(this).forEach(e)}merge(e){if(Dt(e))return this;e.forEach(({iact:n,oldVal:r,newVal:i})=>{this.add(r,i,n)})}}const gn=Jt(Array),xh=()=>null;function hr(t,e,n){if(Jt(String,e))t[e]=n;else if(gn(e)){let[r,...i]=e;Dt(t[r])&&(t[r]={}),Kt(i)?hr(t,r,n):hr(t[r],i,n)}}function to(t,e,n){if(Jt(String,e))Dt(t[e])&&(t[e]=[]),t[e].push(n);else if(gn(e)){let[r,...i]=e;Dt(t[r])&&(t[r]=Kt(i)?[]:{}),Kt(i)?to(t,r,n):to(t[r],i,n)}}function hn(t,e,n){if(Jt(String,e))return t[e]||(Jt(Function,n)?n():n);if(gn(e)){let[r,...i]=e;return Dt(t[r])?Jt(Function,n)?n():n:Kt(i)?hn(t,r,n):hn(t[r],i,n)}}class G7{constructor(){this.defaults={},this.dependencies={},this.view2iacts={},this.states={},this.viewData={}}add(e,n,r=xh,i){if(!e.attr)return this;let a=e.view.id,s=e.eventname;return to(this.dependencies,[a,s],{view:n,domainfunction:r}),to(this.view2iacts,n.id,e),this.setDefault(n,i),this}dependentViews(e){let n=e.eventname;return hn(this.dependencies,[e.view.id,n],[])}cmp(e,n){return this.isDependentOn(e.view,n)?1:this.isDependentOn(n.view,e)?-1:0}isDependentOn(e,n){let r=this.getAncestorIacts(e);return _d(i=>(i.store??i)==n,r)}setDefault(e,n){return Dt(n)||(this.defaults[e.id]=n),this}getDefault(e,n){return(hn(this.defaults,e.id)??xh)(n,this.getAncestorIacts(e))}getAncestorIacts(e){let n=[];return hn(this.view2iacts,e.id,[]).forEach(r=>{n.push(r),n=ya(n,this.getAncestorIacts(r.view))}),n}getStatesKey(e){let n=this.getAncestorIacts(e),r=ya([e.id],n.map(i=>[i.id,i.val()]));return console.debug("ancestorStates",r,JSON.stringify(r)),JSON.stringify(r)}saveState(e,n,r){let i=this.getStatesKey(n.view);!Dt(r)&&Dt(r.states[i])&&hr(r.states,[i,n.eventname],{old:hn(this.states,[i,n.eventname]),iact:n}),console.debug("saveState",i,n.eventname,hn(this.states,[i,n.eventname]),e),hr(this.states,[i,n.eventname],e)}restoreStates(e){tn((n,r)=>{tn(({iact:i,old:a},s)=>{console.debug("restoreState",r,i.eventname,a),hr(this.states,[r,i.eventname],a)},n)},e.states)}getState(e,n,r=!0){let i=this.getStatesKey(e);return Dt(n)?this.states[i]:hn(this.states,[i,n],()=>r?this.getDefault(e,n):void 0)}}class s9{constructor(e){this.interactions={},this.views={},this.backends={},this.i2b={},this.dependencies=new G7,this.transactions=[],this._isaborting=!1,this.backends=e,this._iactid=0,this._xid=0;const n=r=>i=>this.backends.createBackend({...i,type:r});this.backend=r=>this.backends.createBackend(r),this.backend.array=n("array"),this.backend.duckdb=n("duckdb"),this.backend.identity=n("identity"),this.backend.overlay=n("overlay"),this.backend.query=n("query"),this.backend.matching=n("matching")}view(e){if(this.views[e.id]=e,gn(e)){e.forEach(n=>this.view(n));return}this.interactions[e.id]=this.interactions[e.id]??{_attrs:{}},e.magic=this,tn((n,r)=>{if(!Dt(this.interactions[e.id][r]))return;let i=a=>{e.load(o,event)};Object.assign(n,{start:(...a)=>this.start(n,...a),end:()=>this.end(n),abort:()=>this.abort(n),val:()=>Yo(n)??{},load:i,id:this._iactid++,view:e,eventname:r,isActive:!1}),n.get=(a,s=null)=>{if(!Dt(this.interactions[e.id]._attrs[a]))return this.interactions[e.id]._attrs[a];let f={store:n,attr:a,view:e,eventname:r,load:i,default:s,id:this._iactid++,val:()=>{let c=Yo(n);return _a(a)(c)?c[a]:(Kt(c)||console.error("could not find attr:",vn(Yo(n)).length),Jt(Function,s)?s():s)},start:()=>this.start(f),end:()=>this.end(f),abort:()=>this.abort(f)};return this.interactions[e.id]._attrs[a]=f,f},this.interactions[e.id][r]=n},e.interactions)}render(e,n,r,i={}){return e=gn(e)?e:[e],n=gn(n)?n:[n],e.map(s=>{if(Jt(yb,s))return s;let f=this.backend.identity();return this.connect(f,s),f}).forEach(s=>{n.forEach(f=>s.registerView(f,r,i))}),this}saveBackends(e){console.debug("save backends invoked on: ",e),e=gn(e)?e:[e],e.forEach(n=>{n.registerView((r,i)=>{console.debug("saveBackend",this,n,r,i),tn((a,s)=>{tn((f,c)=>{f.forEach(u=>{console.debug("saveBackend.DependencyLeaf.ViewIact",u.view.id,this.i2b[u.view.id]);let l=this.dependencies.getAncestorIacts(u.view),d=ya([n.id],l.map(h=>[h.id,h.val()]));Kt(c2(vn(this.i2b[u.view.id]),n.id))||(console.debug("saveBackend.View",n.id,u.view.id),this.dependencies.viewData[d]=r)})},a)},this.dependencies.dependencies)})})}connect(e,n,r){var s;if(gn(n)){n.forEach(f=>this.connect(e,f,r));return}let i=n,a=i.view;Dt(this.i2b[a.id])&&(i.subscribe(f=>{console.log("iact.subscribe.handleEvent",a.id,i.id),this.handleEvent(f,i)}),i.store?i.store.isActive=!0:i.isActive=!0,(s=a.registerInteraction)==null||s.call(a,i),this.i2b[a.id]={}),Dt(e)||hr(this.i2b,[a.id,e.id],this.processBindings(r))}processBindings(e){if(Dt(e)||Kt(e))return js;if(Jt(Function,e))return e;let n=xu(Qb(Jt(Array),Jt(Object)),Sn(r=>this.processBindings(r)),xu(Jt(Function),js,r=>()=>r))(e);return _a("*",e)?r=>_b(r,Su(n)(r)):Su(n)}saveIactState(e,n,r){this.dependencies.saveState(e,n,r),this.dependencies.dependentViews(n).forEach(({view:i,domainfunction:a})=>{if(a){let f=this.dependencies.getAncestorIacts(i);i.render(a(e,f))}let s=this.dependencies.getState(i);tn((f,c)=>{f=f??this.dependencies.getDefault(i,c),f&&(console.debug("saveIactState.load",i.id,c,f),i.load(f,c))},s),(Dt(s)||Kt(s))&&(console.debug("saveIactState.load.default",i.id),i.load(this.dependencies.getDefault(i)))})}handleEvent(e,n){if(!Dt(e))if(console.log("handleEvent",this._isaborting,n.view.id,e),this._isaborting)this.dependencies.saveState(e,n,null),this.sendEventToBackends(e,n);else if(this.transactions.length==0||Zo(this.transactions).iact!=n)n.start(),this.handleEvent(e,n),n.end();else{let r=Zo(this.transactions),i=this.dependencies.getState(n.view,n.eventname,!1);r.writeSet.add(i,e,n),r.visible&&this.sendEventToBackends(e,n)}}sendEventToBackends(e,n){tn((r,i)=>{let a=r(e);this.backends[i].execute(a,n)},this.i2b[n.view.id])}snapshot(){return l2(e=>e.snapshot(),this.backends)}restoreSnapshot(e){tn((n,r)=>{Dt(n)||this.backends[r].restoreSnapshot(n)},e.snapshot)}start(e,n=!0){this.transactions.push({xid:this._xid++,iact:e,visible:n,snapshot:this.snapshot(),states:{},writeSet:new X7}),console.log("magic.start",this.transactions)}end(e){if(!_d(a=>a.iact=e,this.transactions)){console.log("magic.end: can't find interaction",e);return}let n=this.transactions.pop();console.log("magic.end[",n.writeSet),n.writeSet.forEach(({newVal:a,iact:s})=>{this.saveIactState(a,s,n),n.visible||this.sendEventToBackends(a,s)});let r=Ln(n.writeSet).map(({iact:a})=>a.id),i=wd(a=>Ln(a).map(({iact:s})=>s.id),Ln(n.states));if(Kt(_2(r,i))||console.error("writeset != statesids",r,i),this.transactions.length>0){let a=Zo(this.transactions);a.snapshot=vu(a.snapshot,n.snapshot),a.states=vu(a.states,n.states),a.writeSet.merge(n.writeSet)}console.log("magic.end]",this.dependencies.states,this.transactions)}abort(e){try{this._isaborting=!0;let n=this.transactions.pop();console.log("magic.abort",n.states,n.writeSet),this.restoreSnapshot(n),console.log("magic.abort.restoredStates.before",wb(this.dependencies.states)),this.dependencies.restoreStates(n),console.log("magic.abort.restoredStates.after",this.dependencies.states),b2((i,a)=>this.dependencies.cmp(i.iact,a.iact),Ln(n.writeSet)).forEach(({iact:i})=>{let a=this.dependencies.getState(i.view,i.eventname);a&&i.view.load&&(console.log("magic.abort.load",a,i),i.view.load(a,i.eventname))})}finally{this._isaborting=!1}}importState(e){let n=JSON.parse(e);this.dependencies.states=n,tn((r,i)=>{let a=this.views[i];this.walkViews(a)},this.dependencies.dependencies)}walkViews(e){let n=this.dependencies.getStatesKey(e),r=this.dependencies.states[n],i=Ln(r);if(i.length>1){console.error("unexpected behavior, multiple values for state");return}e.load(i[0])}exportState(){return JSON.stringify(this.dependencies.states)}exportData(){return JSON.stringify(this.dependencies.viewData)}}const eo="_theplot_",Z7={top:30,right:20,bottom:50,left:40};function Ho(t,e){t.className=t.className||eo,Dt(t.width);let n=Tp(t),r=null;return n.tagName=="svg"&&n.classList.contains(t.className)?r=n:r=n.querySelector(`svg.${t.className}`),r.classList.add(eo),t.width||r.setAttribute("width","100%"),t.height||r.setAttribute("height","100%"),e.innerHTML="",e.appendChild(n),n}class ou{constructor({iact:e,magic:n,plot:r=null}){this.x=null,this.y=null,this.defaultSelection,this.brush,this.el,this.iact=e,this.magic=n,this.plot=r,r&&this.init(r)}load(e){if(!(!this.el||!this.brush)&&this.iact.isActive){if(!e||Kt(e)){this.el.call(this.brush.clear);return}const{left:n,right:r}=e;this.el.call(this.brush.move,[this.x.apply(n),this.x.apply(r)])}}brushed({selection:e}){if(this.iact.isActive)if(!e)this.iact.set(this.defaultSelection);else{const[n,r]=e;this.iact.set({left:this.x.invert(n),right:this.x.invert(r)})}}brushstart({selection:e,sourceEvent:n}){this.iact.isActive&&n&&this.magic.start(this.iact)}brushended({selection:e,sourceEvent:n}){this.iact.isActive&&(e||this.iact.set({left:this.x.domain[0],right:this.x.domain[1]}),n&&this.magic.end(this.iact))}init(e){if(!this.iact.isActive)return;if(this.plot=e,this.x=e.scale("x"),this.y=e.scale("y"),this.y.range[0]<this.y.range[1]){let r=this.y.range[0];this.y.range[0]=this.y.range[1],this.y.range[1]=r}this.defaultSelection={left:this.x.domain[0],right:this.x.domain[1]};let n=e.classList.contains(eo)?jt(e):jt(e.querySelector(`.${eo}`));this.brush=My().extent([[this.x.range[0],this.y.range[1]],[this.x.range[1],this.y.range[0]]]).on("brush",r=>this.brushed(r)).on("start",r=>this.brushstart(r)).on("end",r=>this.brushended(r)),this.el=n.append("g").attr("class","brush").call(this.brush)}}function J7(t){let e,n;return{c(){e=ot("div"),n=ot("div"),this.h()},l(r){e=st(r,"DIV",{id:!0});var i=ct(e);n=st(i,"DIV",{}),ct(n).forEach(H),i.forEach(H),this.h()},h(){$(e,"id",t[0])},m(r,i){pt(r,e,i),et(e,n),t[17](n)},p(r,[i]){i&1&&$(e,"id",r[0])},i:It,o:It,d(r){r&&H(e),t[17](null)}}}function K7(t,e,n){let{id:r,name:i,magic:a,description:s,xAttr:f,yAttr:c,xDomainMin:u=null,xDomainMax:l=null,brushX:d=ee({}),interactions:h={brushX:d}}=e,{type:g}=e,{selector:m}=e,p,b=null,y={},_=[],M;const w=["#93c1cf","#feb144","#9ee09e","#ff6663"];function S(E,k){return k==="overlay"?(y=E,!0):!1}function v(E,k){!E||E.length===0||typeof k=="object"||(S(E,k)?console.debug("overlays"):_=E,x())}let{load:T=E=>M==null?void 0:M.load(E)}=e;function x(){n(2,u=u??ze(Sn($s(f),_))),n(3,l=l??se(Sn($s(f),_)));const E=Math.max(36,Math.min(_.length,20));let k={x:{domain:[+u,+l]},height:200,marginBottom:50,color:{range:w,legend:!0,style:{"font-size":10,"margin-left":"2rem"}},marks:[Or({ticks:E,fontSize:10}),Bi({fontSize:10}),Xc([u]),Gc([0]),iu(y,{x1:"left",x2:"right",y2:se(Gf(c,_)),fill:"key",color:"key"}),H7(_,{x:f,y:c,marker:!0,strokeWidth:3})]};b=Ho(k,p),d.isActive&&(M=M??new ou({iact:d,magic:a}),M.init(b))}function N(E){Nr[E?"unshift":"push"](()=>{p=E,n(1,p)})}return t.$$set=E=>{"id"in E&&n(4,r=E.id),"name"in E&&n(0,i=E.name),"magic"in E&&n(5,a=E.magic),"description"in E&&n(6,s=E.description),"xAttr"in E&&n(7,f=E.xAttr),"yAttr"in E&&n(8,c=E.yAttr),"xDomainMin"in E&&n(2,u=E.xDomainMin),"xDomainMax"in E&&n(3,l=E.xDomainMax),"brushX"in E&&n(9,d=E.brushX),"interactions"in E&&n(10,h=E.interactions),"type"in E&&n(11,g=E.type),"selector"in E&&n(12,m=E.selector),"load"in E&&n(15,T=E.load)},[i,p,u,l,r,a,s,f,c,d,h,g,m,S,v,T,x,N]}class f9 extends We{constructor(e){super(),Ve(this,e,K7,J7,He,{id:4,name:0,magic:5,description:6,xAttr:7,yAttr:8,xDomainMin:2,xDomainMax:3,brushX:9,interactions:10,type:11,selector:12,overlay:13,render:14,load:15,update:16})}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),V()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),V()}get magic(){return this.$$.ctx[5]}set magic(e){this.$$set({magic:e}),V()}get description(){return this.$$.ctx[6]}set description(e){this.$$set({description:e}),V()}get xAttr(){return this.$$.ctx[7]}set xAttr(e){this.$$set({xAttr:e}),V()}get yAttr(){return this.$$.ctx[8]}set yAttr(e){this.$$set({yAttr:e}),V()}get xDomainMin(){return this.$$.ctx[2]}set xDomainMin(e){this.$$set({xDomainMin:e}),V()}get xDomainMax(){return this.$$.ctx[3]}set xDomainMax(e){this.$$set({xDomainMax:e}),V()}get brushX(){return this.$$.ctx[9]}set brushX(e){this.$$set({brushX:e}),V()}get interactions(){return this.$$.ctx[10]}set interactions(e){this.$$set({interactions:e}),V()}get type(){return this.$$.ctx[11]}set type(e){this.$$set({type:e}),V()}get selector(){return this.$$.ctx[12]}set selector(e){this.$$set({selector:e}),V()}get overlay(){return this.$$.ctx[13]}get render(){return this.$$.ctx[14]}get load(){return this.$$.ctx[15]}set load(e){this.$$set({load:e}),V()}get update(){return this.$$.ctx[16]}}function Th(t){return Object.prototype.toString.call(t)==="[object Date]"}function jf(t,e,n,r){if(typeof n=="number"||Th(n)){const i=r-n,a=(n-e)/(t.dt||1/60),s=t.opts.stiffness*i,f=t.opts.damping*a,c=(s-f)*t.inv_mass,u=(a+c)*t.dt;return Math.abs(u)<t.opts.precision&&Math.abs(i)<t.opts.precision?r:(t.settled=!1,Th(n)?new Date(n.getTime()+u):n+u)}else{if(Array.isArray(n))return n.map((i,a)=>jf(t,e[a],n[a],r[a]));if(typeof n=="object"){const i={};for(const a in n)i[a]=jf(t,e[a],n[a],r[a]);return i}else throw new Error(`Cannot spring ${typeof n} values`)}}function Q7(t,e={}){const n=ee(t),{stiffness:r=.15,damping:i=.8,precision:a=.01}=e;let s,f,c,u=t,l=t,d=1,h=0,g=!1;function m(b,y={}){l=b;const _=c={};return t==null||y.hard||p.stiffness>=1&&p.damping>=1?(g=!0,s=uu(),u=b,n.set(t=l),Promise.resolve()):(y.soft&&(h=1/((y.soft===!0?.5:+y.soft)*60),d=0),f||(s=uu(),g=!1,f=Jp(M=>{if(g)return g=!1,f=null,!1;d=Math.min(d+h,1);const w={inv_mass:d,opts:p,settled:!0,dt:(M-s)*60/1e3},S=jf(w,u,t,l);return s=M,u=t,n.set(t=S),w.settled&&(f=null),!w.settled})),new Promise(M=>{f.promise.then(()=>{_===c&&M()})}))}const p={set:m,update:(b,y)=>m(b(l,t),y),subscribe:n.subscribe,stiffness:r,damping:i,precision:a};return p}function Ah(t,e,n){const r=t.slice();return r[37]=e[n],r[39]=n,r}function kh(t){let e,n,r,i,a=(t[6]==="label"||t[7]==="label")&&Eh(t);return{c(){e=ot("span"),a&&a.c(),this.h()},l(s){e=st(s,"SPAN",{class:!0,style:!0});var f=ct(e);a&&a.l(f),f.forEach(H),this.h()},h(){$(e,"class","pip first"),$(e,"style",n=t[14]+": 0%;"),at(e,"selected",t[18](t[0])),at(e,"in-range",t[17](t[0]))},m(s,f){pt(s,e,f),a&&a.m(e,null),r||(i=[vt(e,"pointerdown",t[30]),vt(e,"pointerup",t[31])],r=!0)},p(s,f){s[6]==="label"||s[7]==="label"?a?a.p(s,f):(a=Eh(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null),f[0]&16384&&n!==(n=s[14]+": 0%;")&&$(e,"style",n),f[0]&262145&&at(e,"selected",s[18](s[0])),f[0]&131073&&at(e,"in-range",s[17](s[0]))},d(s){s&&H(e),a&&a.d(),r=!1,An(i)}}}function Eh(t){let e,n,r,i=t[12](t[16](t[0]),0,0)+"",a,s=t[10]&&Ch(t),f=t[11]&&Nh(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(H),this.h()},h(){r.a=a,$(e,"class","pipVal")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[10]?s?s.p(c,u):(s=Ch(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&69633&&i!==(i=c[12](c[16](c[0]),0,0)+"")&&r.p(i),c[11]?f?f.p(c,u):(f=Nh(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&H(e),s&&s.d(),f&&f.d()}}}function Ch(t){let e,n;return{c(){e=ot("span"),n=Vt(t[10]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[10]),i.forEach(H),this.h()},h(){$(e,"class","pipVal-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&1024&&ue(n,r[10])},d(r){r&&H(e)}}}function Nh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[11]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[11]),i.forEach(H),this.h()},h(){$(e,"class","pipVal-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&2048&&ue(n,r[11])},d(r){r&&H(e)}}}function Dh(t){let e,n=Array(t[20]+1),r=[];for(let i=0;i<n.length;i+=1)r[i]=Ph(Ah(t,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=Nt()},l(i){for(let a=0;a<r.length;a+=1)r[a].l(i);e=Nt()},m(i,a){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,a);pt(i,e,a)},p(i,a){if(a[0]&8314435){n=Array(i[20]+1);let s;for(s=0;s<n.length;s+=1){const f=Ah(i,n,s);r[s]?r[s].p(f,a):(r[s]=Ph(f),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(i){co(r,i),i&&H(e)}}}function Ih(t){let e,n,r,i,a,s=(t[6]==="label"||t[9]==="label")&&Lh(t);function f(...c){return t[33](t[39],...c)}return{c(){e=ot("span"),s&&s.c(),n=Gt(),this.h()},l(c){e=st(c,"SPAN",{class:!0,style:!0});var u=ct(e);s&&s.l(u),n=Zt(u),u.forEach(H),this.h()},h(){$(e,"class","pip"),$(e,"style",r=t[14]+": "+t[15](t[19](t[39]))+"%;"),at(e,"selected",t[18](t[19](t[39]))),at(e,"in-range",t[17](t[19](t[39])))},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),i||(a=[vt(e,"pointerdown",t[32]),vt(e,"pointerup",f)],i=!0)},p(c,u){t=c,t[6]==="label"||t[9]==="label"?s?s.p(t,u):(s=Lh(t),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&573440&&r!==(r=t[14]+": "+t[15](t[19](t[39]))+"%;")&&$(e,"style",r),u[0]&786432&&at(e,"selected",t[18](t[19](t[39]))),u[0]&655360&&at(e,"in-range",t[17](t[19](t[39])))},d(c){c&&H(e),s&&s.d(),i=!1,An(a)}}}function Lh(t){let e,n,r,i=t[12](t[19](t[39]),t[39],t[15](t[19](t[39])))+"",a,s=t[10]&&Fh(t),f=t[11]&&Oh(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(H),this.h()},h(){r.a=a,$(e,"class","pipVal")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[10]?s?s.p(c,u):(s=Fh(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&561152&&i!==(i=c[12](c[19](c[39]),c[39],c[15](c[19](c[39])))+"")&&r.p(i),c[11]?f?f.p(c,u):(f=Oh(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&H(e),s&&s.d(),f&&f.d()}}}function Fh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[10]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[10]),i.forEach(H),this.h()},h(){$(e,"class","pipVal-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&1024&&ue(n,r[10])},d(r){r&&H(e)}}}function Oh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[11]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[11]),i.forEach(H),this.h()},h(){$(e,"class","pipVal-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&2048&&ue(n,r[11])},d(r){r&&H(e)}}}function Ph(t){let e=t[19](t[39])!==t[0]&&t[19](t[39])!==t[1],n,r=e&&Ih(t);return{c(){r&&r.c(),n=Nt()},l(i){r&&r.l(i),n=Nt()},m(i,a){r&&r.m(i,a),pt(i,n,a)},p(i,a){a[0]&524291&&(e=i[19](i[39])!==i[0]&&i[19](i[39])!==i[1]),e?r?r.p(i,a):(r=Ih(i),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(i){r&&r.d(i),i&&H(n)}}}function Rh(t){let e,n,r,i,a=(t[6]==="label"||t[8]==="label")&&Bh(t);return{c(){e=ot("span"),a&&a.c(),this.h()},l(s){e=st(s,"SPAN",{class:!0,style:!0});var f=ct(e);a&&a.l(f),f.forEach(H),this.h()},h(){$(e,"class","pip last"),$(e,"style",n=t[14]+": 100%;"),at(e,"selected",t[18](t[1])),at(e,"in-range",t[17](t[1]))},m(s,f){pt(s,e,f),a&&a.m(e,null),r||(i=[vt(e,"pointerdown",t[34]),vt(e,"pointerup",t[35])],r=!0)},p(s,f){s[6]==="label"||s[8]==="label"?a?a.p(s,f):(a=Bh(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null),f[0]&16384&&n!==(n=s[14]+": 100%;")&&$(e,"style",n),f[0]&262146&&at(e,"selected",s[18](s[1])),f[0]&131074&&at(e,"in-range",s[17](s[1]))},d(s){s&&H(e),a&&a.d(),r=!1,An(i)}}}function Bh(t){let e,n,r,i=t[12](t[16](t[1]),t[20],100)+"",a,s=t[10]&&Uh(t),f=t[11]&&zh(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(H),this.h()},h(){r.a=a,$(e,"class","pipVal")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[10]?s?s.p(c,u):(s=Uh(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&1118210&&i!==(i=c[12](c[16](c[1]),c[20],100)+"")&&r.p(i),c[11]?f?f.p(c,u):(f=zh(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&H(e),s&&s.d(),f&&f.d()}}}function Uh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[10]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[10]),i.forEach(H),this.h()},h(){$(e,"class","pipVal-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&1024&&ue(n,r[10])},d(r){r&&H(e)}}}function zh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[11]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[11]),i.forEach(H),this.h()},h(){$(e,"class","pipVal-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&2048&&ue(n,r[11])},d(r){r&&H(e)}}}function tv(t){let e,n,r,i=(t[6]&&t[7]!==!1||t[7])&&kh(t),a=(t[6]&&t[9]!==!1||t[9])&&Dh(t),s=(t[6]&&t[8]!==!1||t[8])&&Rh(t);return{c(){e=ot("div"),i&&i.c(),n=Gt(),a&&a.c(),r=Gt(),s&&s.c(),this.h()},l(f){e=st(f,"DIV",{class:!0});var c=ct(e);i&&i.l(c),n=Zt(c),a&&a.l(c),r=Zt(c),s&&s.l(c),c.forEach(H),this.h()},h(){$(e,"class","rangePips"),at(e,"disabled",t[5]),at(e,"hoverable",t[4]),at(e,"vertical",t[2]),at(e,"reversed",t[3]),at(e,"focus",t[13])},m(f,c){pt(f,e,c),i&&i.m(e,null),et(e,n),a&&a.m(e,null),et(e,r),s&&s.m(e,null)},p(f,c){f[6]&&f[7]!==!1||f[7]?i?i.p(f,c):(i=kh(f),i.c(),i.m(e,n)):i&&(i.d(1),i=null),f[6]&&f[9]!==!1||f[9]?a?a.p(f,c):(a=Dh(f),a.c(),a.m(e,r)):a&&(a.d(1),a=null),f[6]&&f[8]!==!1||f[8]?s?s.p(f,c):(s=Rh(f),s.c(),s.m(e,null)):s&&(s.d(1),s=null),c[0]&32&&at(e,"disabled",f[5]),c[0]&16&&at(e,"hoverable",f[4]),c[0]&4&&at(e,"vertical",f[2]),c[0]&8&&at(e,"reversed",f[3]),c[0]&8192&&at(e,"focus",f[13])},i:It,o:It,d(f){f&&H(e),i&&i.d(),a&&a.d(),s&&s.d()}}}function ev(t,e,n){let r,i,a,s,f,{range:c=!1}=e,{min:u=0}=e,{max:l=100}=e,{step:d=1}=e,{values:h=[(l+u)/2]}=e,{vertical:g=!1}=e,{reversed:m=!1}=e,{hoverable:p=!0}=e,{disabled:b=!1}=e,{pipstep:y=void 0}=e,{all:_=!0}=e,{first:M=void 0}=e,{last:w=void 0}=e,{rest:S=void 0}=e,{prefix:v=""}=e,{suffix:T=""}=e,{formatter:x=(I,tt,nt)=>I}=e,{focus:N=void 0}=e,{orientationStart:E=void 0}=e,{percentOf:k=void 0}=e,{moveHandle:U=void 0}=e,{fixFloat:R=void 0}=e,{normalisedClient:B=void 0}=e,A;function P(I){I=B(I),A={x:I.clientX,y:I.clientY}}function C(I,tt){if(tt=B(tt),!b){const nt=Math.sqrt(Math.pow(A.x-tt.clientX,2)+Math.pow(A.y-tt.clientY,2));A&&nt<=5&&U(void 0,I)}}const Y=I=>{P(I)},X=I=>{C(u,I)},L=I=>{P(I)},z=(I,tt)=>{C(a(I),tt)},W=I=>{P(I)},q=I=>{C(l,I)};return t.$$set=I=>{"range"in I&&n(23,c=I.range),"min"in I&&n(0,u=I.min),"max"in I&&n(1,l=I.max),"step"in I&&n(24,d=I.step),"values"in I&&n(25,h=I.values),"vertical"in I&&n(2,g=I.vertical),"reversed"in I&&n(3,m=I.reversed),"hoverable"in I&&n(4,p=I.hoverable),"disabled"in I&&n(5,b=I.disabled),"pipstep"in I&&n(26,y=I.pipstep),"all"in I&&n(6,_=I.all),"first"in I&&n(7,M=I.first),"last"in I&&n(8,w=I.last),"rest"in I&&n(9,S=I.rest),"prefix"in I&&n(10,v=I.prefix),"suffix"in I&&n(11,T=I.suffix),"formatter"in I&&n(12,x=I.formatter),"focus"in I&&n(13,N=I.focus),"orientationStart"in I&&n(14,E=I.orientationStart),"percentOf"in I&&n(15,k=I.percentOf),"moveHandle"in I&&n(27,U=I.moveHandle),"fixFloat"in I&&n(16,R=I.fixFloat),"normalisedClient"in I&&n(28,B=I.normalisedClient)},t.$$.update=()=>{t.$$.dirty[0]&83886087&&n(29,r=y||((l-u)/d>=(g?50:100)?(l-u)/(g?10:20):1)),t.$$.dirty[0]&553648131&&n(20,i=parseInt((l-u)/(d*r),10)),t.$$.dirty[0]&553713665&&n(19,a=function(I){return R(u+I*d*r)}),t.$$.dirty[0]&33619968&&n(18,s=function(I){return h.some(tt=>R(tt)===R(I))}),t.$$.dirty[0]&41943040&&n(17,f=function(I){if(c==="min")return h[0]>I;if(c==="max")return h[0]<I;if(c)return h[0]<I&&h[1]>I})},[u,l,g,m,p,b,_,M,w,S,v,T,x,N,E,k,R,f,s,a,i,P,C,c,d,h,y,U,B,r,Y,X,L,z,W,q]}class nv extends We{constructor(e){super(),Ve(this,e,ev,tv,He,{range:23,min:0,max:1,step:24,values:25,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:26,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:27,fixFloat:16,normalisedClient:28},null,[-1,-1])}}function qh(t,e,n){const r=t.slice();return r[65]=e[n],r[67]=n,r}function jh(t){let e,n,r,i=t[21](t[65],t[67],t[24](t[65]))+"",a,s=t[18]&&$h(t),f=t[19]&&Wh(t);return{c(){e=ot("span"),s&&s.c(),n=Nt(),r=new so(!1),a=Nt(),f&&f.c(),this.h()},l(c){e=st(c,"SPAN",{class:!0});var u=ct(e);s&&s.l(u),n=Nt(),r=fo(u,!1),a=Nt(),f&&f.l(u),u.forEach(H),this.h()},h(){r.a=a,$(e,"class","rangeFloat")},m(c,u){pt(c,e,u),s&&s.m(e,null),et(e,n),r.m(i,e),et(e,a),f&&f.m(e,null)},p(c,u){c[18]?s?s.p(c,u):(s=$h(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),u[0]&18874369&&i!==(i=c[21](c[65],c[67],c[24](c[65]))+"")&&r.p(i),c[19]?f?f.p(c,u):(f=Wh(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(c){c&&H(e),s&&s.d(),f&&f.d()}}}function $h(t){let e,n;return{c(){e=ot("span"),n=Vt(t[18]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[18]),i.forEach(H),this.h()},h(){$(e,"class","rangeFloat-prefix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&262144&&ue(n,r[18])},d(r){r&&H(e)}}}function Wh(t){let e,n;return{c(){e=ot("span"),n=Vt(t[19]),this.h()},l(r){e=st(r,"SPAN",{class:!0});var i=ct(e);n=Ht(i,t[19]),i.forEach(H),this.h()},h(){$(e,"class","rangeFloat-suffix")},m(r,i){pt(r,e,i),et(e,n)},p(r,i){i[0]&524288&&ue(n,r[19])},d(r){r&&H(e)}}}function Vh(t){let e,n,r,i,a,s,f,c,u,l,d,h,g,m=t[7]&&jh(t);return{c(){e=ot("span"),n=ot("span"),r=Gt(),m&&m.c(),this.h()},l(p){e=st(p,"SPAN",{role:!0,class:!0,"data-handle":!0,style:!0,"aria-label":!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-orientation":!0,"aria-disabled":!0,disabled:!0,tabindex:!0});var b=ct(e);n=st(b,"SPAN",{class:!0}),ct(n).forEach(H),r=Zt(b),m&&m.l(b),b.forEach(H),this.h()},h(){$(n,"class","rangeNub"),$(e,"role","slider"),$(e,"class","rangeHandle"),$(e,"data-handle",t[67]),$(e,"style",i=t[29]+": "+t[30][t[67]]+"%; z-index: "+(t[27]===t[67]?3:2)+";"),$(e,"aria-label",a=t[22][t[67]]),$(e,"aria-valuemin",s=t[2]===!0&&t[67]===1?t[0][0]:t[3]),$(e,"aria-valuemax",f=t[2]===!0&&t[67]===0?t[0][1]:t[4]),$(e,"aria-valuenow",c=t[65]),$(e,"aria-valuetext",u=""+(t[18]+Gh(t[21](t[65],t[67],t[24](t[65])))+t[19])),$(e,"aria-orientation",l=t[6]?"vertical":"horizontal"),$(e,"aria-disabled",t[10]),$(e,"disabled",t[10]),$(e,"tabindex",d=t[10]?-1:0),at(e,"active",t[25]&&t[27]===t[67]),at(e,"press",t[26]&&t[27]===t[67])},m(p,b){pt(p,e,b),et(e,n),et(e,r),m&&m.m(e,null),h||(g=[vt(e,"blur",t[35]),vt(e,"focus",t[36]),vt(e,"keydown",t[37])],h=!0)},p(p,b){p[7]?m?m.p(p,b):(m=jh(p),m.c(),m.m(e,null)):m&&(m.d(1),m=null),b[0]&1744830464&&i!==(i=p[29]+": "+p[30][p[67]]+"%; z-index: "+(p[27]===p[67]?3:2)+";")&&$(e,"style",i),b[0]&4194304&&a!==(a=p[22][p[67]])&&$(e,"aria-label",a),b[0]&13&&s!==(s=p[2]===!0&&p[67]===1?p[0][0]:p[3])&&$(e,"aria-valuemin",s),b[0]&21&&f!==(f=p[2]===!0&&p[67]===0?p[0][1]:p[4])&&$(e,"aria-valuemax",f),b[0]&1&&c!==(c=p[65])&&$(e,"aria-valuenow",c),b[0]&19660801&&u!==(u=""+(p[18]+Gh(p[21](p[65],p[67],p[24](p[65])))+p[19]))&&$(e,"aria-valuetext",u),b[0]&64&&l!==(l=p[6]?"vertical":"horizontal")&&$(e,"aria-orientation",l),b[0]&1024&&$(e,"aria-disabled",p[10]),b[0]&1024&&$(e,"disabled",p[10]),b[0]&1024&&d!==(d=p[10]?-1:0)&&$(e,"tabindex",d),b[0]&167772160&&at(e,"active",p[25]&&p[27]===p[67]),b[0]&201326592&&at(e,"press",p[26]&&p[27]===p[67])},d(p){p&&H(e),m&&m.d(),h=!1,An(g)}}}function Hh(t){let e,n;return{c(){e=ot("span"),this.h()},l(r){e=st(r,"SPAN",{class:!0,style:!0}),ct(e).forEach(H),this.h()},h(){$(e,"class","rangeBar"),$(e,"style",n=t[29]+": "+t[33](t[30])+"%; "+t[28]+": "+t[34](t[30])+"%;")},m(r,i){pt(r,e,i)},p(r,i){i[0]&1879048192&&n!==(n=r[29]+": "+r[33](r[30])+"%; "+r[28]+": "+r[34](r[30])+"%;")&&$(e,"style",n)},d(r){r&&H(e)}}}function Yh(t){let e,n;return e=new nv({props:{values:t[0],min:t[3],max:t[4],step:t[5],range:t[2],vertical:t[6],reversed:t[8],orientationStart:t[29],hoverable:t[9],disabled:t[10],all:t[13],first:t[14],last:t[15],rest:t[16],pipstep:t[12],prefix:t[18],suffix:t[19],formatter:t[20],focus:t[25],percentOf:t[24],moveHandle:t[32],fixFloat:t[31],normalisedClient:da}}),{c(){od(e.$$.fragment)},l(r){sd(e.$$.fragment,r)},m(r,i){fd(e,r,i),n=!0},p(r,i){const a={};i[0]&1&&(a.values=r[0]),i[0]&8&&(a.min=r[3]),i[0]&16&&(a.max=r[4]),i[0]&32&&(a.step=r[5]),i[0]&4&&(a.range=r[2]),i[0]&64&&(a.vertical=r[6]),i[0]&256&&(a.reversed=r[8]),i[0]&536870912&&(a.orientationStart=r[29]),i[0]&512&&(a.hoverable=r[9]),i[0]&1024&&(a.disabled=r[10]),i[0]&8192&&(a.all=r[13]),i[0]&16384&&(a.first=r[14]),i[0]&32768&&(a.last=r[15]),i[0]&65536&&(a.rest=r[16]),i[0]&4096&&(a.pipstep=r[12]),i[0]&262144&&(a.prefix=r[18]),i[0]&524288&&(a.suffix=r[19]),i[0]&1048576&&(a.formatter=r[20]),i[0]&33554432&&(a.focus=r[25]),i[0]&16777216&&(a.percentOf=r[24]),e.$set(a)},i(r){n||(Kr(e.$$.fragment,r),n=!0)},o(r){ga(e.$$.fragment,r),n=!1},d(r){cd(e,r)}}}function rv(t){let e,n,r,i,a,s,f=t[0],c=[];for(let d=0;d<f.length;d+=1)c[d]=Vh(qh(t,f,d));let u=t[2]&&Hh(t),l=t[11]&&Yh(t);return{c(){e=ot("div");for(let d=0;d<c.length;d+=1)c[d].c();n=Gt(),u&&u.c(),r=Gt(),l&&l.c(),this.h()},l(d){e=st(d,"DIV",{id:!0,role:!0,class:!0});var h=ct(e);for(let g=0;g<c.length;g+=1)c[g].l(h);n=Zt(h),u&&u.l(h),r=Zt(h),l&&l.l(h),h.forEach(H),this.h()},h(){$(e,"id",t[17]),$(e,"role","none"),$(e,"class","rangeSlider"),at(e,"range",t[2]),at(e,"disabled",t[10]),at(e,"hoverable",t[9]),at(e,"vertical",t[6]),at(e,"reversed",t[8]),at(e,"focus",t[25]),at(e,"min",t[2]==="min"),at(e,"max",t[2]==="max"),at(e,"pips",t[11]),at(e,"pip-labels",t[13]==="label"||t[14]==="label"||t[15]==="label"||t[16]==="label")},m(d,h){pt(d,e,h);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(e,null);et(e,n),u&&u.m(e,null),et(e,r),l&&l.m(e,null),t[51](e),i=!0,a||(s=[vt(window,"mousedown",t[40]),vt(window,"touchstart",t[40]),vt(window,"mousemove",t[41]),vt(window,"touchmove",t[41]),vt(window,"mouseup",t[42]),vt(window,"touchend",t[43]),vt(window,"keydown",t[44]),vt(e,"mousedown",t[38]),vt(e,"mouseup",t[39]),vt(e,"touchstart",lu(t[38])),vt(e,"touchend",lu(t[39]))],a=!0)},p(d,h){if(h[0]&1869350109|h[1]&112){f=d[0];let g;for(g=0;g<f.length;g+=1){const m=qh(d,f,g);c[g]?c[g].p(m,h):(c[g]=Vh(m),c[g].c(),c[g].m(e,n))}for(;g<c.length;g+=1)c[g].d(1);c.length=f.length}d[2]?u?u.p(d,h):(u=Hh(d),u.c(),u.m(e,r)):u&&(u.d(1),u=null),d[11]?l?(l.p(d,h),h[0]&2048&&Kr(l,1)):(l=Yh(d),l.c(),Kr(l,1),l.m(e,null)):l&&(Kp(),ga(l,1,1,()=>{l=null}),Qp()),(!i||h[0]&131072)&&$(e,"id",d[17]),(!i||h[0]&4)&&at(e,"range",d[2]),(!i||h[0]&1024)&&at(e,"disabled",d[10]),(!i||h[0]&512)&&at(e,"hoverable",d[9]),(!i||h[0]&64)&&at(e,"vertical",d[6]),(!i||h[0]&256)&&at(e,"reversed",d[8]),(!i||h[0]&33554432)&&at(e,"focus",d[25]),(!i||h[0]&4)&&at(e,"min",d[2]==="min"),(!i||h[0]&4)&&at(e,"max",d[2]==="max"),(!i||h[0]&2048)&&at(e,"pips",d[11]),(!i||h[0]&122880)&&at(e,"pip-labels",d[13]==="label"||d[14]==="label"||d[15]==="label"||d[16]==="label")},i(d){i||(Kr(l),i=!0)},o(d){ga(l),i=!1},d(d){d&&H(e),co(c,d),u&&u.d(),l&&l.d(),t[51](null),a=!1,An(s)}}}function Xh(t){if(!t)return-1;for(var e=0;t=t.previousElementSibling;)e++;return e}function da(t){return t.type.includes("touch")?t.touches[0]||t.changedTouches[0]:t}function Gh(t){return`${t}`.replace(/<[^>]*>/g,"")}function iv(t,e,n){let r,i,a,s,f,c,u=It,l=()=>(u(),u=Pn(G,D=>n(30,c=D)),G);t.$$.on_destroy.push(()=>u());let{slider:d=void 0}=e,{range:h=!1}=e,{pushy:g=!1}=e,{min:m=0}=e,{max:p=100}=e,{step:b=1}=e,{values:y=[(p+m)/2]}=e,{vertical:_=!1}=e,{float:M=!1}=e,{reversed:w=!1}=e,{hoverable:S=!0}=e,{disabled:v=!1}=e,{pips:T=!1}=e,{pipstep:x=void 0}=e,{all:N=void 0}=e,{first:E=void 0}=e,{last:k=void 0}=e,{rest:U=void 0}=e,{id:R=void 0}=e,{prefix:B=""}=e,{suffix:A=""}=e,{formatter:P=(D,K,xt)=>D}=e,{handleFormatter:C=P}=e,{ariaLabels:Y=[]}=e,{precision:X=2}=e,{springValues:L={stiffness:.15,damping:.4}}=e;const z=tb();let W=0,q=!1,I=!1,tt=!1,nt=!1,j=y.length-1,Q,O,G;const Z=D=>parseFloat((+D).toFixed(X));function F(D){const K=d.querySelectorAll(".handle"),xt=Array.prototype.includes.call(K,D),Tt=Array.prototype.some.call(K,Xe=>Xe.contains(D));return xt||Tt}function mt(D){return h==="min"||h==="max"?D.slice(0,1):h?D.slice(0,2):D}function rt(){return d.getBoundingClientRect()}function yt(D){const K=rt();let xt=0,Tt=0,Xe=0;_?(xt=D.clientY-K.top,Tt=xt/K.height*100,Tt=w?Tt:100-Tt):(xt=D.clientX-K.left,Tt=xt/K.width*100,Tt=w?100-Tt:Tt),Xe=(p-m)/100*Tt+m;let cu;return h===!0&&y[0]===y[1]?Xe>y[1]?1:0:(cu=y.indexOf([...y].sort((Gp,Zp)=>Math.abs(Xe-Gp)-Math.abs(Xe-Zp))[0]),cu)}function St(D){const K=rt();let xt=0,Tt=0,Xe=0;_?(xt=D.clientY-K.top,Tt=xt/K.height*100,Tt=w?Tt:100-Tt):(xt=D.clientX-K.left,Tt=xt/K.width*100,Tt=w?100-Tt:Tt),Xe=(p-m)/100*Tt+m,J(j,Xe)}function J(D,K){return K=a(K),typeof D>"u"&&(D=j),h&&(D===0&&K>y[1]?g?n(0,y[1]=K,y):K=y[1]:D===1&&K<y[0]&&(g?n(0,y[0]=K,y):K=y[0])),y[D]!==K&&n(0,y[D]=K,y),O!==K&&(Yp(),O=K),K}function wt(D){return h==="min"?0:D[0]}function ae(D){return h==="max"?0:h==="min"?100-D[0]:100-D[1]}function Le(D){nt&&(n(25,q=!1),I=!1,n(26,tt=!1))}function Rp(D){v||(n(27,j=Xh(D.target)),n(25,q=!0))}function Bp(D){if(!v){const K=Xh(D.target);let xt=D.ctrlKey||D.metaKey||D.shiftKey?b*10:b,Tt=!1;switch(D.key){case"PageDown":xt*=10;case"ArrowRight":case"ArrowUp":J(K,y[K]+xt),Tt=!0;break;case"PageUp":xt*=10;case"ArrowLeft":case"ArrowDown":J(K,y[K]-xt),Tt=!0;break;case"Home":J(K,m),Tt=!0;break;case"End":J(K,p),Tt=!0;break}Tt&&(D.preventDefault(),D.stopPropagation())}}function Up(D){if(!v){const K=D.target,xt=da(D);n(25,q=!0),I=!0,n(26,tt=!0),n(27,j=yt(xt)),Q=O=a(y[j]),Hp(),D.type==="touchstart"&&!K.matches(".pipVal")&&St(xt)}}function zp(D){D.type==="touchend"&&fu(),n(26,tt=!1)}function qp(D){nt=!1,q&&D.target!==d&&!d.contains(D.target)&&n(25,q=!1)}function jp(D){v||I&&St(da(D))}function $p(D){if(!v){const K=D.target;I&&((K===d||d.contains(K))&&(n(25,q=!0),!F(K)&&!K.matches(".pipVal")&&St(da(D))),fu())}I=!1,n(26,tt=!1)}function Wp(D){I=!1,n(26,tt=!1)}function Vp(D){v||(D.target===d||d.contains(D.target))&&(nt=!0)}function Hp(){!v&&z("start",{activeHandle:j,value:Q,values:y.map(D=>a(D))})}function fu(){!v&&z("stop",{activeHandle:j,startValue:Q,value:y[j],values:y.map(D=>a(D))})}function Yp(){!v&&z("change",{activeHandle:j,startValue:Q,previousValue:typeof O>"u"?Q:O,value:y[j],values:y.map(D=>a(D))})}function Xp(D){Nr[D?"unshift":"push"](()=>{d=D,n(1,d)})}return t.$$set=D=>{"slider"in D&&n(1,d=D.slider),"range"in D&&n(2,h=D.range),"pushy"in D&&n(45,g=D.pushy),"min"in D&&n(3,m=D.min),"max"in D&&n(4,p=D.max),"step"in D&&n(5,b=D.step),"values"in D&&n(0,y=D.values),"vertical"in D&&n(6,_=D.vertical),"float"in D&&n(7,M=D.float),"reversed"in D&&n(8,w=D.reversed),"hoverable"in D&&n(9,S=D.hoverable),"disabled"in D&&n(10,v=D.disabled),"pips"in D&&n(11,T=D.pips),"pipstep"in D&&n(12,x=D.pipstep),"all"in D&&n(13,N=D.all),"first"in D&&n(14,E=D.first),"last"in D&&n(15,k=D.last),"rest"in D&&n(16,U=D.rest),"id"in D&&n(17,R=D.id),"prefix"in D&&n(18,B=D.prefix),"suffix"in D&&n(19,A=D.suffix),"formatter"in D&&n(20,P=D.formatter),"handleFormatter"in D&&n(21,C=D.handleFormatter),"ariaLabels"in D&&n(22,Y=D.ariaLabels),"precision"in D&&n(46,X=D.precision),"springValues"in D&&n(47,L=D.springValues)},t.$$.update=()=>{if(t.$$.dirty[0]&24&&n(50,i=function(D){return D<=m?m:D>=p?p:D}),t.$$.dirty[0]&56|t.$$.dirty[1]&524288&&n(49,a=function(D){if(D<=m)return Z(m);if(D>=p)return Z(p);D=Z(D);let K=(D-m)%b,xt=D-K;return Math.abs(K)*2>=b&&(xt+=K>0?b:-b),xt=i(xt),Z(xt)}),t.$$.dirty[0]&24&&n(24,r=function(D){let K=(D-m)/(p-m)*100;return isNaN(K)||K<=0?0:K>=100?100:Z(K)}),t.$$.dirty[0]&29360153|t.$$.dirty[1]&458752){Array.isArray(y)||(n(0,y=[(p+m)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)"));const D=mt(y.map(K=>a(K)));(y.length!==D.length||!y.every((K,xt)=>Z(K)===D[xt]))&&n(0,y=D),W!==y.length?l(n(23,G=Q7(y.map(K=>r(K)),L))):G.set(y.map(K=>r(K))),n(48,W=y.length),y.length>1&&!Array.isArray(Y)&&console.warn("'ariaLabels' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")}t.$$.dirty[0]&320&&n(29,s=_?w?"top":"bottom":w?"right":"left"),t.$$.dirty[0]&320&&n(28,f=_?w?"bottom":"top":w?"left":"right")},[y,d,h,m,p,b,_,M,w,S,v,T,x,N,E,k,U,R,B,A,P,C,Y,G,r,q,tt,j,f,s,c,Z,J,wt,ae,Le,Rp,Bp,Up,zp,qp,jp,$p,Wp,Vp,g,X,L,W,a,i,Xp]}class av extends We{constructor(e){super(),Ve(this,e,iv,rv,He,{slider:1,range:2,pushy:45,min:3,max:4,step:5,values:0,vertical:6,float:7,reversed:8,hoverable:9,disabled:10,pips:11,pipstep:12,all:13,first:14,last:15,rest:16,id:17,prefix:18,suffix:19,formatter:20,handleFormatter:21,ariaLabels:22,precision:46,springValues:47},null,[-1,-1,-1])}}function Zh(t){let e,n,r,i=t[3]&&Jh(t);return{c(){e=ot("div"),n=Vt(t[2]),r=Gt(),i&&i.c(),this.h()},l(a){e=st(a,"DIV",{class:!0});var s=ct(e);n=Ht(s,t[2]),r=Zt(s),i&&i.l(s),s.forEach(H),this.h()},h(){$(e,"class","text-sm")},m(a,s){pt(a,e,s),et(e,n),et(e,r),i&&i.m(e,null)},p(a,s){s&4&&ue(n,a[2]),a[3]?i?i.p(a,s):(i=Jh(a),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(a){a&&H(e),i&&i.d()}}}function Jh(t){let e,n,r,i,a;return{c(){e=ot("div"),n=ot("i"),r=Gt(),i=ot("span"),a=Vt(t[3]),this.h()},l(s){e=st(s,"DIV",{class:!0});var f=ct(e);n=st(f,"I",{class:!0}),ct(n).forEach(H),r=Zt(f),i=st(f,"SPAN",{class:!0});var c=ct(i);a=Ht(c,t[3]),c.forEach(H),f.forEach(H),this.h()},h(){$(n,"class","bi bi-info-circle"),$(i,"class","tooltiptext"),$(e,"class","tooltip")},m(s,f){pt(s,e,f),et(e,n),et(e,r),et(e,i),et(i,a)},p(s,f){f&8&&ue(a,s[3])},d(s){s&&H(e)}}}function ov(t){let e,n,r,i,a,s=t[2]&&Zh(t);function f(u){t[18](u)}let c={min:+t[0],max:+t[1],pips:!0,range:!0,float:!0,first:"label",last:"label",springValues:!0,id:"slider"};return t[7]!==void 0&&(c.values=t[7]),r=new av({props:c}),Nr.push(()=>eb(r,"values",f)),r.$on("start",t[9]),r.$on("change",t[8]),r.$on("stop",t[10]),{c(){e=ot("div"),s&&s.c(),n=Gt(),od(r.$$.fragment),this.h()},l(u){e=st(u,"DIV",{class:!0,id:!0});var l=ct(e);s&&s.l(l),n=Zt(l),sd(r.$$.fragment,l),l.forEach(H),this.h()},h(){$(e,"class","px-[1%] py-[1%] ml-[2.1%]"),$(e,"id","slider")},m(u,l){pt(u,e,l),s&&s.m(e,null),et(e,n),fd(r,e,null),a=!0},p(u,[l]){u[2]?s?s.p(u,l):(s=Zh(u),s.c(),s.m(e,n)):s&&(s.d(1),s=null);const d={};l&1&&(d.min=+u[0]),l&2&&(d.max=+u[1]),!i&&l&128&&(i=!0,d.values=u[7],nb(()=>i=!1)),r.$set(d)},i(u){a||(Kr(r.$$.fragment,u),a=!0)},o(u){ga(r.$$.fragment,u),a=!1},d(u){u&&H(e),s&&s.d(),cd(r)}}}function sv(t,e,n){let r,i=It,a=()=>(i(),i=Pn(v,A=>n(19,r=A)),v),s,f=It,c=()=>(f(),f=Pn(w,A=>n(20,s=A)),w),u,l=It,d=()=>(l(),l=Pn(S,A=>n(21,u=A)),S);t.$$.on_destroy.push(()=>i()),t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>l());let{min:h=0,max:g=100,id:m,description:p,tooltip:b}=e,{type:y}=e,{name:_}=e,{selector:M}=e,{change:w=ee({})}=e;c();let{stop:S=ee({})}=e;d();let{drag:v=ee({})}=e;a();let{interactions:T={change:w,stop:S,drag:v}}=e;rb("dims");let x=[h,g];[...x];function N(A){console.log("Slider.render",A),A&&Jt(Array,A)&&Kt(A.filter(P=>P===void 0))&&(n(7,x=[+A[0].min,+A[0].max]),n(0,[h,g]=x,h,n(1,g)),console.log("Slider.render.to",x)),x&&x.length>=2&&k()}function E(A,P){console.log("Slider.load",A,P),!(!_a("left")(A)||!_a("right")(A))&&(A=A??{left:h,right:g},n(7,x=[A.left??h,A.right??g]),k())}function k(){w.isActive&&ge(w,s={left:x[0],right:x[1]},s),v.isActive&&ge(v,r={left:x[0],right:x[1]},r)}function U(){v.isActive&&ge(v,r={left:x[0],right:x[1]},r)}function R(){S.isActive&&ge(S,u={left:x[0],right:x[1]},u),w.isActive&&ge(w,s={left:x[0],right:x[1]},s),v.isActive&&ge(v,r={left:x[0],right:x[1]},r)}function B(A){x=A,n(7,x)}return t.$$set=A=>{"min"in A&&n(0,h=A.min),"max"in A&&n(1,g=A.max),"id"in A&&n(11,m=A.id),"description"in A&&n(2,p=A.description),"tooltip"in A&&n(3,b=A.tooltip),"type"in A&&n(12,y=A.type),"name"in A&&n(13,_=A.name),"selector"in A&&n(14,M=A.selector),"change"in A&&c(n(4,w=A.change)),"stop"in A&&d(n(5,S=A.stop)),"drag"in A&&a(n(6,v=A.drag)),"interactions"in A&&n(15,T=A.interactions)},[h,g,p,b,w,S,v,x,k,U,R,m,y,_,M,T,N,E,B]}class c9 extends We{constructor(e){super(),Ve(this,e,sv,ov,He,{min:0,max:1,id:11,description:2,tooltip:3,type:12,name:13,selector:14,change:4,stop:5,drag:6,interactions:15,render:16,load:17})}get min(){return this.$$.ctx[0]}set min(e){this.$$set({min:e}),V()}get max(){return this.$$.ctx[1]}set max(e){this.$$set({max:e}),V()}get id(){return this.$$.ctx[11]}set id(e){this.$$set({id:e}),V()}get description(){return this.$$.ctx[2]}set description(e){this.$$set({description:e}),V()}get tooltip(){return this.$$.ctx[3]}set tooltip(e){this.$$set({tooltip:e}),V()}get type(){return this.$$.ctx[12]}set type(e){this.$$set({type:e}),V()}get name(){return this.$$.ctx[13]}set name(e){this.$$set({name:e}),V()}get selector(){return this.$$.ctx[14]}set selector(e){this.$$set({selector:e}),V()}get change(){return this.$$.ctx[4]}set change(e){this.$$set({change:e}),V()}get stop(){return this.$$.ctx[5]}set stop(e){this.$$set({stop:e}),V()}get drag(){return this.$$.ctx[6]}set drag(e){this.$$set({drag:e}),V()}get interactions(){return this.$$.ctx[15]}set interactions(e){this.$$set({interactions:e}),V()}get render(){return this.$$.ctx[16]}get load(){return this.$$.ctx[17]}}function Kh(t,e,n){const r=t.slice();return r[30]=e[n],r[31]=e,r[32]=n,r}function Qh(t){let e,n,r,i=t[30]+"",a,s,f,c;function u(){t[22].call(n,t[30])}return{c(){e=ot("label"),n=ot("input"),r=Gt(),a=Vt(i),s=Gt(),this.h()},l(l){e=st(l,"LABEL",{});var d=ct(e);n=st(d,"INPUT",{type:!0}),r=Zt(d),a=Ht(d,i),s=Zt(d),d.forEach(H),this.h()},h(){$(n,"type","checkbox")},m(l,d){pt(l,e,d),et(e,n),n.checked=t[4][t[30]],et(e,r),et(e,a),et(e,s),f||(c=[vt(n,"change",u),vt(n,"change",t[23])],f=!0)},p(l,d){t=l,d[0]&18&&(n.checked=t[4][t[30]]),d[0]&2&&i!==(i=t[30]+"")&&ue(a,i)},d(l){l&&H(e),f=!1,An(c)}}}function fv(t){let e,n,r,i,a=t[1],s=[];for(let f=0;f<a.length;f+=1)s[f]=Qh(Kh(t,a,f));return{c(){e=ot("div");for(let f=0;f<s.length;f+=1)s[f].c();n=Gt(),r=ot("div"),i=ot("div"),this.h()},l(f){e=st(f,"DIV",{});var c=ct(e);for(let l=0;l<s.length;l+=1)s[l].l(c);c.forEach(H),n=Zt(f),r=st(f,"DIV",{id:!0});var u=ct(r);i=st(u,"DIV",{}),ct(i).forEach(H),u.forEach(H),this.h()},h(){$(r,"id",t[0])},m(f,c){pt(f,e,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);pt(f,n,c),pt(f,r,c),et(r,i),t[24](i)},p(f,c){if(c[0]&22){a=f[1];let u;for(u=0;u<a.length;u+=1){const l=Kh(f,a,u);s[u]?s[u].p(l,c):(s[u]=Qh(l),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=a.length}c[0]&1&&$(r,"id",f[0])},i:It,o:It,d(f){f&&H(e),co(s,f),f&&H(n),f&&H(r),t[24](null)}}}function cv(t,e,n){let r,{id:i,name:a,groupNames:s=[],title:f="",xAttr:c,yAttr:u="val",yMax:l,magic:d,xDomainMin:h=null,xDomainMax:g=null,theplot:m=null}=e,{type:p}=e,{selector:b}=e,y={};const _=["#93c1cf","#feb144","#9ee09e"],M=ee(s.reduce((C,Y)=>(C[Y]=!0,C),{}));ud(t,M,C=>n(4,r=C)),console.log("visibility: ",M);let{brushX:w=ee({}),interactions:S={brushX:w}}=e,v,T=null,x=[],N=[{},{}];function E(C,Y){return Y!="overlay"?!1:(y=C,!0)}function k(C,Y){return Y!="badyear"?!1:(C.forEach((X,L)=>{X.rank=L+1,X[c]=Number(X[c])}),N=C,!0)}function U(C,Y){!C||C.length===0||typeof Y=="object"||(k(C,Y)||E(C,Y)?console.debug("overlay or badyear"):(x=Y7(C,{include:s}),x.forEach(X=>X[c]=Number(X[c]))),R())}function R(){n(6,h=+h),n(7,g=+g);let C=Ff({x:{type:"linear",domain:[h-1,g]}}),Y=L=>(N.length-L.rank)*(.3/N.length)+.7,X={x:C,color:{domain:s,range:_,legend:!0,style:{"font-size":10,"margin-left":"2em"}},height:200,marginBottom:50,marks:[Or({ticks:vb(L=>L+h,g-h),tickRotate:-90,fontSize:10,tickFormat:L=>(L+"").slice(-2)}),Bi({fontSize:10,label:"Severity"}),Gc([0]),Xc([C.domain[0]]),qf(N,{x1:L=>L[c]-.5,x2:L=>L[c]+.5,y:Y,stroke:"black",opacity:.8,strokeWidth:1}),e7(N,{x1:L=>L[c]-.5,x2:L=>L[c]+.5,y1:0,y2:Y,fill:"gray",opacity:.1}),iu(y,{x1:"left",x2:"right",y2:1,fill:"key",color:"key",opacity:.2}),j7(x,{filter:L=>L.key==s[3]&&L[c]>=h&&L[c]<=g&&+L[u]==0,x:L=>+L[c],y:0,stroke:"red",strokeWidth:1})]};s.forEach((L,z)=>{let W=(1+z)/s.length*.7;r[L]&&X.marks.push(qf(x,{filter:q=>q.key==L&&q[c]>=h&&q[c]<=g,x:q=>+q[c]+W-.35,y1:0,y2:u,stroke:"key",strokeWidth:4}))}),n(8,m=Ho(X,T)),w.isActive&&(v=v??new ou({iact:w,magic:d}),v.init(m))}function B(C){r[C]=this.checked,M.set(r)}const A=()=>R();function P(C){Nr[C?"unshift":"push"](()=>{T=C,n(3,T)})}return t.$$set=C=>{"id"in C&&n(9,i=C.id),"name"in C&&n(0,a=C.name),"groupNames"in C&&n(1,s=C.groupNames),"title"in C&&n(10,f=C.title),"xAttr"in C&&n(11,c=C.xAttr),"yAttr"in C&&n(12,u=C.yAttr),"yMax"in C&&n(13,l=C.yMax),"magic"in C&&n(14,d=C.magic),"xDomainMin"in C&&n(6,h=C.xDomainMin),"xDomainMax"in C&&n(7,g=C.xDomainMax),"theplot"in C&&n(8,m=C.theplot),"type"in C&&n(15,p=C.type),"selector"in C&&n(16,b=C.selector),"brushX"in C&&n(17,w=C.brushX),"interactions"in C&&n(18,S=C.interactions)},[a,s,R,T,r,M,h,g,m,i,f,c,u,l,d,p,b,w,S,E,k,U,B,A,P]}class u9 extends We{constructor(e){super(),Ve(this,e,cv,fv,He,{id:9,name:0,groupNames:1,title:10,xAttr:11,yAttr:12,yMax:13,magic:14,xDomainMin:6,xDomainMax:7,theplot:8,type:15,selector:16,brushX:17,interactions:18,overlay:19,badyear:20,render:21,update:2},null,[-1,-1])}get id(){return this.$$.ctx[9]}set id(e){this.$$set({id:e}),V()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),V()}get groupNames(){return this.$$.ctx[1]}set groupNames(e){this.$$set({groupNames:e}),V()}get title(){return this.$$.ctx[10]}set title(e){this.$$set({title:e}),V()}get xAttr(){return this.$$.ctx[11]}set xAttr(e){this.$$set({xAttr:e}),V()}get yAttr(){return this.$$.ctx[12]}set yAttr(e){this.$$set({yAttr:e}),V()}get yMax(){return this.$$.ctx[13]}set yMax(e){this.$$set({yMax:e}),V()}get magic(){return this.$$.ctx[14]}set magic(e){this.$$set({magic:e}),V()}get xDomainMin(){return this.$$.ctx[6]}set xDomainMin(e){this.$$set({xDomainMin:e}),V()}get xDomainMax(){return this.$$.ctx[7]}set xDomainMax(e){this.$$set({xDomainMax:e}),V()}get theplot(){return this.$$.ctx[8]}set theplot(e){this.$$set({theplot:e}),V()}get type(){return this.$$.ctx[15]}set type(e){this.$$set({type:e}),V()}get selector(){return this.$$.ctx[16]}set selector(e){this.$$set({selector:e}),V()}get brushX(){return this.$$.ctx[17]}set brushX(e){this.$$set({brushX:e}),V()}get interactions(){return this.$$.ctx[18]}set interactions(e){this.$$set({interactions:e}),V()}get overlay(){return this.$$.ctx[19]}get badyear(){return this.$$.ctx[20]}get render(){return this.$$.ctx[21]}get update(){return this.$$.ctx[2]}}function uv(t){let e,n;return{c(){e=ot("div"),n=ot("div"),this.h()},l(r){e=st(r,"DIV",{id:!0});var i=ct(e);n=st(i,"DIV",{}),ct(n).forEach(H),i.forEach(H),this.h()},h(){$(e,"id",t[0])},m(r,i){pt(r,e,i),et(e,n),t[13](n)},p(r,[i]){i&1&&$(e,"id",r[0])},i:It,o:It,d(r){r&&H(e),t[13](null)}}}function lv(t,e,n){let{id:r,name:i,xDomainMin:a,xDomainMax:s,magic:f}=e,{brushX:c=ee({})}=e,{interactions:u={brushX:c}}=e,{type:l}=e,{selector:d}=e,h,g,m,p={},b=[];const y=["#93c1cf","#feb144","#9ee09e","#ff6663"];function _(v,T){return T!="overlay"?!1:(p=v,!0)}function M(v,T){!v||v.length===0||typeof T=="object"||(_(v,T)?console.debug("overlay"):b=v,w())}function w(){let v={x:{domain:[+a,+s],type:"linear"},y:{axis:null},marginBottom:50,height:450,fy:{label:null,tickRotate:-90,labelAnchor:"center"},color:{style:{"font-size":10,"margin-left":"2rem"},range:y,legend:!0},marks:[Or({ticks:36,fontSize:10}),xp(),iu(p,{x1:"left",x2:"right",y2:1,fill:"key",color:"key"}),qf(b,{x1:"start_time",x2:"end_time",y:"activity",strokeWidth:3,fy:"crop"}),$o(b,{x:T=>{let x=(T.end_time-T.start_time)/2+T.start_time;return console.log("yy",T,x),x},y:"activity",dy:3,lineAnchor:"top",fy:"crop",fontSize:10,color:"gray",text:"activity"})]};h=Ho(v,g),c.isActive&&(m=m??new ou({iact:c,magic:f}),m.init(h))}function S(v){Nr[v?"unshift":"push"](()=>{g=v,n(1,g)})}return t.$$set=v=>{"id"in v&&n(2,r=v.id),"name"in v&&n(0,i=v.name),"xDomainMin"in v&&n(3,a=v.xDomainMin),"xDomainMax"in v&&n(4,s=v.xDomainMax),"magic"in v&&n(5,f=v.magic),"brushX"in v&&n(6,c=v.brushX),"interactions"in v&&n(7,u=v.interactions),"type"in v&&n(8,l=v.type),"selector"in v&&n(9,d=v.selector)},[i,g,r,a,s,f,c,u,l,d,_,M,w,S]}class l9 extends We{constructor(e){super(),Ve(this,e,lv,uv,He,{id:2,name:0,xDomainMin:3,xDomainMax:4,magic:5,brushX:6,interactions:7,type:8,selector:9,overlay:10,render:11,update:12})}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),V()}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),V()}get xDomainMin(){return this.$$.ctx[3]}set xDomainMin(e){this.$$set({xDomainMin:e}),V()}get xDomainMax(){return this.$$.ctx[4]}set xDomainMax(e){this.$$set({xDomainMax:e}),V()}get magic(){return this.$$.ctx[5]}set magic(e){this.$$set({magic:e}),V()}get brushX(){return this.$$.ctx[6]}set brushX(e){this.$$set({brushX:e}),V()}get interactions(){return this.$$.ctx[7]}set interactions(e){this.$$set({interactions:e}),V()}get type(){return this.$$.ctx[8]}set type(e){this.$$set({type:e}),V()}get selector(){return this.$$.ctx[9]}set selector(e){this.$$set({selector:e}),V()}get overlay(){return this.$$.ctx[10]}get render(){return this.$$.ctx[11]}get update(){return this.$$.ctx[12]}}function hv(t){let e,n;return{c(){e=ot("div"),n=ot("div"),this.h()},l(r){e=st(r,"DIV",{id:!0});var i=ct(e);n=st(i,"DIV",{}),ct(n).forEach(H),i.forEach(H),this.h()},h(){$(e,"id",t[0])},m(r,i){pt(r,e,i),et(e,n),t[8](n)},p(r,[i]){i&1&&$(e,"id",r[0])},i:It,o:It,d(r){r&&H(e),t[8](null)}}}function dv(t,e,n){let{name:r,id:i,interactions:a={}}=e,{type:s}=e,{selector:f}=e,c,u=[];function l(g,m){!g||g.length===0||(u=g,d())}function d(){let g=Ff({color:{type:"linear",scheme:"greens"}}),m=Ff({color:{type:"quantile",range:["#fff","#000"],domain:[0,60,100]}}),p=u.map(y=>m.apply(Aa(g.apply(+y.value)).l)),b={padding:0,marginLeft:150,height:300,color:g,marks:[Or({fontSize:10,label:null}),Bi({fontSize:10,label:null}),R7(u,{x:"x",y:"y",fill:y=>+y.value,stroke:"white"}),$o(u,{x:"x",y:"y",text:y=>y.value,fill:p,fontSize:10,fontWeight:"bold",textAnchor:"middle"})]};Ho(b,c)}function h(g){Nr[g?"unshift":"push"](()=>{c=g,n(1,c)})}return t.$$set=g=>{"name"in g&&n(0,r=g.name),"id"in g&&n(2,i=g.id),"interactions"in g&&n(3,a=g.interactions),"type"in g&&n(4,s=g.type),"selector"in g&&n(5,f=g.selector)},[r,c,i,a,s,f,l,d,h]}class h9 extends We{constructor(e){super(),Ve(this,e,dv,hv,He,{name:0,id:2,interactions:3,type:4,selector:5,render:6,update:7})}get name(){return this.$$.ctx[0]}set name(e){this.$$set({name:e}),V()}get id(){return this.$$.ctx[2]}set id(e){this.$$set({id:e}),V()}get interactions(){return this.$$.ctx[3]}set interactions(e){this.$$set({interactions:e}),V()}get type(){return this.$$.ctx[4]}set type(e){this.$$set({type:e}),V()}get selector(){return this.$$.ctx[5]}set selector(e){this.$$set({selector:e}),V()}get render(){return this.$$.ctx[6]}get update(){return this.$$.ctx[7]}}const gv=ee({w:window.innerWidth*.8,h:window.innerHeight*.8,margin:Z7}),d9=ee([]),g9=ee({});function td(t,e,n){const r=t.slice();return r[18]=e[n],r[20]=n,r}function mv(t){let e,n=t[18][t[2]]+"",r;return{c(){e=ot("option"),r=Vt(n),this.h()},l(i){e=st(i,"OPTION",{});var a=ct(e);r=Ht(a,n),a.forEach(H),this.h()},h(){e.__value=t[20],e.value=e.__value},m(i,a){pt(i,e,a),et(e,r)},p(i,a){a&36&&n!==(n=i[18][i[2]]+"")&&ue(r,n)},d(i){i&&H(e)}}}function pv(t){let e,n=t[18][t[2]]+"",r;return{c(){e=ot("option"),r=Vt(n),this.h()},l(i){e=st(i,"OPTION",{});var a=ct(e);r=Ht(a,n),a.forEach(H),this.h()},h(){e.__value=t[20],e.value=e.__value,e.selected=!0},m(i,a){pt(i,e,a),et(e,r)},p(i,a){a&36&&n!==(n=i[18][i[2]]+"")&&ue(r,n)},d(i){i&&H(e)}}}function ed(t){let e;function n(a,s){return a[20]===a[1]?pv:mv}let r=n(t),i=r(t);return{c(){i.c(),e=Nt()},l(a){i.l(a),e=Nt()},m(a,s){i.m(a,s),pt(a,e,s)},p(a,s){r===(r=n(a))&&i?i.p(a,s):(i.d(1),i=r(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){i.d(a),a&&H(e)}}}function bv(t){let e,n,r,i,a=t[5],s=[];for(let f=0;f<a.length;f+=1)s[f]=ed(td(t,a,f));return{c(){e=ot("div"),n=ot("select");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){e=st(f,"DIV",{class:!0,id:!0});var c=ct(e);n=st(c,"SELECT",{class:!0});var u=ct(n);for(let l=0;l<s.length;l+=1)s[l].l(u);u.forEach(H),c.forEach(H),this.h()},h(){$(n,"class","form-select block w-full px-2 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"),t[4]===void 0&&ib(()=>t[13].call(n)),$(e,"class","px-[1%] py-[1%] container svelte-p4yrke"),$(e,"id",t[0])},m(f,c){pt(f,e,c),et(e,n);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(n,null);hu(n,t[4],!0),r||(i=[vt(n,"change",t[13]),vt(n,"change",t[6])],r=!0)},p(f,[c]){if(c&38){a=f[5];let u;for(u=0;u<a.length;u+=1){const l=td(f,a,u);s[u]?s[u].p(l,c):(s[u]=ed(l),s[u].c(),s[u].m(n,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=a.length}c&16&&hu(n,f[4]),c&1&&$(e,"id",f[0])},i:It,o:It,d(f){f&&H(e),co(s,f),r=!1,An(i)}}}function yv(t,e,n){let r,i=It,a=()=>(i(),i=Pn(g,S=>n(14,r=S)),g),s;ud(t,gv,S=>n(15,s=S)),t.$$.on_destroy.push(()=>i());let{id:f,index:c,dropdown_key:u}=e,{type:l}=e,{name:d}=e,{selector:h}=e,{change:g=ee({})}=e;a();let{interactions:m={change:g}}=e,p=null,b=[];s.margin;function y(S,v){n(5,b=S??b),n(4,p=p??c),console.log("Dropdown.render",b,p,v),M()}function _(S){console.log("Dropdown.load",S),n(4,p=S.idx),y()}function M(){g.isActive&&ge(g,r={...b[p],idx:p},r)}function w(){p=ab(this),n(4,p)}return t.$$set=S=>{"id"in S&&n(0,f=S.id),"index"in S&&n(1,c=S.index),"dropdown_key"in S&&n(2,u=S.dropdown_key),"type"in S&&n(7,l=S.type),"name"in S&&n(8,d=S.name),"selector"in S&&n(9,h=S.selector),"change"in S&&a(n(3,g=S.change)),"interactions"in S&&n(10,m=S.interactions)},[f,c,u,g,p,b,M,l,d,h,m,y,_,w]}class m9 extends We{constructor(e){super(),Ve(this,e,yv,bv,He,{id:0,index:1,dropdown_key:2,type:7,name:8,selector:9,change:3,interactions:10,render:11,load:12})}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),V()}get index(){return this.$$.ctx[1]}set index(e){this.$$set({index:e}),V()}get dropdown_key(){return this.$$.ctx[2]}set dropdown_key(e){this.$$set({dropdown_key:e}),V()}get type(){return this.$$.ctx[7]}set type(e){this.$$set({type:e}),V()}get name(){return this.$$.ctx[8]}set name(e){this.$$set({name:e}),V()}get selector(){return this.$$.ctx[9]}set selector(e){this.$$set({selector:e}),V()}get change(){return this.$$.ctx[3]}set change(e){this.$$set({change:e}),V()}get interactions(){return this.$$.ctx[10]}set interactions(e){this.$$set({interactions:e}),V()}get render(){return this.$$.ctx[11]}get load(){return this.$$.ctx[12]}}function _v(t){let e,n,r,i,a,s,f,c,u,l,d,h,g,m;return{c(){e=ot("form"),n=ot("div"),r=ot("input"),i=Gt(),a=ot("button"),s=Vt("Login"),f=Gt(),c=ot("button"),u=Vt("Save"),l=Gt(),d=ot("button"),h=Vt("Logout"),this.h()},l(p){e=st(p,"FORM",{class:!0});var b=ct(e);n=st(b,"DIV",{class:!0});var y=ct(n);r=st(y,"INPUT",{class:!0,type:!0,placeholder:!0,"aria-label":!0}),i=Zt(y),a=st(y,"BUTTON",{class:!0,type:!0});var _=ct(a);s=Ht(_,"Login"),_.forEach(H),f=Zt(y),c=st(y,"BUTTON",{class:!0,type:!0});var M=ct(c);u=Ht(M,"Save"),M.forEach(H),l=Zt(y),d=st(y,"BUTTON",{class:!0,type:!0});var w=ct(d);h=Ht(w,"Logout"),w.forEach(H),y.forEach(H),b.forEach(H),this.h()},h(){$(r,"class","appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"),$(r,"type","text"),$(r,"placeholder","Login..."),$(r,"aria-label","username"),$(a,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-700 border-slate-500 hover:border-slate-700 text-sm border-4 text-white py-1 px-2 rounded"),$(a,"type","button"),$(c,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),$(c,"type","button"),$(d,"class","flex-shrink-0 bg-slate-500 hover:bg-slate-900 border-slate-500 hover:border-slate-900 text-sm border-4 text-white py-1 px-2 rounded"),$(d,"type","button"),$(n,"class","flex items-center border-b border-slate-500 py-2 space-x-4"),$(e,"class","w-full max-w-sm mx-auto")},m(p,b){pt(p,e,b),et(e,n),et(n,r),du(r,t[1]),et(n,i),et(n,a),et(a,s),et(n,f),et(n,c),et(c,u),et(n,l),et(n,d),et(d,h),g||(m=[vt(r,"input",t[17]),vt(a,"click",t[2]),vt(c,"click",t[3]),vt(d,"click",t[4])],g=!0)},p(p,[b]){b&2&&r.value!==p[1]&&du(r,p[1])},i:It,o:It,d(p){p&&H(e),g=!1,An(m)}}}function Ep(t,e){console.debug("login invoked",t,e)}function wv(t,e,n){let r,i=It,a=()=>(i(),i=Pn(s,x=>n(19,r=x)),s);t.$$.on_destroy.push(()=>i());let{status:s=ee({}),interactions:f={status:s}}=e;a();let{id:c,magic:u,client:l,exportFunc:d,importFunc:h,dataTable:g,stateTable:m}=e,{type:p}=e,{name:b}=e,{selector:y}=e,_,M;const w=async()=>{console.debug("login user: ",_),M=u.exportState();const x=await l.query(h,{table:m,user:_});if(!x){alert("there is no data for this user"),ge(s,r={user:_,loggedin:!0},r);return}ge(s,r={user:_,loggedin:!0},r),u.importState(x.data)},S=async()=>{let x=u.exportData();await l.mutation(d,{data:x,table:g,user:_}),x=u.exportState(),await l.mutation(d,{data:x,table:m,user:_}),alert("save function executed")},v=async()=>{u.importState(M),n(1,_=null)};function T(){_=this.value,n(1,_)}return t.$$set=x=>{"status"in x&&a(n(0,s=x.status)),"interactions"in x&&n(5,f=x.interactions),"id"in x&&n(6,c=x.id),"magic"in x&&n(7,u=x.magic),"client"in x&&n(8,l=x.client),"exportFunc"in x&&n(9,d=x.exportFunc),"importFunc"in x&&n(10,h=x.importFunc),"dataTable"in x&&n(11,g=x.dataTable),"stateTable"in x&&n(12,m=x.stateTable),"type"in x&&n(13,p=x.type),"name"in x&&n(14,b=x.name),"selector"in x&&n(15,y=x.selector)},[s,_,w,S,v,f,c,u,l,d,h,g,m,p,b,y,Ep,T]}class p9 extends We{constructor(e){super(),Ve(this,e,wv,_v,He,{status:0,interactions:5,id:6,magic:7,client:8,exportFunc:9,importFunc:10,dataTable:11,stateTable:12,type:13,name:14,selector:15,render:16})}get status(){return this.$$.ctx[0]}set status(e){this.$$set({status:e}),V()}get interactions(){return this.$$.ctx[5]}set interactions(e){this.$$set({interactions:e}),V()}get id(){return this.$$.ctx[6]}set id(e){this.$$set({id:e}),V()}get magic(){return this.$$.ctx[7]}set magic(e){this.$$set({magic:e}),V()}get client(){return this.$$.ctx[8]}set client(e){this.$$set({client:e}),V()}get exportFunc(){return this.$$.ctx[9]}set exportFunc(e){this.$$set({exportFunc:e}),V()}get importFunc(){return this.$$.ctx[10]}set importFunc(e){this.$$set({importFunc:e}),V()}get dataTable(){return this.$$.ctx[11]}set dataTable(e){this.$$set({dataTable:e}),V()}get stateTable(){return this.$$.ctx[12]}set stateTable(e){this.$$set({stateTable:e}),V()}get type(){return this.$$.ctx[13]}set type(e){this.$$set({type:e}),V()}get name(){return this.$$.ctx[14]}set name(e){this.$$set({name:e}),V()}get selector(){return this.$$.ctx[15]}set selector(e){this.$$set({selector:e}),V()}get render(){return Ep}}function vv(t,e,n){let r,i=It,a=()=>(i(),i=Pn(f,_=>n(11,r=_)),f);t.$$.on_destroy.push(()=>i());let{id:s,valid:f=ee({}),interactions:c={valid:f},key:u,threshold_string:l}=e;a();let{type:d}=e,{name:h}=e,{selector:g}=e,m=[],p=Number(l);function b(_,M){if(console.debug("trigger alert render"),m=_??m,Kt(m)||!Jt(Array,m))return;const S=Gf(u)(m);if(Kt(S)){alert("warning, alert tried to find data for a key that returns an empty list, alert will not be used");return}d2(S)<p?(ge(f,r={valid:!1},r),alert("warning, slider selection has too low variance in rainfall,invalid results")):ge(f,r={valid:!0},r)}function y(_,M){Kt(_)||ge(f,r=_,r)}return t.$$set=_=>{"id"in _&&n(1,s=_.id),"valid"in _&&a(n(0,f=_.valid)),"interactions"in _&&n(2,c=_.interactions),"key"in _&&n(3,u=_.key),"threshold_string"in _&&n(4,l=_.threshold_string),"type"in _&&n(5,d=_.type),"name"in _&&n(6,h=_.name),"selector"in _&&n(7,g=_.selector)},[f,s,c,u,l,d,h,g,b,y]}class b9 extends We{constructor(e){super(),Ve(this,e,vv,null,He,{id:1,valid:0,interactions:2,key:3,threshold_string:4,type:5,name:6,selector:7,render:8,load:9})}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),V()}get valid(){return this.$$.ctx[0]}set valid(e){this.$$set({valid:e}),V()}get interactions(){return this.$$.ctx[2]}set interactions(e){this.$$set({interactions:e}),V()}get key(){return this.$$.ctx[3]}set key(e){this.$$set({key:e}),V()}get threshold_string(){return this.$$.ctx[4]}set threshold_string(e){this.$$set({threshold_string:e}),V()}get type(){return this.$$.ctx[5]}set type(e){this.$$set({type:e}),V()}get name(){return this.$$.ctx[6]}set name(e){this.$$set({name:e}),V()}get selector(){return this.$$.ctx[7]}set selector(e){this.$$set({selector:e}),V()}get render(){return this.$$.ctx[8]}get load(){return this.$$.ctx[9]}}class no{constructor(e){this.compPos=function(n){for(var r=[],i=0;i<this._array.length;i++){let a=+(this._array[i]>0&&n[i]>0);r.push(a)}return r},this.isNegative=function(n){return n===0||n===null},this.compZero=function(n){for(var r=[],i=0;i<this._array.length;i++){let a=+(this.isNegative(this._array[i])&&this.isNegative(n[i]));r.push(a)}return r},this.getPos=function(){for(var n=[],r=0;r<this._array.length;r++)+(this._array[r]>0),n.push(+(this._array[r]>0));return n},this.getZero=function(){for(var n=[],r=0;r<this._array.length;r++)+this.isNegative(this._array[r]),n.push(+(this._array[r]===0));return n},this._array=e}get array(){return this._array}}const Cp=function(t,e,n,r){let i=e.map(Number),a=r.map(Number),s=new no(i),f=new no(a),c=s.compPos(f.array),u=f.getPos(),l=c.filter(g=>g>0).length,d=u.filter(g=>g>0).length;return(l/d).toFixed(2)},Np=function(t,e,n,r){let i=e.map(Number),a=r.map(Number),s=new no(i),f=new no(a),c=s.compZero(f.array),u=f.getZero(),l=c.filter(g=>g>0).length,d=u.filter(g=>g>0).length;return(l/d).toFixed(2)},Mv=function(t,e,n,r){return Cp(t,e,n,r)},Sv=function(t,e,n,r){return Np(t,e,n,r)},xv=function(t,e,n,r){let i=Number(Cp(t,e,n,r)),a=Number(Np(t,e,n,r));return((i+a)/2).toFixed(2)};let y9=[{"true positive":Mv,"true negative":Sv,"average matching":xv}];const Wr="1.24.8";var Re=[],de=[],Tv=Uint8Array,Rs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var sr=0,Av=Rs.length;sr<Av;++sr)Re[sr]=Rs[sr],de[Rs.charCodeAt(sr)]=sr;de["-".charCodeAt(0)]=62;de["_".charCodeAt(0)]=63;function kv(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Ev(t,e,n){return(e+n)*3/4-n}function ro(t){var e,n=kv(t),r=n[0],i=n[1],a=new Tv(Ev(t,r,i)),s=0,f=i>0?r-4:r,c;for(c=0;c<f;c+=4)e=de[t.charCodeAt(c)]<<18|de[t.charCodeAt(c+1)]<<12|de[t.charCodeAt(c+2)]<<6|de[t.charCodeAt(c+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=de[t.charCodeAt(c)]<<2|de[t.charCodeAt(c+1)]>>4,a[s++]=e&255),i===1&&(e=de[t.charCodeAt(c)]<<10|de[t.charCodeAt(c+1)]<<4|de[t.charCodeAt(c+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function Cv(t){return Re[t>>18&63]+Re[t>>12&63]+Re[t>>6&63]+Re[t&63]}function Nv(t,e,n){for(var r,i=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(Cv(r));return i.join("")}function io(t){for(var e,n=t.length,r=n%3,i=[],a=16383,s=0,f=n-r;s<f;s+=a)i.push(Nv(t,s,s+a>f?f:s+a));return r===1?(e=t[n-1],i.push(Re[e>>2]+Re[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Re[e>>10]+Re[e>>4&63]+Re[e<<2&63]+"=")),i.join("")}function Vr(t){if(t===void 0)return{};if(!Dp(t))throw new Error(`The arguments to a Convex function must be an object. Received: ${t}`);return t}function Dv(t){if(typeof t>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof t!="string")throw new Error(`Invalid deployment address: found ${t}".`);if(!(t.startsWith("http:")||t.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${t}".`);try{new URL(t)}catch{throw new Error(`Invalid deployment address: "${t}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(t.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${t}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function Dp(t){var i;const e=typeof t=="object",n=Object.getPrototypeOf(t),r=n===null||n===Object.prototype||((i=n==null?void 0:n.constructor)==null?void 0:i.name)==="Object";return e&&r}const Ip=!0,Cr=BigInt("-9223372036854775808"),su=BigInt("9223372036854775807"),$f=BigInt("0"),Iv=BigInt("8"),Lv=BigInt("256");function Lp(t){return Number.isNaN(t)||!Number.isFinite(t)||Object.is(t,-0)}function Fv(t){t<$f&&(t-=Cr+Cr);let e=t.toString(16);e.length%2===1&&(e="0"+e);const n=new Uint8Array(new ArrayBuffer(8));let r=0;for(const i of e.match(/.{2}/g).reverse())n.set([parseInt(i,16)],r++),t>>=Iv;return io(n)}function Ov(t){const e=ro(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let n=$f,r=$f;for(const i of e)n+=BigInt(i)*Lv**r,r++;return n>su&&(n+=Cr+Cr),n}function Pv(t){if(t<Cr||su<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,t,!0),io(new Uint8Array(e))}function Rv(t){const e=ro(t);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const Bv=DataView.prototype.setBigInt64?Pv:Fv,Uv=DataView.prototype.getBigInt64?Rv:Ov,nd=1024;function Wf(t){if(t.length>nd)throw new Error(`Field name ${t} exceeds maximum field name length ${nd}.`);if(t.startsWith("$"))throw new Error(`Field name ${t} starts with a '$', which is reserved.`);for(let e=0;e<t.length;e+=1){const n=t.charCodeAt(e);if(n<32||n>=127)throw new Error(`Field name ${t} has invalid character '${t[e]}': Field names can only contain non-control ASCII characters`)}}function On(t){if(t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string")return t;if(Array.isArray(t))return t.map(r=>On(r));if(typeof t!="object")throw new Error(`Unexpected type of ${t}`);const e=Object.entries(t);if(e.length===1){const r=e[0][0];if(r==="$bytes"){if(typeof t.$bytes!="string")throw new Error(`Malformed $bytes field on ${t}`);return ro(t.$bytes).buffer}if(r==="$integer"){if(typeof t.$integer!="string")throw new Error(`Malformed $integer field on ${t}`);return Uv(t.$integer)}if(r==="$float"){if(typeof t.$float!="string")throw new Error(`Malformed $float field on ${t}`);const i=ro(t.$float);if(i.byteLength!==8)throw new Error(`Received ${i.byteLength} bytes, expected 8 for $float`);const s=new DataView(i.buffer).getFloat64(0,Ip);if(!Lp(s))throw new Error(`Float ${s} should be encoded as a number`);return s}if(r==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(r==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const n={};for(const[r,i]of Object.entries(t))Wf(r),n[r]=On(i);return n}function dr(t){return JSON.stringify(t,(e,n)=>n===void 0?"undefined":typeof n=="bigint"?`${n.toString()}n`:n)}function ao(t,e,n,r){var s;if(t===void 0){const f=n&&` (present at path ${n} in original object ${dr(e)})`;throw new Error(`undefined is not a valid Convex value${f}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(t===null)return t;if(typeof t=="bigint"){if(t<Cr||su<t)throw new Error(`BigInt ${t} does not fit into a 64-bit signed integer.`);return{$integer:Bv(t)}}if(typeof t=="number")if(Lp(t)){const f=new ArrayBuffer(8);return new DataView(f).setFloat64(0,t,Ip),{$float:io(new Uint8Array(f))}}else return t;if(typeof t=="boolean"||typeof t=="string")return t;if(t instanceof ArrayBuffer)return{$bytes:io(new Uint8Array(t))};if(Array.isArray(t))return t.map((f,c)=>ao(f,e,n+`[${c}]`,!1));if(t instanceof Set)throw new Error(Bs(n,"Set",[...t],e));if(t instanceof Map)throw new Error(Bs(n,"Map",[...t],e));if(!Dp(t)){const f=(s=t==null?void 0:t.constructor)==null?void 0:s.name,c=f?`${f} `:"";throw new Error(Bs(n,c,t,e))}const i={},a=Object.entries(t);a.sort(([f,c],[u,l])=>f===u?0:f<u?-1:1);for(const[f,c]of a)c!==void 0?(Wf(f),i[f]=ao(c,e,n+`.${f}`,!1)):r&&(Wf(f),i[f]=zv(c,e,n+`.${f}`));return i}function Bs(t,e,n,r){return t?`${e}${dr(n)} is not a supported Convex type (present at path ${t} in original object ${dr(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${dr(n)} is not a supported Convex type.`}function zv(t,e,n){if(t===void 0)return{$undefined:null};if(e===void 0)throw new Error(`Programming error. Current value is ${dr(t)} but original value is undefined`);return ao(t,e,n,!1)}function na(t){return ao(t,t,"",!1)}var qv=Object.defineProperty,jv=(t,e,n)=>e in t?qv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Us=(t,e,n)=>jv(t,typeof e!="symbol"?e+"":e,n),rd,id;const $v=Symbol.for("ConvexError");class ra extends(id=Error,rd=$v,id){constructor(e){super(typeof e=="string"?e:dr(e)),Us(this,"name","ConvexError"),Us(this,"data"),Us(this,rd,!0),this.data=e}}const Fp=()=>Array.from({length:4},()=>0);Fp();Fp();var Wv=Object.defineProperty,Vv=(t,e,n)=>e in t?Wv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ad=(t,e,n)=>Vv(t,typeof e!="symbol"?e+"":e,n);const Hv="color:rgb(0, 145, 255)";function Yv(t){switch(t){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class Op{constructor(e){ad(this,"_onLogLineFuncs"),ad(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let n=Math.random().toString(36).substring(2,15);for(let r=0;r<10&&this._onLogLineFuncs[n]!==void 0;r++)n=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[n]=e,()=>{delete this._onLogLineFuncs[n]}}logVerbose(...e){if(this._verbose)for(const n of Object.values(this._onLogLineFuncs))n("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const n of Object.values(this._onLogLineFuncs))n("info",...e)}warn(...e){for(const n of Object.values(this._onLogLineFuncs))n("warn",...e)}error(...e){for(const n of Object.values(this._onLogLineFuncs))n("error",...e)}}function Xv(t){const e=new Op(t);return e.addLogLineListener((n,...r)=>{switch(n){case"debug":console.debug(...r);break;case"info":console.log(...r);break;case"warn":console.warn(...r);break;case"error":console.error(...r);break;default:console.log(...r)}}),e}function Gv(t){return new Op(t)}function ia(t,e,n,r,i){const a=Yv(n);if(typeof i=="object"&&(i=`ConvexError ${JSON.stringify(i.errorData,null,2)}`),e==="info"){const s=i.match(/^\[.*?\] /);if(s===null){t.error(`[CONVEX ${a}(${r})] Could not parse console.log`);return}const f=i.slice(1,s[0].length-2),c=i.slice(s[0].length);t.log(`%c[CONVEX ${a}(${r})] [${f}]`,Hv,c)}else t.error(`[CONVEX ${a}(${r})] ${i}`)}const oo=Symbol.for("functionName"),Zv=Symbol.for("toReferencePath");function Jv(t){return t[Zv]??null}function Kv(t){return t.startsWith("function://")}function Qv(t){let e;if(typeof t=="string")Kv(t)?e={functionHandle:t}:e={name:t};else if(t[oo])e={name:t[oo]};else{const n=Jv(t);if(!n)throw new Error(`${t} is not a functionReference`);e={reference:n}}return e}function aa(t){const e=Qv(t);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof t=="string")return t;const n=t[oo];if(!n)throw new Error(`${t} is not a functionReference`);return n}function Pp(t=[]){const e={get(n,r){if(typeof r=="string"){const i=[...t,r];return Pp(i)}else if(r===oo){if(t.length<2){const s=["api",...t].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${s}\``)}const i=t.slice(0,-1).join("/"),a=t[t.length-1];return a==="default"?i:i+":"+a}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}Pp();var t9=Object.defineProperty,e9=(t,e,n)=>e in t?t9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dn=(t,e,n)=>e9(t,typeof e!="symbol"?e+"":e,n);const oa=560;class _9{constructor(e,n){if(Dn(this,"address"),Dn(this,"auth"),Dn(this,"adminAuth"),Dn(this,"encodedTsPromise"),Dn(this,"debug"),Dn(this,"fetchOptions"),Dn(this,"logger"),typeof n=="boolean")throw new Error("skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.");(n??{}).skipConvexDeploymentUrlCheck!==!0&&Dv(e),this.logger=(n==null?void 0:n.logger)===!1?Gv({verbose:!1}):(n==null?void 0:n.logger)!==!0&&(n!=null&&n.logger)?n.logger:Xv({verbose:!1}),this.address=e,this.debug=!0}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e,n){if(this.clearAuth(),n!==void 0){const r=new TextEncoder().encode(JSON.stringify(n)),i=btoa(String.fromCodePoint(...r));this.adminAuth=`${e}:${i}`}else this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}setFetchOptions(e){this.fetchOptions=e}async consistentQuery(e,...n){const r=Vr(n[0]),i=this.getTimestamp();return await this.queryInner(e,r,{timestampPromise:i})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){const e=fetch,n={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`},r=await e(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:n});if(!r.ok)throw new Error(await r.text());const{ts:i}=await r.json();return i}async query(e,...n){const r=Vr(n[0]);return await this.queryInner(e,r,{})}async queryInner(e,n,r){const i=aa(e),a=[na(n)],s={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?s.Authorization=`Convex ${this.adminAuth}`:this.auth&&(s.Authorization=`Bearer ${this.auth}`);const f=fetch,c=r.timestampPromise?await r.timestampPromise:void 0,u=JSON.stringify({path:i,format:"convex_encoded_json",args:a,...c?{ts:c}:{}}),l=c?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,d=await f(l,{...this.fetchOptions,body:u,method:"POST",headers:s});if(!d.ok&&d.status!==oa)throw new Error(await d.text());const h=await d.json();if(this.debug)for(const g of h.logLines??[])ia(this.logger,"info","query",i,g);switch(h.status){case"success":return On(h.value);case"error":throw h.errorData!==void 0?sa(h.errorData,new ra(h.errorMessage)):new Error(h.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(h)}`)}}async mutation(e,...n){const r=Vr(n[0]),i=aa(e),a=JSON.stringify({path:i,format:"convex_encoded_json",args:[na(r)]}),s={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?s.Authorization=`Convex ${this.adminAuth}`:this.auth&&(s.Authorization=`Bearer ${this.auth}`);const c=await fetch(`${this.address}/api/mutation`,{...this.fetchOptions,body:a,method:"POST",headers:s});if(!c.ok&&c.status!==oa)throw new Error(await c.text());const u=await c.json();if(this.debug)for(const l of u.logLines??[])ia(this.logger,"info","mutation",i,l);switch(u.status){case"success":return On(u.value);case"error":throw u.errorData!==void 0?sa(u.errorData,new ra(u.errorMessage)):new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async action(e,...n){const r=Vr(n[0]),i=aa(e),a=JSON.stringify({path:i,format:"convex_encoded_json",args:[na(r)]}),s={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?s.Authorization=`Convex ${this.adminAuth}`:this.auth&&(s.Authorization=`Bearer ${this.auth}`);const c=await fetch(`${this.address}/api/action`,{...this.fetchOptions,body:a,method:"POST",headers:s});if(!c.ok&&c.status!==oa)throw new Error(await c.text());const u=await c.json();if(this.debug)for(const l of u.logLines??[])ia(this.logger,"info","action",i,l);switch(u.status){case"success":return On(u.value);case"error":throw u.errorData!==void 0?sa(u.errorData,new ra(u.errorMessage)):new Error(u.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(u)}`)}}async function(e,n,...r){const i=Vr(r[0]),a=typeof e=="string"?e:aa(e),s=JSON.stringify({componentPath:n,path:a,format:"convex_encoded_json",args:na(i)}),f={"Content-Type":"application/json","Convex-Client":`npm-${Wr}`};this.adminAuth?f.Authorization=`Convex ${this.adminAuth}`:this.auth&&(f.Authorization=`Bearer ${this.auth}`);const u=await fetch(`${this.address}/api/function`,{...this.fetchOptions,body:s,method:"POST",headers:f});if(!u.ok&&u.status!==oa)throw new Error(await u.text());const l=await u.json();if(this.debug)for(const d of l.logLines??[])ia(this.logger,"info","any",a,d);switch(l.status){case"success":return On(l.value);case"error":throw l.errorData!==void 0?sa(l.errorData,new ra(l.errorMessage)):new Error(l.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(l)}`)}}}function sa(t,e){return e.data=On(t),e}export{b9 as A,u9 as B,_9 as C,m9 as D,Xb as E,ya as F,_d as G,p9 as L,s9 as M,av as R,c9 as S,f9 as a,l9 as b,h9 as c,mr as d,Me as e,y9 as f,ie as g,Xt as h,xr as i,Pt as j,De as k,Ie as l,zc as m,vc as n,ce as o,Do as p,Ce as q,_a as r,g9 as s,d9 as t,Tp as u,_e as v,U7 as w,xu as x,Qb as y,Sn as z};
